<!DOCTYPE html><html data-bs-theme="light" itemscope="" itemtype="http://schema.org/WebPage" lang="zh-hans"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="manifest" href="https://www.hotmindshare.com/manifest.webmanifest"/><link rel="alternate" type="application/rss+xml" href="https://www.hotmindshare.com/series/rocketmq/index.xml"/><meta name="description" content="RocketMQ"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_16x16_resize_box_3.png" sizes="16x16" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_32x32_resize_box_3.png" sizes="32x32" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_150x150_resize_box_3.png" sizes="150x150" type="image/png"/><link rel="apple-touch-icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_180x180_resize_box_3.png" sizes="180x180" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_192x192_resize_box_3.png" sizes="192x192" type="image/png"/><link rel="mask-icon" href="/mask-icon.svg" color="#000000"/><meta property="og:title" content="RocketMQ"/><meta property="og:description" content="ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.hotmindshare.com/series/rocketmq/"/><meta itemprop="name" content="RocketMQ"/><meta itemprop="description" content="ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="RocketMQ"/><meta name="twitter:description" content="ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº"/><title>RocketMQ - ä¸“æ  - ç¨‹åºå‘˜å®‰ä»”</title>
<link href="/css/hb.3c67f855ccf80f01a3923f0fd3bd3203f1b4e2f740e3ce444e0ccab10e418d07.css" rel="stylesheet"/><script src="/js/init.577d4e90bff5601d5756fcf799b0e53568bf56cea3b80fe43f66c9d365e8100c.js" integrity="sha256-V31OkL/1YB1XVvz3mbDlNWi/Vs6juA/kP2bJ02XoEAw="></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?1cbf85f7bc76266af7bdac71374879bf",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel="stylesheet" href="/css/search.ee67fb063f2e4be8eff1be9d9806279c3c3d43570b6266c759281faac3804b11.css"/></head><body><noscript><div class="alert alert-danger text-center rounded-0" role=alert><svg aria-hidden="true" class="bi bi-exclamation-square-fillbi bi-exclamation-square-fill hi-svg-inline me-2" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm6 4c.535.0.954.462.9.995l-.35 3.507a.552.552.0 01-1.1.0L7.1 4.995A.905.905.0 018 4m.002 6a1 1 0 110 2 1 1 0 010-2"/></svg>ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ JavaScriptã€‚</div></noscript><header class="hb-header"><nav class="hb-header-nav navbar navbar-expand-lg"><div class="container-fluid"><a class="navbar-brand d-flex align-items-center" href="/"><img src="https://www.hotmindshare.com/images/logo_hu3f5eb531558986e612421c7146e04118_941594_0x64_resize_box_3.png" alt="Logo" width="64" height="64" class="hb-header-logo d-inline-block align-text-top me-2"/>ç¨‹åºå‘˜å®‰ä»”</a><div class="d-flex order-5"><div class="search-modal-toggle hb-header-search-form position-relative d-flex ms-lg-1"><button type="button" class="hb-header-search-icon border-0 bg-transparent px-2" aria-label="Toggle search">
<svg aria-hidden="true" class="bi bi-searchbi bi-search hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1.007 1.007.0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"></path></svg></button>
<input class="form-control rounded-5 d-none d-lg-block ms-lg-1" id="hb-header-search-input" placeholder="æœç´¢"/>
<span class="hb-header-search-keys position-absolute d-none d-lg-block"><kbd>CTRL</kbd>
<kbd>K</kbd></span></div><button class="navbar-toggler border-0 shadow-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#hb-header-content" aria-controls="hb-header-content" aria-label="Toggle navigation"><svg aria-hidden="true" class="bi bi-three-dotsbi bi-three-dots hi-svg-inline" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></button></div><div class="offcanvas offcanvas-lg offcanvas-end" tabindex="-1" id="hb-header-content" aria-labelledby="hb-header-content-label"><div class="offcanvas-header"><h5 class="offcanvas-title" id="hb-header-content-label">ç¨‹åºå‘˜å®‰ä»”</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button></div><div class="offcanvas-body"><ul class="hb-header-menus navbar-nav flex-row flex-wrap"><li class="hb-header-menu nav-item col-6 col-lg-auto"><a class="nav-link" href="https://www.hotmindshare.com/docs/"><svg aria-hidden="true" class="bi bi-bookbi bi-book hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5.0 000 2.5v11a.5.5.0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5.0 00.78.0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5.0 0016 13.5v-11a.5.5.0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"></path></svg>æŠ€æœ¯æ•™ç¨‹</a></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto"><a class="nav-link pe-0 d-inline-flex align-items-center" href="/interview/"><svg aria-hidden="true" class="bi bi-journal-bookmark-fillbi bi-journal-bookmark-fill hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 1h6v7a.5.5.0 01-.757.429L9 7.083 6.757 8.43A.5.5.0 016 8z"></path><path d="M3 0h10a2 2 0 012 2v12a2 2 0 01-2 2H3a2 2 0 01-2-2v-1h1v1a1 1 0 001 1h10a1 1 0 001-1V2a1 1 0 00-1-1H3A1 1 0 002 2v1H1V2a2 2 0 012-2"></path><path d="M1 5v-.5a.5.5.0 011 0V5h.5a.5.5.0 010 1h-2a.5.5.0 010-1zm0 3v-.5a.5.5.0 011 0V8h.5a.5.5.0 010 1h-2a.5.5.0 010-1zm0 3v-.5a.5.5.0 011 0v.5h.5a.5.5.0 010 1h-2a.5.5.0 010-1z"></path></svg>ğŸ”¥é¢è¯•æŒ‡å—</a>
<a class="nav-link ps-0 d-inline-flex" href="#" id="header-menu-interview" role="button" data-bs-toggle="dropdown" aria-expanded="false"><span class="visually-hidden">Toggle Dropdown</span><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67z"></path></svg></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby="header-menu-interview" data-bs-popper="none"><li class="column-span-all"><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/interview/v4/"><div class="dropdown-item-content"><div class="dropdown-item-title">ç»¼åˆé¢è¯•æŒ‡å—ç¬¬4ç‰ˆ</div></div></a></li></ul></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto"><a class="nav-link pe-0 d-inline-flex align-items-center" href="/blog/"><svg aria-hidden="true" class="hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M192 32c0 17.7 14.3 32 32 32 123.7.0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1.0 224 0c-17.7.0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32 70.7.0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7.0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5.0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144H128v96h16c26.5.0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48V144z"></path></svg>åšå®¢</a>
<a class="nav-link ps-0 d-inline-flex" href="#" id="header-menu-blog" role="button" data-bs-toggle="dropdown" aria-expanded="false"><span class="visually-hidden">Toggle Dropdown</span><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67z"></path></svg></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby="header-menu-blog" data-bs-popper="none"><li><a class="hb-header-submenu dropdown-item d-flex align-items-center active" href="https://www.hotmindshare.com/series/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-columnsbi bi-columns hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v12a1 1 0 01-1 1H1a1 1 0 01-1-1zm8.5.0v8H15V2zm0 9v3H15v-3zm-1-9H1v3h6.5zM1 14h6.5V6H1z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">ä¸“æ </div><p class="dropdown-item-desc mb-0 text-wrap">æ‰€æœ‰ä¸“æ ã€‚</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/authors/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-pencilbi bi-pencil hi-svg-inline" fill="currentcolor" height="2em" style="color:#0f5e97" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M12.146.146a.5.5.0 01.708.0l3 3a.5.5.0 010 .708l-10 10a.5.5.0 01-.168.11l-5 2a.5.5.0 01-.65-.65l2-5a.5.5.0 01.11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5.0 01.5.5v.5h.5a.5.5.0 01.5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5.0 015 12.5V12h-.5a.5.5.0 01-.5-.5V11h-.5a.5.5.0 01-.468-.325z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">ä½œè€…</div><p class="dropdown-item-desc mb-0 text-wrap">ä½œè€…åˆ—è¡¨ã€‚</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/categories/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-folderbi bi-folder hi-svg-inline" fill="currentcolor" height="2em" style="color:orange" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M.54 3.87.5 3a2 2 0 012-2h3.672a2 2 0 011.414.586l.828.828A2 2 0 009.828 3h3.982a2 2 0 011.992 2.181l-.637 7A2 2 0 0113.174 14H2.826A2 2 0 01.835 12.181l-.637-7a1.99 1.99.0 01.342-1.31zM2.19 4a1 1 0 00-.996 1.09l.637 7a1 1 0 00.995.91h10.348a1 1 0 00.995-.91l.637-7A1 1 0 0013.81 4H2.19zm4.69-1.707A1 1 0 006.172 2H2.5a1 1 0 00-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">åˆ†ç±»</div><p class="dropdown-item-desc mb-0 text-wrap">æ‰€æœ‰åˆ†ç±»ã€‚</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/archives/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-archivebi bi-archive hi-svg-inline" fill="currentcolor" height="2em" style="color:384955" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1v7.5A2.5 2.5.0 0112.5 15h-9A2.5 2.5.0 011 12.5V5A1 1 0 010 4zm2 3v7.5A1.5 1.5.0 003.5 14h9a1.5 1.5.0 001.5-1.5V5zm13-3H1v2h14zM5 7.5a.5.5.0 01.5-.5h5a.5.5.0 010 1h-5A.5.5.0 015 7.5"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">å½’æ¡£</div><p class="dropdown-item-desc mb-0 text-wrap">æ–‡ç« å½’æ¡£ã€‚</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/tags/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-tagsbi bi-tags hi-svg-inline" fill="currentcolor" height="2em" style="color:green" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M3 2v4.586l7 7L14.586 9l-7-7zM2 2a1 1 0 011-1h4.586a1 1 0 01.707.293l7 7a1 1 0 010 1.414l-4.586 4.586a1 1 0 01-1.414.0l-7-7A1 1 0 012 6.586z"></path><path d="M5.5 5a.5.5.0 110-1 .5.5.0 010 1m0 1a1.5 1.5.0 100-3 1.5 1.5.0 000 3M1 7.086a1 1 0 00.293.707L8.75 15.25l-.043.043a1 1 0 01-1.414.0l-7-7A1 1 0 010 7.586V3a1 1 0 011-1z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">æ ‡ç­¾</div><p class="dropdown-item-desc mb-0 text-wrap">æ‰€æœ‰æ ‡ç­¾ã€‚</p></div></a></li></ul></li></ul><ul class="hb-header-panel navbar-nav flex-row flex-wrap"><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><hr class="d-lg-none my-2 text-body-50"/></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg><span class="hb-social-text d-lg-none ms-1">Email</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="hb-social-text d-lg-none ms-1">GitHub</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg><span class="hb-social-text d-lg-none ms-1">RSS</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="çŸ¥ä¹"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg><span class="hb-social-text d-lg-none ms-1">çŸ¥ä¹</span></a></li><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><div class="vr d-none d-lg-flex h-100 mx-lg-2 text-body"></div><hr class="d-lg-none my-2 text-body-50"/></li><li class="theme-toggle nav-item dropdown col-6 col-lg-auto d-flex flex-column justify-content-center"><button class="btn btn-link btn-theme-toggle nav-link py-2 px-0 px-lg-2 d-flex justify-content-start justify-content-lg-center align-items-center" data-style="switch" aria-expanded="false" title="ä¸»é¢˜">
<svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1 theme-toggle-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"></path></svg><span class="d-lg-none ms-1 theme-name">ä¸»é¢˜</span></button><ul class="theme-toggle-menu dropdown-menu dropdown-menu-end"><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="è‡ªåŠ¨" data-bs-theme-value="auto">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"></path></svg></span>è‡ªåŠ¨</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="æš—è‰²" data-bs-theme-value="dark">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-moon-starsbi bi-moon-stars hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278M4.858 1.311A7.269 7.269.0 001.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316.0 005.205-2.162c-.337.042-.68.063-1.029.063-4.61.0-8.343-3.714-8.343-8.29.0-1.167.242-2.278.681-3.286z"></path><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></svg></span>æš—è‰²</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="äº®è‰²" data-bs-theme-value="light">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-brightness-highbi bi-brightness-high hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 11a3 3 0 110-6 3 3 0 010 6m0 1a4 4 0 100-8 4 4 0 000 8M8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0m0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13m8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5M3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8m10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0m-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707M4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"></path></svg></span>äº®è‰²</button></li></ul></li></ul></div></div></div></nav></header><div class="hb-main container"><div class="hb-blog-main-container"><div class="hb-blog-main"><div class="container-fluid px-0 mb-4"><nav aria-label="breadcrumb"><ol class="hb-breadcrumb breadcrumb"><li class="breadcrumb-item"><a href="/" title="ç¨‹åºå‘˜å®‰ä»”çš„æŠ€æœ¯æ–‡æ¡£/åšå®¢">ä¸»é¡µ</a></li><li class="breadcrumb-item"><a href="/series/" title="ä¸“æ ">ä¸“æ </a></li><li class="breadcrumb-item active" aria-current="page"><a href="/series/rocketmq/" title="RocketMQ">RocketMQ</a></li></ol></nav></div><div class="hb-blog-term-profile hb-module d-flex flex-column align-items-center"><h1 class="text-center h4 mb-3 mt-2"><a class="text-decoration-none" href="/series/rocketmq/">RocketMQ</a></h1><ul class="nav justify-content-center mt-auto mb-0"><li class="nav-item d-flex flex-column justify-content-center align-items-center my-2 mx-3"><span class="mb-1 fw-bold btn btn-secondary rounded">36</span>
<span class="text-body-secondary">æ–‡ç« </span></li><li class="nav-item d-flex flex-column justify-content-center align-items-center my-2 mx-3"><span class="mb-1 fw-bold btn btn-secondary rounded">1</span>
<span class="text-body-secondary">æ¿å—</span></li><li class="nav-item d-flex flex-column justify-content-center align-items-center my-2 mx-3"><span class="mb-1 fw-bold btn btn-secondary rounded">1</span>
<span class="text-body-secondary">ç±»å‹</span></li></ul></div><div class="hb-terms-posts row row-cols-1 row-cols-md-2"><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">5 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/8/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="å…«ã€RocketMQæºç åˆ†æä¹‹æ¶ˆæ¯ACKæœºåˆ¶ï¼ˆæ¶ˆè´¹è¿›åº¦ï¼‰" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="å…«ã€RocketMQæºç åˆ†æä¹‹æ¶ˆæ¯ACKæœºåˆ¶ï¼ˆæ¶ˆè´¹è¿›åº¦ï¼‰" href="/docs/mq/rocketmq-advanced/8/">å…«ã€RocketMQæºç åˆ†æä¹‹æ¶ˆæ¯ACKæœºåˆ¶ï¼ˆæ¶ˆè´¹è¿›åº¦ï¼‰</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">1ã€æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦æ¦‚è¿° é¦–å…ˆç®€è¦é˜è¿°ä¸€ä¸‹æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦ï¼š
æ¶ˆè´¹è€…è®¢é˜…æ¶ˆæ¯æ¶ˆè´¹é˜Ÿåˆ—ï¼ˆMessageQueue), å½“ç”Ÿäº§è€…å°†æ¶ˆæ¯è´Ÿè½½å‘é€åˆ° MessageQueue ä¸­æ—¶ï¼Œæ¶ˆè´¹è®¢é˜…è€…å¼€å§‹æ¶ˆè´¹æ¶ˆæ¯ï¼Œæ¶ˆæ¯æ¶ˆè´¹è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†é¿å…é‡å¤æ¶ˆè´¹ï¼Œéœ€è¦ä¸€ä¸ªåœ°æ–¹å­˜å‚¨æ¶ˆè´¹è¿›åº¦ï¼ˆæ¶ˆè´¹åç§»é‡ï¼‰ã€‚
æ¶ˆæ¯æ¨¡å¼ä¸»è¦åˆ†ä¸ºé›†ç¾¤æ¨¡å¼ã€å¹¿æ’­æ¨¡å¼ï¼š
é›†ç¾¤æ¨¡å¼ï¼šä¸€æ¡æ¶ˆæ¯è¢«é›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ã€‚ å¹¿æ’­æ¨¡å¼ï¼šæ¯æ¡æ¶ˆæ¯éƒ½è¢«æ¯ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ã€‚ å¹¿æ’­æ¨¡å¼ï¼Œæ—¢ç„¶æ¯æ¡æ¶ˆæ¯è¦è¢«æ¯ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œåˆ™æ¶ˆè´¹è¿›åº¦å¯ä»¥ä¸æ¶ˆè´¹è€…ä¿å­˜åœ¨ä¸€èµ·ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°ä¿å­˜ï¼Œä½†ç”±äºé›†ç¾¤æ¨¡å¼ä¸‹ï¼Œä¸€æ¡æ¶ˆæ¯åªèƒ½è¢«é›†ç¾¤å†…çš„ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œè¿›åº¦ä¸èƒ½ä¿å­˜åœ¨æ¶ˆè´¹ç«¯ï¼Œåªèƒ½é›†ä¸­ä¿å­˜åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæ¯”è¾ƒåˆé€‚çš„æ˜¯åœ¨ Broker ç«¯ã€‚
2ã€æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦å­˜å‚¨æ¥å£ æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦æ¥å£ï¼šOffsetStoreã€‚
1/** 2 * Offset store interface 3 */ 4public interface OffsetStore { 5 /** 6 * Load 7 * 8 * @throws MQClientException 9 */ 10 void load() throws MQClientException; 11 /** 12 * Update the offset,store it in memory 13 * 14 * @param mq 15 * @param offset 16 * @param increaseOnly 17 */ 18 void updateOffset(final MessageQueue mq, final long offset, final boolean increaseOnly); 19 /** 20 * Get offset from local storage 21 * 22 * @param mq 23 * @param type 24 * @return The fetched offset 25 */ 26 long readOffset(final MessageQueue mq, final ReadOffsetType type); 27 /** 28 * Persist all offsets,may be in local storage or remote name server 29 * 30 * @param mqs 31 */ 32 void persistAll(final Set&lt;MessageQueue&gt; mqs); 33 /** 34 * Persist the offset,may be in local storage or remote name server 35 * 36 * @param mq 37 */ 38 void persist(final MessageQueue mq); 39 /** 40 * Remove offset 41 * 42 * @param mq 43 */ 44 void removeOffset(MessageQueue mq); 45 /** 46 * @param topic 47 * @return The cloned offset table of given topic 48 */ 49 Map&lt;MessageQueue, Long&gt; cloneOffsetTable(String topic); 50 /** 51 * @param mq 52 * @param offset 53 * @param isOneway 54 */ 55 void updateConsumeOffsetToBroker(MessageQueue mq, long offset, boolean isOneway) throws RemotingException, 56 MQBrokerException, InterruptedException, MQClientException; å…¥å£ä»£ç ï¼šDefaultMQPushConsumerImpl#start()ã€‚</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/8/">é˜…è¯»æ›´å¤šå…³äºå…«ã€RocketMQæºç åˆ†æä¹‹æ¶ˆæ¯ACKæœºåˆ¶ï¼ˆæ¶ˆè´¹è¿›åº¦ï¼‰çš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">8 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/2/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒã€RocketMQæºç åˆ†æä¹‹Brokeræ¦‚è¿°ä¸åŒæ­¥æ¶ˆæ¯å‘é€åŸç†ä¸é«˜å¯ç”¨è®¾è®¡åŠæ€è€ƒ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒã€RocketMQæºç åˆ†æä¹‹Brokeræ¦‚è¿°ä¸åŒæ­¥æ¶ˆæ¯å‘é€åŸç†ä¸é«˜å¯ç”¨è®¾è®¡åŠæ€è€ƒ" href="/docs/mq/rocketmq-advanced/2/">äºŒã€RocketMQæºç åˆ†æä¹‹Brokeræ¦‚è¿°ä¸åŒæ­¥æ¶ˆæ¯å‘é€åŸç†ä¸é«˜å¯ç”¨è®¾è®¡åŠæ€è€ƒ</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">1ã€Brokeræ¦‚è¿° Broker åœ¨ RocketMQ æ¶æ„ä¸­çš„è§’è‰²ï¼Œå°±æ˜¯å­˜å‚¨æ¶ˆæ¯ï¼Œæ ¸å¿ƒä»»åŠ¡å°±æ˜¯æŒä¹…åŒ–æ¶ˆæ¯ï¼Œç”Ÿäº§è€…å‘é€æ¶ˆæ¯ç»™ Broker,æ¶ˆè´¹è€…ä» Broker æ¶ˆè´¹æ¶ˆæ¯ï¼Œå…¶ç‰©ç†éƒ¨ç½²æ¶æ„å›¾å¦‚ä¸‹ï¼š
å¤‡æ³¨ï¼šä»¥ä¸Šæ‘˜å½•è‡ªå®˜æ–¹ RocketMQ è®¾è®¡æ–‡æ¡£ã€‚
ä¸Šè¿°åŸºæœ¬æè¿°äº†æ¶ˆæ¯ä¸­é—´ä»¶çš„æ¶æ„è®¾è®¡ï¼Œä¸ä»…é™äº RocketMQ,ä¸åŒæ¶ˆæ¯ä¸­é—´ä»¶çš„æœ€å¤§åŒºåˆ«ä¹‹ä¸€åœ¨æ¶ˆæ¯çš„å­˜å‚¨ä¸Šã€‚
2ã€Brokerå­˜å‚¨è®¾è®¡æ¦‚è¦ æ¥ä¸‹æ¥ä»é…ç½®æ–‡ä»¶çš„è§’åº¦æ¥çª¥æ¢ Broker å­˜å‚¨è®¾è®¡çš„å…³æ³¨ç‚¹ï¼Œå¯¹åº”ä»£ç ï¼ˆMessageStoreConfigï¼‰ã€‚
storePathRootDir
è®¾ç½®Brokerçš„å­˜å‚¨æ ¹ç›®å½•ï¼Œé»˜è®¤ä¸º $Broker_Home/storeã€‚ storePathCommitLog
è®¾ç½®commitlogçš„å­˜å‚¨ç›®å½•ï¼Œé»˜è®¤ä¸º$Broker_Home/store/commitlogã€‚ mapedFileSizeCommitLog
commitlog æ–‡ä»¶çš„å¤§å°ï¼Œé»˜è®¤ä¸º1Gã€‚ mapedFileSizeConsumeQueue
consumeQueueSizeï¼ŒConsumeQueue å­˜æ”¾çš„æ˜¯å®šé•¿çš„ä¿¡æ¯ï¼ˆ20ä¸ªå­—èŠ‚ï¼Œåç§»é‡ã€sizeã€tagscodeï¼‰,é»˜è®¤30w * ConsumeQueue.CQ_STORE_UNIT_SIZEã€‚ enableConsumeQueueExt
æ˜¯å¦å¼€å¯ consumeQueueExt,é»˜è®¤ä¸º false,å°±æ˜¯å¦‚æœæ¶ˆè´¹ç«¯æ¶ˆæ¯æ¶ˆè´¹é€Ÿåº¦è·Ÿä¸ä¸Šï¼Œæ˜¯å¦åˆ›å»ºä¸€ä¸ªæ‰©å±•çš„ ConsumeQueueæ–‡ä»¶ï¼Œå¦‚æœä¸å¼€å¯ï¼Œåº”è¯¥ä¼šé˜»å¡ä» commitlog æ–‡ä»¶ä¸­è·å–æ¶ˆæ¯ï¼Œå¹¶ä¸” ConsumeQueue,åº”è¯¥æ˜¯æŒ‰topicç‹¬ç«‹çš„ã€‚ mappedFileSizeConsumeQueueExt
æ‰©å±•consumeæ–‡ä»¶çš„å¤§å°ï¼Œé»˜è®¤ä¸º48Mã€‚ flushIntervalCommitLog
åˆ·å†™ CommitLog çš„é—´éš”æ—¶é—´ï¼ŒRocketMQ åå°ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå°†æ¶ˆæ¯åˆ·å†™åˆ°ç£ç›˜ï¼Œè¿™ä¸ªä¹Ÿå°±æ˜¯è¯¥çº¿ç¨‹æ¯æ¬¡è¿è¡Œåç­‰å¾…çš„æ—¶é—´ï¼Œé»˜è®¤ä¸º500æ¯«ç§’ã€‚flush æ“ä½œï¼Œè°ƒç”¨æ–‡ä»¶é€šé“çš„force()æ–¹æ³•ã€‚ commitIntervalCommitLog
æäº¤æ¶ˆæ¯åˆ° CommitLog å¯¹åº”çš„æ–‡ä»¶é€šé“çš„é—´éš”æ—¶é—´ï¼ŒåŸç†ä¸ä¸Šé¢ç±»ä¼¼ï¼›å°†æ¶ˆæ¯å†™å…¥åˆ°æ–‡ä»¶é€šé“ï¼ˆè°ƒç”¨FileChannel.writeæ–¹æ³•ï¼‰å¾—åˆ°æœ€æ–°çš„å†™æŒ‡é’ˆï¼Œé»˜è®¤ä¸º200æ¯«ç§’ã€‚ useReentrantLockWhenPutMessage
åœ¨put message( å°†æ¶ˆæ¯æŒ‰æ ¼å¼å°è£…æˆmsgæ”¾å…¥ç›¸å…³é˜Ÿåˆ—æ—¶å®ç”¨çš„é”æœºåˆ¶ï¼šè‡ªæ—‹æˆ–ReentrantLock)ã€‚ flushIntervalConsumeQueue
åˆ·å†™åˆ°ConsumeQueueçš„é—´éš”ï¼Œé»˜è®¤ä¸º1sã€‚ flushCommitLogLeastPages
æ¯æ¬¡ flush commitlog æ—¶æœ€å°å‘ç”Ÿå˜åŒ–çš„é¡µæ•°ã€‚ commitCommitLogLeastPages
æ¯ä¸€æ¬¡ commitlog æäº¤ä»»åŠ¡è‡³å°‘éœ€è¦çš„é¡µæ•°ã€‚ flushLeastPagesWhenWarmMapedFile
ç”¨å­—èŠ‚0å¡«å……æ•´ä¸ªæ–‡ä»¶ï¼Œæ¯å¤šå°‘é¡µåˆ·ç›˜ä¸€æ¬¡ï¼Œé»˜è®¤4096ï¼Œå¼‚æ­¥åˆ·ç›˜æ¨¡å¼ç”Ÿæ•ˆã€‚ flushConsumeQueueLeastPages
ä¸€æ¬¡åˆ·ç›˜è‡³å°‘éœ€è¦çš„è„é¡µæ•°é‡ï¼Œé»˜è®¤ä¸º2ï¼Œé’ˆå¯¹ consuequeue æ–‡ä»¶ã€‚ putMsgIndexHightWater</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/2/">é˜…è¯»æ›´å¤šå…³äºäºŒã€RocketMQæºç åˆ†æä¹‹Brokeræ¦‚è¿°ä¸åŒæ­¥æ¶ˆæ¯å‘é€åŸç†ä¸é«˜å¯ç”¨è®¾è®¡åŠæ€è€ƒçš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">2 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/20/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåã€RocketMQæºç åˆ†æä¹‹ä»å®˜æ–¹ç¤ºä¾‹çª¥æ¢RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸºæœ¬æ€æƒ³" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåã€RocketMQæºç åˆ†æä¹‹ä»å®˜æ–¹ç¤ºä¾‹çª¥æ¢RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸºæœ¬æ€æƒ³" href="/docs/mq/rocketmq-advanced/20/">äºŒåã€RocketMQæºç åˆ†æä¹‹ä»å®˜æ–¹ç¤ºä¾‹çª¥æ¢RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸºæœ¬æ€æƒ³</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">RocketMQäº‹åŠ¡æ¶ˆæ¯é˜…è¯»ç›®å½•æŒ‡å¼•ï¼š
RocketMQæºç åˆ†æä¹‹ä»å®˜æ–¹ç¤ºä¾‹çª¥æ¢RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸºæœ¬æ€æƒ³
RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸Šç¯‡
RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸­ç¯‡â€”-äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€å›æŸ¥
RocketMQæºç åˆ†æä¹‹äº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸‹ç¯‡-æ¶ˆæ¯æœåŠ¡å™¨Brokeræäº¤å›æ»šäº‹åŠ¡å®ç°åŸç†
RocketMQäº‹åŠ¡æ¶ˆæ¯å®æˆ˜
RocketMQ4.3.0ç‰ˆæœ¬å¼€å§‹æ”¯æŒäº‹åŠ¡æ¶ˆæ¯ï¼Œæœ¬èŠ‚å¼€å§‹å°†å‰–æäº‹åŠ¡æ¶ˆæ¯çš„å®ç°åŸç†ï¼Œé¦–å…ˆå°†ä»å®˜æ–¹ç»™å‡ºçš„Demoå®ä¾‹å…¥æ‰‹ï¼Œä»¥æ­¤é€šå¾€RocketMQäº‹åŠ¡æ¶ˆæ¯çš„ä¸–ç•Œä¸­ã€‚
å®˜æ–¹ç‰ˆæœ¬æœªå‘å¸ƒä¹‹å‰ï¼Œä»apache rocketmqç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸Šçº¿åï¼Œä»£ç ä¸­å­˜åœ¨è€…ä¸äº‹åŠ¡æ¶ˆæ¯ç›¸å…³çš„ä»£ç ï¼Œä¾‹å¦‚COMMITã€ROLLBACKã€PREPAREDï¼Œ ç½‘ä¸Šå¯¹äºäº‹åŠ¡æ¶ˆæ¯çš„â€œå£°éŸ³â€åŸºæœ¬ä¸Šæ˜¯ä½¿ç”¨ç±»ä¼¼äºŒé˜¶æ®µæäº¤ï¼Œæ¶ˆæ¯ç³»ç»Ÿæ ‡å¿—MessageSysFlagä¸­å®šä¹‰çš„ï¼šTRANSACTION_PREPARED_TYPEã€TRANSACTION_COMMIT_TYPEã€
TRANSACTION_ROLLBACK_TYPEï¼Œæ¶ˆæ¯å‘é€è€…é¦–å…ˆå‘é€TRANSACTION_PREPARED_TYPEç±»å‹çš„æ¶ˆæ¯ï¼Œç„¶åäº‹åŠ¡ä»‹ç»åï¼Œå‘é€commitè¯·æ±‚æˆ–rollbackè¯·æ±‚ï¼Œå¦‚æœcommit,rollbackæ¶ˆæ¯ä¸¢å¤±çš„è¯ï¼Œrocketmqä¼šåœ¨ä¸€å®šè¶…æ—¶æ—¶é—´åä¼šæŸ¥ï¼Œåº”ç”¨ç¨‹åºéœ€è¦å‘ŠçŸ¥è¯¥æ¶ˆæ¯æ˜¯æäº¤è¿˜æ˜¯å›æ»šã€‚è®©æˆ‘ä»¬å„è‡ªå¸¦ç€è‡ªå·±çš„ç†è§£å’ŒçŒœå‡ºï¼Œå…ˆé‡ç‚¹çœ‹ä¸€ä¸‹Demoç¨‹å¼ï¼Œå¤§æ¦‚å¯ä»¥çª¥æ¢ä¸€äº›å¤§ä½“çš„ä¿¡æ¯ã€‚
Demoå®ä¾‹ç¨‹åºä½äºï¼š/rocketmq-example/src/main/java/org/apache/rocketmq/example/transactionåŒ…ä¸­ã€‚ä»è€Œå…ˆè¿è¡Œç”Ÿäº§è€…ï¼Œç„¶åè¿è¡Œæ¶ˆè´¹è€…ï¼Œåˆ¤æ–­äº‹åŠ¡æ¶ˆæ¯çš„é¢„å‘æ”¾ã€æäº¤ã€å›æ»šç­‰æ•ˆæœï¼ŒäºŒè¯ä¸è¯´ï¼Œå…ˆè¿è¡Œä¸€ä¸‹ï¼Œçœ‹ä¸‹æ•ˆæœå†è¯´ï¼š
æ¶ˆæ¯å‘é€ç«¯è¿è¡Œç»“æœï¼š
1SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D5767EC0000, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=1], queueOffset=0] 2SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D57680F0001, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=2], queueOffset=1] 3SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D57681E0002, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=3], queueOffset=2] 4SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D57682B0003, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=0], queueOffset=3] 5SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D5768380004, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=1], queueOffset=4] 6SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D5768490005, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=2], queueOffset=5] 7SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D5768560006, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=3], queueOffset=6] 8SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D5768640007, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=0], queueOffset=7] 9SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D5768730008, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=1], queueOffset=8] 10SendResult [sendStatus=SEND_OK, msgId=C0A8010518DC6D06D69C8D5768800009, offsetMsgId=null, messageQueue=MessageQueue [topic=transaction_topic_test, brokerName=broker-a, queueId=2], queueOffset=9] ç»¼ä¸Šæ‰€è¿°ï¼ŒæœåŠ¡ç«¯å‘é€äº†10æ¡æ¶ˆæ¯ï¼Œä½†æˆ‘ä»¬ä»rocketmq-consonseä¸Šåªèƒ½æŸ¥çœ‹åˆ°3æ¡æ¶ˆæ¯ï¼Œä¸€ä¸ªåˆç†çš„è§£é‡Šå°±æ˜¯åªæœ‰3æ¡æ¶ˆæ¯æäº¤ï¼Œå…¶ä»–éƒ½å›æ»šäº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/20/">é˜…è¯»æ›´å¤šå…³äºäºŒåã€RocketMQæºç åˆ†æä¹‹ä»å®˜æ–¹ç¤ºä¾‹çª¥æ¢RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸºæœ¬æ€æƒ³çš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">2 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/28/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåå…«ã€RocketMQ ACLä½¿ç”¨æŒ‡å—" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåå…«ã€RocketMQ ACLä½¿ç”¨æŒ‡å—" href="/docs/mq/rocketmq-advanced/28/">äºŒåå…«ã€RocketMQ ACLä½¿ç”¨æŒ‡å—</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æœ¬èŠ‚ç›®å½• 1ã€ä»€ä¹ˆæ˜¯ACL? 2ã€ ACLåŸºæœ¬æµç¨‹å›¾ï¼›
3ã€ å¦‚ä½•é…ç½®ACLï¼›
3.1 aclé…ç½®æ–‡ä»¶
3.1.1 globalWhiteRemoteAddresses
3.1.2 accounts
3.1.2.1 accessKey 3.1.2.2 secretKey 3.1.2.3 whiteRemoteAddress 3.1.2.4 admin 3.1.2.5 defaultTopicPerm 3.1.2.6 defaultGroupPerm 3.1.2.7 topicPerms 3.1.2.8 groupPerms 3.2 RocketMQ ACLæƒé™å¯é€‰å€¼
3.3ã€æƒé™éªŒè¯æµç¨‹
4ã€ ä½¿ç”¨ç¤ºä¾‹ï¼›
4.1 Brokerç«¯å®‰è£… 4.2 æ¶ˆæ¯å‘é€ç«¯ç¤ºä¾‹ 4.3 æ¶ˆæ¯æ¶ˆè´¹ç«¯ç¤ºä¾‹ 1ã€ä»€ä¹ˆæ˜¯ACL? ACLæ˜¯access control listçš„ç®€ç§°ï¼Œä¿—ç§°è®¿é—®æ§åˆ¶åˆ—è¡¨ã€‚è®¿é—®æ§åˆ¶ï¼ŒåŸºæœ¬ä¸Šä¼šæ¶‰åŠåˆ°ç”¨æˆ·ã€èµ„æºã€æƒé™ã€è§’è‰²ç­‰æ¦‚å¿µï¼Œé‚£åœ¨RocketMQä¸­ä¸Šè¿°ä¼šå¯¹åº”å“ªäº›å¯¹è±¡å‘¢ï¼Ÿ
ç”¨æˆ·
ç”¨æˆ·æ˜¯è®¿é—®æ§åˆ¶çš„åŸºç¡€è¦ç´ ï¼Œä¹Ÿä¸éš¾ç†è§£ï¼ŒRocketMQ ACLå¿…ç„¶ä¹Ÿä¼šå¼•å…¥ç”¨æˆ·çš„æ¦‚å¿µï¼Œå³æ”¯æŒç”¨æˆ·åã€å¯†ç ã€‚ èµ„æº
èµ„æºï¼Œéœ€è¦ä¿æŠ¤çš„å¯¹è±¡ï¼Œåœ¨RocketMQä¸­ï¼Œæ¶ˆæ¯å‘é€æ¶‰åŠçš„Topicã€æ¶ˆæ¯æ¶ˆè´¹æ¶‰åŠçš„æ¶ˆè´¹ç»„ï¼Œåº”è¯¥è¿›è¡Œä¿æŠ¤ï¼Œæ•…å¯ä»¥æŠ½è±¡æˆèµ„æºã€‚ æƒé™
é’ˆå¯¹èµ„æºï¼Œèƒ½è¿›è¡Œçš„æ“ä½œï¼Œ è§’è‰²
RocketMQä¸­ï¼Œåªå®šä¹‰ä¸¤ç§è§’è‰²ï¼šæ˜¯å¦æ˜¯ç®¡ç†å‘˜ã€‚ å¦å¤–ï¼ŒRocketMQè¿˜æ”¯æŒæŒ‰ç…§å®¢æˆ·ç«¯IPè¿›è¡Œç™½åå•è®¾ç½®ã€‚
2ã€ACLåŸºæœ¬æµç¨‹å›¾ å› åˆæ¬¡è®¿é—®ï¼Œä¸ºé˜²æ­¢çˆ¬è™«å’Œäººæœºè¯†åˆ«ï¼Œè¯·å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œå›å¤:â€˜éªŒè¯ç â€˜è·å–éªŒè¯ç æ¥è§£é”å…¨æ–‡ è§£é”å†…å®¹ åœ¨è®²è§£å¦‚ä½•ä½¿ç”¨ACLä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€å•çœ‹ä¸€ä¸‹RocketMQ ACLçš„è¯·æ±‚æµç¨‹ï¼š
å¯¹äºä¸Šè¿°å…·ä½“çš„å®ç°ï¼Œå°†åœ¨åç»­æ–‡ç« ä¸­é‡ç‚¹è®²è§£ï¼Œæœ¬æ–‡çš„ç›®çš„åªæ˜¯å¸Œæœ›ç»™è¯»è€…ä¸€ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚
3ã€å¦‚ä½•é…ç½®ACL 3.1 aclé…ç½®æ–‡ä»¶ aclé»˜è®¤çš„é…ç½®æ–‡ä»¶åï¼šplain_acl.yml,éœ€è¦æ”¾åœ¨${ROCKETMQ_HOME}/store/configç›®å½•ä¸‹ã€‚ä¸‹é¢å¯¹å…¶é…ç½®é¡¹ä¸€ä¸€ä»‹ç»ã€‚
3.1.1 globalWhiteRemoteAddresses å…¨å±€ç™½åå•ï¼Œå…¶ç±»å‹ä¸ºæ•°ç»„ï¼Œå³æ”¯æŒå¤šä¸ªé…ç½®ã€‚å…¶æ”¯æŒçš„é…ç½®æ ¼å¼å¦‚ä¸‹ï¼š
ç©º
è¡¨ç¤ºä¸è®¾ç½®ç™½åå•ï¼Œè¯¥æ¡è§„åˆ™é»˜è®¤è¿”å›falseã€‚ â€œ*â€</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/28/">é˜…è¯»æ›´å¤šå…³äºäºŒåå…«ã€RocketMQ ACLä½¿ç”¨æŒ‡å—çš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">6 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/22/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåäºŒã€RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸­ç¯‡â€”-äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€å›æŸ¥" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåäºŒã€RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸­ç¯‡â€”-äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€å›æŸ¥" href="/docs/mq/rocketmq-advanced/22/">äºŒåäºŒã€RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸­ç¯‡â€”-äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€å›æŸ¥</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">ä¸ŠèŠ‚å·²ç»æ¢³ç†äº†RocketMQå‘é€äº‹åŠ¡æ¶ˆæ¯çš„æµç¨‹ï¼ˆåŸºäºäºŒé˜¶æ®µæäº¤ï¼‰ï¼Œæœ¬èŠ‚å°†ç»§ç»­æ·±å…¥å­¦ä¹ äº‹åŠ¡çŠ¶æ€æ¶ˆæ¯å›æŸ¥ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œç¬¬ä¸€æ¬¡æäº¤åˆ°æ¶ˆæ¯æœåŠ¡å™¨ï¼Œæ¶ˆæ¯çš„ä¸»é¢˜è¢«æ›¿æ¢ä¸ºRMQ_SYS_TRANS_HALF_TOPICï¼Œå½“æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼Œå¦‚æœè¿”å›æœ¬åœ°äº‹åŠ¡çŠ¶æ€ä¸ºUN_KNOWæ—¶ï¼Œç¬¬äºŒæ¬¡æäº¤åˆ°æœåŠ¡å™¨æ—¶å°†ä¸ä¼šåšä»»ä½•æ“ä½œï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯è¿˜å­˜åœ¨ä¸RMQ_SYS_TRANS_HALF_TOPICä¸»é¢˜ä¸­ï¼Œå¹¶ä¸èƒ½è¢«æ¶ˆæ¯æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œé‚£è¿™äº›æ¶ˆæ¯æœ€ç»ˆå¦‚ä½•è¢«æäº¤æˆ–å›æ»šå‘¢ï¼ŸåŸæ¥RocketMQä½¿ç”¨TransactionalMessageCheckServiceçº¿ç¨‹å®šæ—¶å»æ£€æµ‹RMQ_SYS_TRANS_HALF_TOPICä¸»é¢˜ä¸­çš„æ¶ˆæ¯ï¼Œå›æŸ¥æ¶ˆæ¯çš„äº‹åŠ¡çŠ¶æ€ã€‚TransactionalMessageCheckServiceçš„æ£€æµ‹é¢‘ç‡é»˜è®¤1åˆ†é’Ÿï¼Œå¯é€šè¿‡åœ¨broker.confæ–‡ä»¶ä¸­è®¾ç½®transactionCheckIntervalçš„å€¼æ¥æ”¹å˜é»˜è®¤å€¼ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚
æ¸©é¦¨æç¤ºï¼šæ–‡æœ«é™„æœ‰æµç¨‹å›¾ã€‚
TransactionalMessageCheckService#onWaitEnd
1protected void onWaitEnd() { 2 long timeout = brokerController.getBrokerConfig().getTransactionTimeOut(); // @1 3 int checkMax = brokerController.getBrokerConfig().getTransactionCheckMax(); // @2 4 long begin = System.currentTimeMillis(); 5 log.info(&#34;Begin to check prepare message, begin time:{}&#34;, begin); 6 this.brokerController.getTransactionalMessageService().check(timeout, checkMax, this.brokerController.getTransactionalMessageCheckListener()); // @3 7 log.info(&#34;End to check prepare message, consumed time:{}&#34;, System.currentTimeMillis() - begin); 8 } ä»£ç @1ï¼šä»brokeré…ç½®æ–‡ä»¶ä¸­è·å–transactionTimeOutå‚æ•°å€¼ï¼Œè¡¨ç¤ºäº‹åŠ¡çš„è¿‡æœŸæ—¶é—´ï¼Œä¸€ä¸ªæ¶ˆæ¯çš„å­˜å‚¨æ—¶é—´ + è¯¥å€¼ å¤§äºç³»ç»Ÿå½“å‰æ—¶é—´ï¼Œæ‰å¯¹è¯¥æ¶ˆæ¯æ‰§è¡Œäº‹åŠ¡çŠ¶æ€ä¼šæŸ¥ã€‚
ä»£ç @2ï¼šä»brokeré…ç½®æ–‡ä»¶ä¸­è·å–transactionCheckMaxå‚æ•°å€¼ï¼Œè¡¨ç¤ºäº‹åŠ¡çš„æœ€å¤§æ£€æµ‹æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡æ£€æµ‹æ¬¡æ•°ï¼Œæ¶ˆæ¯ä¼šé»˜è®¤ä¸ºä¸¢å¼ƒï¼Œå³rollbackæ¶ˆæ¯ã€‚
æ¥ä¸‹æ¥é‡ç‚¹åˆ†æTransactionalMessageService#checkçš„å®ç°é€»è¾‘ï¼Œå…¶å®ç°ç±»ï¼šorg.apache.rocketmq.broker.transaction.queue.TransactionalMessageServiceImpl
TransactionalMessageServiceImpl#check
1String topic = MixAll.RMQ_SYS_TRANS_HALF_TOPIC; 2Set&lt;MessageQueue&gt; msgQueues = transactionalMessageBridge.fetchMessageQueues(topic); 3if (msgQueues == null || msgQueues.</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/22/">é˜…è¯»æ›´å¤šå…³äºäºŒåäºŒã€RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸­ç¯‡â€”-äº‹åŠ¡æ¶ˆæ¯çŠ¶æ€å›æŸ¥çš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">6 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/29/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåä¹ã€RocketMQæºç åˆ†æ ACLå®ç°æœºåˆ¶" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåä¹ã€RocketMQæºç åˆ†æ ACLå®ç°æœºåˆ¶" href="/docs/mq/rocketmq-advanced/29/">äºŒåä¹ã€RocketMQæºç åˆ†æ ACLå®ç°æœºåˆ¶</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æœ‰å…³RocketMQ ACLçš„ä½¿ç”¨è¯·æŸ¥çœ‹ä¸Šä¸€ç¯‡ã€ŠRocketMQ ACLä½¿ç”¨æŒ‡å—ã€‹ï¼Œæœ¬æ–‡ä»æºç çš„è§’åº¦ï¼Œåˆ†æä¸€ä¸‹RocketMQ ACLçš„å®ç°åŸç†ã€‚
å¤‡æ³¨ï¼šRocketMQåœ¨4.4.0æ—¶å¼•å…¥äº†ACLæœºåˆ¶ï¼Œæœ¬æ–‡ä»£ç åŸºäºRocketMQ4.5.0ç‰ˆæœ¬ã€‚
æœ¬èŠ‚ç›®å½• 1ã€BrokerController#initialAcl 2ã€ PlainAccessValidatorï¼›
2.1 ç±»å›¾ 2.1.2 PlainAccessResourceç±»å›¾ 2.2 æ„é€ æ–¹æ³• 2.3 parseæ–¹æ³• 2.4 validate æ–¹æ³• 3ã€ PlainPermissionLoaderï¼›
3.1 ç±»å›¾ 3.2 PlainPermissionLoaderæ„é€ æ–¹æ³• 3.3 load 3.4 watch 3.5 validate 3.5.1 checkPerm 4ã€ AclClientRPCHookï¼›
4.1 doBeforeRequest æ ¹æ®RocketMQ ACLä½¿ç”¨æ‰‹å†Œï¼Œæˆ‘ä»¬åº”è¯¥é¦–å…ˆçœ‹ä¸€ä¸‹BrokeræœåŠ¡å™¨åœ¨å¼€å¯ACLæœºåˆ¶æ—¶å¦‚ä½•åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶å¦‚ä½•å·¥ä½œçš„ã€‚
1ã€BrokerController#initialAcl Brokerç«¯ACLçš„å…¥å£ä»£ç ä¸ºï¼šBrokerController#initialAcl
1private void initialAcl() { 2 if (!this.brokerConfig.isAclEnable()) { // @1 3 log.info(&#34;The broker dose not enable acl&#34;); 4 return; 5 } 6 List&lt;AccessValidator&gt; accessValidators = ServiceProvider.load(ServiceProvider.ACL_VALIDATOR_ID, AccessValidator.class); // @2 7 if (accessValidators == null || accessValidators.</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/29/">é˜…è¯»æ›´å¤šå…³äºäºŒåä¹ã€RocketMQæºç åˆ†æ ACLå®ç°æœºåˆ¶çš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">2 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/26/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåå…­ã€RocketMQ æ¶ˆæ¯å‘é€system busyã€broker busyåŸå› åˆ†æä¸è§£å†³æ–¹æ¡ˆ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåå…­ã€RocketMQ æ¶ˆæ¯å‘é€system busyã€broker busyåŸå› åˆ†æä¸è§£å†³æ–¹æ¡ˆ" href="/docs/mq/rocketmq-advanced/26/">äºŒåå…­ã€RocketMQ æ¶ˆæ¯å‘é€system busyã€broker busyåŸå› åˆ†æä¸è§£å†³æ–¹æ¡ˆ</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æœ¬èŠ‚ç›®å½• 1ã€ç°è±¡ 2ã€ åŸç†è§£è¯»ï¼›
2.1 RocketMQ ç½‘ç»œå¤„ç†æœºåˆ¶æ¦‚è¿°
2.2 pair.getObject1().rejectRequest()
2.2.1 isOSPageCacheBusy()
2.2.2 isTransientStorePoolDeficient()
2.3 æ¼«è°ˆtransientStorePoolEnableæœºåˆ¶
2.3.1 MappedFile
2.3.2 TransientStorePoolåˆå§‹åŒ–
3ã€ ç°è±¡è§£ç­”ï¼›
3.1 [REJECTREQUEST]system busy 3.2 too many requests and system thread pool busy, RejectedExecutionException 3.3 [PC_SYNCHRONIZED]broker busy 3.4 broker busy, period in queue: %sms, size of queue: %d 4ã€ å®è·µå»ºè®®ï¼›
4.1 å¼€å¯transientStorePoolEnable 4.2 æ‰©å®¹BrokeræœåŠ¡å™¨ 1ã€ç°è±¡ æœ€è¿‘æ”¶åˆ°å¾ˆå¤šRocketMQä½¿ç”¨è€…ï¼Œåé¦ˆç”Ÿäº§ç¯å¢ƒä¸­åœ¨æ¶ˆæ¯å‘é€è¿‡ç¨‹ä¸­å¶å°”ä¼šå‡ºç°å¦‚ä¸‹4ä¸ªé”™è¯¯ä¿¡æ¯ä¹‹ä¸€ï¼š
1ï¼‰[REJECTREQUEST]system busy, start flow control for a while
2ï¼‰too many requests and system thread pool busy, RejectedExecutionException</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/26/">é˜…è¯»æ›´å¤šå…³äºäºŒåå…­ã€RocketMQ æ¶ˆæ¯å‘é€system busyã€broker busyåŸå› åˆ†æä¸è§£å†³æ–¹æ¡ˆçš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">2 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/27/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåä¸ƒã€RocketMQ HAæœºåˆ¶(ä¸»ä»åŒæ­¥)" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåä¸ƒã€RocketMQ HAæœºåˆ¶(ä¸»ä»åŒæ­¥)" href="/docs/mq/rocketmq-advanced/27/">äºŒåä¸ƒã€RocketMQ HAæœºåˆ¶(ä¸»ä»åŒæ­¥)</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æ¸©é¦¨æç¤ºï¼šå»ºè®®å‚è€ƒä»£ç RocketMQ4.4ç‰ˆæœ¬ï¼Œ4.5ç‰ˆæœ¬å¼•å…¥äº†å¤šå‰¯æœ¬æœºåˆ¶ï¼Œå®ç°äº†ä¸»ä»è‡ªåŠ¨åˆ‡æ¢ï¼Œæœ¬æ–‡å¹¶ä¸å…³å¿ƒä¸»ä»åˆ‡æ¢åŠŸèƒ½ã€‚
æœ¬èŠ‚ç›®å½• 1ã€åˆè¯†ä¸»ä»åŒæ­¥ 2ã€ æå‡ºé—®é¢˜ï¼›
3ã€ åŸç†æ¢ç©¶ï¼›
3.1 RocketMQä¸»ä»è¯»å†™åˆ†ç¦»æœºåˆ¶ 3.2 æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦åŒæ­¥æœºåˆ¶ 3.2.1 ä»æœåŠ¡å®šæ—¶åŒæ­¥ä¸»æœåŠ¡å™¨è¿›åº¦
3.2.2 ä¸»æœåŠ¡å™¨æ¶ˆæ¯æ‹‰å–æ—¶æ›´æ–°æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦ 4ã€ æ€»ç»“ï¼›
1ã€åˆè¯†ä¸»ä»åŒæ­¥ ä¸»ä»åŒæ­¥åŸºæœ¬å®ç°è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
RocketMQ çš„ä¸»ä»åŒæ­¥æœºåˆ¶å¦‚ä¸‹ï¼š
A.é¦–å…ˆå¯åŠ¨Masterå¹¶åœ¨æŒ‡å®šç«¯å£ç›‘å¬ï¼›
B.å®¢æˆ·ç«¯å¯åŠ¨ï¼Œä¸»åŠ¨è¿æ¥Masterï¼Œå»ºç«‹TCPè¿æ¥ï¼›
C.å®¢æˆ·ç«¯ä»¥æ¯éš”5sçš„é—´éš”æ—¶é—´å‘æœåŠ¡ç«¯æ‹‰å–æ¶ˆæ¯ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ‹‰å–çš„è¯ï¼Œå…ˆè·å–æœ¬åœ°commitlogæ–‡ä»¶ä¸­æœ€å¤§çš„åç§»é‡ï¼Œä»¥è¯¥åç§»é‡å‘æœåŠ¡ç«¯æ‹‰å–æ¶ˆæ¯ï¼›
D.æœåŠ¡ç«¯è§£æè¯·æ±‚ï¼Œå¹¶è¿”å›ä¸€æ‰¹æ•°æ®ç»™å®¢æˆ·ç«¯ï¼›
E.å®¢æˆ·ç«¯æ”¶åˆ°ä¸€æ‰¹æ¶ˆæ¯åï¼Œå°†æ¶ˆæ¯å†™å…¥æœ¬åœ°commitlogæ–‡ä»¶ä¸­ï¼Œç„¶åå‘Masteræ±‡æŠ¥æ‹‰å–è¿›åº¦ï¼Œå¹¶æ›´æ–°ä¸‹ä¸€æ¬¡å¾…æ‹‰å–åç§»é‡ï¼›
F.ç„¶åé‡å¤ç¬¬3æ­¥ï¼›
RocketMQä¸»ä»åŒæ­¥ä¸€ä¸ªé‡è¦çš„ç‰¹å¾ï¼šä¸»ä»åŒæ­¥ä¸å…·å¤‡ä¸»ä»åˆ‡æ¢åŠŸèƒ½ï¼Œå³å½“ä¸»èŠ‚ç‚¹å®•æœºåï¼Œä»ä¸ä¼šæ¥ç®¡æ¶ˆæ¯å‘é€ï¼Œä½†å¯ä»¥æä¾›æ¶ˆæ¯è¯»å–ã€‚
æ¸©é¦¨æç¤ºï¼šæœ¬æ–‡å¹¶ä¸ä¼šè¯¦ç»†åˆ†æRocketMQä¸»ä»åŒæ­¥çš„å®ç°ç»†èŠ‚ï¼Œå¦‚å¤§å®¶å¯¹å…¶æ„Ÿå…´è¶£ï¼Œå¯ä»¥æŸ¥é˜…ç¬”è€…æ‰€è‘—çš„ã€ŠRocketMQæŠ€æœ¯å†…å¹•ã€‹æˆ–æŸ¥çœ‹ç¬”è€…åšæ–‡ï¼šhttps://blog.csdn.net/prestigeding/article/details/79600792
2ã€æå‡ºé—®é¢˜ å› åˆæ¬¡è®¿é—®ï¼Œä¸ºé˜²æ­¢çˆ¬è™«å’Œäººæœºè¯†åˆ«ï¼Œè¯·å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œå›å¤:â€˜éªŒè¯ç â€˜è·å–éªŒè¯ç æ¥è§£é”å…¨æ–‡ è§£é”å†…å®¹ ä¸»ï¼Œä»æœåŠ¡å™¨éƒ½åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œæ¶ˆæ¯æ¶ˆè´¹è€…æ˜¯ä»ä¸»æ‹‰å–æ¶ˆæ¯è¿˜æ˜¯ä»ä»æ‹‰å–ï¼Ÿ RocketMQä¸»ä»åŒæ­¥æ¶æ„ä¸­ï¼Œå¦‚æœä¸»æœåŠ¡å™¨å®•æœºï¼Œä»æœåŠ¡å™¨ä¼šæ¥ç®¡æ¶ˆæ¯æ¶ˆè´¹ï¼Œæ­¤æ—¶æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦å¦‚ä½•ä¿æŒï¼Œå½“ä¸»æœåŠ¡å™¨æ¢å¤åï¼Œæ¶ˆæ¯æ¶ˆè´¹è€…æ˜¯ä»ä¸»æ‹‰å–æ¶ˆæ¯è¿˜æ˜¯ä»ä»æœåŠ¡å™¨æ‹‰å–ï¼Œä¸»ä»æœåŠ¡å™¨ä¹‹é—´çš„æ¶ˆæ¯æ¶ˆè´¹è¿›åº¦å¦‚ä½•åŒæ­¥ï¼Ÿ æ¥ä¸‹æ¥å¸¦ç€ä¸Šè¿°é—®é¢˜ï¼Œä¸€èµ·æ¥æ¢ç©¶å…¶å®ç°åŸç†ã€‚
3ã€åŸç†æ¢ç©¶ 3.1 RocketMQä¸»ä»è¯»å†™åˆ†ç¦»æœºåˆ¶ RocketMQçš„ä¸»ä»åŒæ­¥ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹RocketMQä¼šä¼˜å…ˆé€‰æ‹©ä»ä¸»æœåŠ¡å™¨è¿›è¡Œæ‹‰å–æ¶ˆæ¯ï¼Œå¹¶ä¸æ˜¯é€šå¸¸æ„ä¹‰çš„ä¸Šçš„è¯»å†™åˆ†ç¦»ï¼Œé‚£ä»€ä¹ˆæ—¶å€™ä¼šä»æ‹‰å–å‘¢ï¼Ÿ
æ¸©é¦¨æç¤ºï¼šæœ¬èŠ‚åŒæ ·ä¸ä¼šè¯¦ç»†æ•´ä¸ªæµç¨‹ï¼Œåªä¼šç‚¹å‡ºå…¶å…³é”®ç‚¹ï¼Œå¦‚æœæƒ³è¯¦ç»†äº†è§£æ¶ˆæ¯æ‹‰å–ã€æ¶ˆæ¯æ¶ˆè´¹ç­‰æ ¸å¿ƒæµç¨‹ï¼Œå»ºè®®å¤§å®¶æŸ¥é˜…ç¬”è€…æ‰€è‘—çš„ã€ŠRocketMQæŠ€æœ¯å†…å¹•ã€‹ã€‚
åœ¨RocketMQä¸­åˆ¤æ–­æ˜¯ä»ä¸»æ‹‰å–ï¼Œè¿˜æ˜¯ä»ä»æ‹‰å–çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š
DefaultMessageStore#getMessage
1long diff = maxOffsetPy - maxPhyOffsetPulling; // @1 2long memory = (long) (StoreUtil.TOTAL_PHYSICAL_MEMORY_SIZE 3 * (this.messageStoreConfig.getAccessMessageInMemoryMaxRatio() / 100.0)); // @2 4getResult.setSuggestPullingFromSlave(diff &gt; memory); // @3 ä»£ç @1ï¼šé¦–å…ˆä»‹ç»ä¸€ä¸‹å‡ ä¸ªå±€éƒ¨å˜é‡çš„å«ä¹‰ï¼š
maxOffsetPy</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/27/">é˜…è¯»æ›´å¤šå…³äºäºŒåä¸ƒã€RocketMQ HAæœºåˆ¶(ä¸»ä»åŒæ­¥)çš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/23/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåä¸‰ã€RocketMQæºç åˆ†æä¹‹äº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸‹ç¯‡-æ¶ˆæ¯æœåŠ¡å™¨Brokeræäº¤å›æ»šäº‹åŠ¡å®ç°åŸç†" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåä¸‰ã€RocketMQæºç åˆ†æä¹‹äº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸‹ç¯‡-æ¶ˆæ¯æœåŠ¡å™¨Brokeræäº¤å›æ»šäº‹åŠ¡å®ç°åŸç†" href="/docs/mq/rocketmq-advanced/23/">äºŒåä¸‰ã€RocketMQæºç åˆ†æä¹‹äº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸‹ç¯‡-æ¶ˆæ¯æœåŠ¡å™¨Brokeræäº¤å›æ»šäº‹åŠ¡å®ç°åŸç†</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æœ¬æ–‡å°†é‡ç‚¹åˆ†æRocketMQ Brokerå¦‚ä½•å¤„ç†äº‹åŠ¡æ¶ˆæ¯æäº¤ã€å›æ»šå‘½ä»¤ï¼Œå…¶æ ¸å¿ƒå®ç°å°±æ˜¯æ ¹æ®commitlogOffsetæ‰¾åˆ°æ¶ˆæ¯ï¼Œå¦‚æœæ˜¯æäº¤åŠ¨ä½œï¼Œå°±æ¢å¤åŸæ¶ˆæ¯çš„ä¸»é¢˜ä¸é˜Ÿåˆ—ï¼Œå†æ¬¡å­˜å…¥commitlogæ–‡ä»¶è¿›è€Œè½¬åˆ°æ¶ˆæ¯æ¶ˆè´¹é˜Ÿåˆ—ï¼Œä¾›æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œç„¶åå°†åŸé¢„å¤„ç†æ¶ˆæ¯å­˜å…¥ä¸€ä¸ªæ–°çš„ä¸»é¢˜RMQ_SYS_TRANS_OP_HALF_TOPICï¼Œä»£è¡¨è¯¥æ¶ˆæ¯å·²è¢«å¤„ç†ï¼›å›æ»šæ¶ˆæ¯ä¸æäº¤äº‹åŠ¡æ¶ˆæ¯ä¸åŒçš„æ˜¯ï¼Œæäº¤äº‹åŠ¡æ¶ˆæ¯ä¼šå°†æ¶ˆæ¯æ¢å¤åŸä¸»é¢˜ä¸é˜Ÿåˆ—ï¼Œå†æ¬¡å­˜å‚¨åœ¨commitlogæ–‡ä»¶ä¸­ã€‚æºç å…¥å£ï¼š
EndTransactionProcessor#processRequest
1OperationResult result = new OperationResult(); 2if (MessageSysFlag.TRANSACTION_COMMIT_TYPE == requestHeader.getCommitOrRollback()) { // @1 3result = this.brokerController.getTransactionalMessageService().commitMessage(requestHeader); // @2 4 if (result.getResponseCode() == ResponseCode.SUCCESS) { // @3 5 RemotingCommand res = checkPrepareMessage(result.getPrepareMessage(), requestHeader); // @4 6 if (res.getCode() == ResponseCode.SUCCESS) { 7 MessageExtBrokerInner msgInner = endMessageTransaction(result.getPrepareMessage()); // @5 8 msgInner.setSysFlag(MessageSysFlag.resetTransactionValue(msgInner.getSysFlag(), requestHeader.getCommitOrRollback())); 9 msgInner.setQueueOffset(requestHeader.getTranStateTableOffset()); 10 msgInner.setPreparedTransactionOffset(requestHeader.getCommitLogOffset()); 11 msgInner.setStoreTimestamp(result.getPrepareMessage().getStoreTimestamp()); // @6 12 RemotingCommand sendResult = sendFinalMessage(msgInner); // @7 13 if (sendResult.</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/23/">é˜…è¯»æ›´å¤šå…³äºäºŒåä¸‰ã€RocketMQæºç åˆ†æä¹‹äº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸‹ç¯‡-æ¶ˆæ¯æœåŠ¡å™¨Brokeræäº¤å›æ»šäº‹åŠ¡å®ç°åŸç†çš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/24/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåå››ã€RocketMQäº‹åŠ¡æ¶ˆæ¯å®æˆ˜" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåå››ã€RocketMQäº‹åŠ¡æ¶ˆæ¯å®æˆ˜" href="/docs/mq/rocketmq-advanced/24/">äºŒåå››ã€RocketMQäº‹åŠ¡æ¶ˆæ¯å®æˆ˜</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æˆ‘ä»¬ä»¥ä¸€ä¸ªè®¢å•æµè½¬æµç¨‹æ¥ä¸¾ä¾‹ï¼Œä¾‹å¦‚è®¢å•å­ç³»ç»Ÿåˆ›å»ºè®¢å•ï¼Œéœ€è¦å°†è®¢å•æ•°æ®ä¸‹å‘åˆ°å…¶ä»–å­ç³»ç»Ÿï¼ˆä¸ç¬¬ä¸‰æ–¹ç³»ç»Ÿå¯¹æ¥ï¼‰è¿™ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†ä¸¤ä¸ªç³»ç»Ÿè¿›è¡Œè§£è€¦ï¼Œä¸ç›´æ¥ä½¿ç”¨æœåŠ¡è°ƒç”¨çš„æ–¹å¼è¿›è¡Œäº¤äº’ã€‚å…¶ä¸šåŠ¡å®ç°æ­¥éª¤é€šå¸¸ä¸ºï¼š
1ã€Aç³»ç»Ÿåˆ›å»ºè®¢å•å¹¶å…¥åº“ã€‚
2ã€å‘é€æ¶ˆæ¯åˆ°MQã€‚
3ã€MQæ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯ï¼Œå‘é€è¿œç¨‹RPCæœåŠ¡è°ƒç”¨ï¼Œå®Œæˆè®¢å•æ•°æ®çš„åŒæ­¥ã€‚
1ã€æ–¹æ¡ˆä¸€
æ–¹æ¡ˆå¼Šç«¯ï¼š
1ã€å¦‚æœæ¶ˆæ¯å‘é€æˆåŠŸï¼Œåœ¨æäº¤äº‹åŠ¡çš„æ—¶å€™JVMçªç„¶æŒ‚æ‰ï¼Œäº‹åŠ¡æ²¡æœ‰æˆåŠŸæäº¤ï¼Œå¯¼è‡´ä¸¤ä¸ªç³»ç»Ÿä¹‹é—´æ•°æ®ä¸ä¸€è‡´ã€‚
2ã€ç”±äºæ¶ˆæ¯æ˜¯åœ¨äº‹åŠ¡æäº¤ä¹‹å‰æäº¤ï¼Œå‘é€çš„æ¶ˆæ¯å†…å®¹æ˜¯è®¢å•å®ä½“çš„å†…å®¹ï¼Œä¼šé€ æˆåœ¨æ¶ˆè´¹ç«¯è¿›è¡Œæ¶ˆè´¹æ—¶å¦‚æœéœ€è¦å»éªŒè¯è®¢å•æ˜¯å¦å­˜åœ¨æ—¶å¯èƒ½å‡ºç°è®¢å•ä¸å­˜åœ¨ã€‚
3ã€æ¶ˆæ¯å‘é€å¯ä»¥è€ƒè™‘å¼‚æ­¥å‘é€ã€‚
æ–¹æ¡ˆäºŒï¼š
ç”±äºå­˜åœ¨ä¸Šè¿°é—®é¢˜ï¼Œåœ¨MQä¸æ”¯æŒäº‹åŠ¡æ¶ˆæ¯çš„å‰ææ¡ä»¶ä¸‹ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„æ–¹å¼è¿›è¡Œä¼˜åŒ–ã€‚
ç„¶ååœ¨æ§åˆ¶å™¨å±‚ï¼Œä½¿ç”¨å¼‚æ­¥å‘é€ï¼Œå°†æ¶ˆæ¯å‘é€ï¼Œå¹¶åœ¨æ¶ˆæ¯å‘é€æˆåŠŸåï¼Œæ›´æ–°å¾…å‘é€çŠ¶æ€ä¸ºå·²å‘é€ã€‚
ç„¶åé€šè¿‡å®šæ—¶ä»»åŠ¡ï¼Œæ‰«æå¾…å‘é€ï¼Œç»“åˆåˆ›å»ºæ—¶é—´çš„è®°å½•ï¼ˆå°äºå½“å‰æ—¶é—´5åˆ†é’Ÿçš„æ¶ˆæ¯å¾…å‘é€è®°å½•ï¼‰ï¼Œè¿›è¡Œæ¶ˆæ¯å‘é€ã€‚
æ–¹æ¡ˆå¼Šç«¯ï¼š
1ã€æ¶ˆæ¯æœ‰å¯èƒ½é‡å¤å‘é€ï¼Œä½†åœ¨æ¶ˆè´¹ç«¯å¯ä»¥é€šè¿‡å”¯ä¸€ä¸šåŠ¡ç¼–å·æ¥è¿›è¡Œå»é‡è®¾è®¡ã€‚
2ã€å®ç°è¿‡äºå¤æ‚ï¼Œä¸ºäº†é¿å… æç«¯æƒ…å†µä¸‹çš„æ¶ˆæ¯ä¸¢å¤±ï¼Œéœ€è¦ä½¿ç”¨å®šæ—¶ä»»åŠ¡ã€‚
æ–¹æ¡ˆä¸‰ï¼šåŸºäºRocketMQ4.3ç‰ˆæœ¬äº‹åŠ¡æ¶ˆæ¯
é¢å¤–éœ€è¦å®ç°äº‹åŠ¡ä¼šæŸ¥ç›‘å¬å™¨ï¼šTransactionListenerï¼Œå…¶å®ä¾‹ä»£ç ï¼š
1import org.apache.rocketmq.client.producer.LocalTransactionState; 2import org.apache.rocketmq.client.producer.TransactionListener; 3import org.apache.rocketmq.common.message.Message; 4import org.apache.rocketmq.common.message.MessageExt; 5import java.util.concurrent.ConcurrentHashMap; 6@SuppressWarnings(&#34;unused&#34;) 7public class OrderTransactionListenerImpl implements TransactionListener { 8 private ConcurrentHashMap&lt;String, Integer&gt; countHashMap = new ConcurrentHashMap&lt;&gt;(); 9 private final static int MAX_COUNT = 5; 10 @Override 11 public LocalTransactionState executeLocalTransaction(Message msg, Object arg) { 12 // 13 String bizUniNo = msg.getUserProperty(&#34;bizUniNo&#34;); // ä»æ¶ˆæ¯ä¸­è·å–ä¸šåŠ¡å”¯ä¸€IDã€‚ 14 // å°†bizUniNoå…¥åº“ï¼Œè¡¨åï¼št_message_transaction,è¡¨ç»“æ„ bizUniNo(ä¸»é”®),ä¸šåŠ¡ç±»å‹ã€‚ 15 return LocalTransactionState.</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/24/">é˜…è¯»æ›´å¤šå…³äºäºŒåå››ã€RocketMQäº‹åŠ¡æ¶ˆæ¯å®æˆ˜çš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/25/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåäº”ã€RocketMQå®æˆ˜ï¼šç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒautoCreateTopicEnableä¸ºä»€ä¹ˆä¸èƒ½è®¾ç½®ä¸ºtrue" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåäº”ã€RocketMQå®æˆ˜ï¼šç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒautoCreateTopicEnableä¸ºä»€ä¹ˆä¸èƒ½è®¾ç½®ä¸ºtrue" href="/docs/mq/rocketmq-advanced/25/">äºŒåäº”ã€RocketMQå®æˆ˜ï¼šç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒautoCreateTopicEnableä¸ºä»€ä¹ˆä¸èƒ½è®¾ç½®ä¸ºtrue</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æœ¬èŠ‚ç›®å½• 1ã€ ç°è±¡ï¼›
2ã€ æ€è€ƒï¼›
3ã€ åŸç†ï¼›
3.1 RocketMQåŸºæœ¬è·¯ç”±è§„åˆ™ 3.2 æ¢ç©¶autoCreateTopicEnableæœºåˆ¶ 3.2.1 é»˜è®¤Topicè·¯ç”±åˆ›å»ºæ—¶æœº 3.2.2 ç°è±¡åˆ†æ 1ã€ç°è±¡ å¾ˆå¤šç½‘å‹ä¼šé—®ï¼Œä¸ºä»€ä¹ˆæ˜æ˜é›†ç¾¤ä¸­æœ‰å¤šå°BrokeræœåŠ¡å™¨ï¼ŒautoCreateTopicEnableè®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºå¼€å¯Topicè‡ªåŠ¨åˆ›å»ºï¼Œä½†æ–°åˆ›å»ºçš„Topicçš„è·¯ç”±ä¿¡æ¯åªåŒ…å«åœ¨å…¶ä¸­ä¸€å°BrokeræœåŠ¡å™¨ä¸Šï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ
æœŸæœ›å€¼ï¼šä¸ºäº†æ¶ˆæ¯å‘é€çš„é«˜å¯ç”¨ï¼Œå¸Œæœ›æ–°åˆ›å»ºçš„Topicåœ¨é›†ç¾¤ä¸­çš„æ¯å°Brokerä¸Šåˆ›å»ºå¯¹åº”çš„é˜Ÿåˆ—ï¼Œé¿å…Brokerçš„å•èŠ‚ç‚¹æ•…éšœã€‚
ç°è±¡æˆªå›¾å¦‚ä¸‹ï¼š
æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè‡ªåŠ¨åˆ›å»ºçš„topicTest5çš„è·¯ç”±ä¿¡æ¯ï¼š
topicTest5åªåœ¨broker-aæœåŠ¡å™¨ä¸Šåˆ›å»ºäº†é˜Ÿåˆ—ï¼Œå¹¶æ²¡æœ‰åœ¨broker-bæœåŠ¡å™¨åˆ›å»ºé˜Ÿåˆ—ï¼Œä¸ç¬¦åˆæœŸæœ›ã€‚ é»˜è®¤è¯»å†™é˜Ÿåˆ—çš„ä¸ªæ•°ä¸º4ã€‚ æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹RocketMQé»˜è®¤topicçš„è·¯ç”±ä¿¡æ¯æˆªå›¾å¦‚ä¸‹ï¼š
ä»å›¾ä¸­å¯ä»¥é»˜è®¤Topicçš„è·¯ç”±ä¿¡æ¯ä¸ºbroker-aã€broker-bä¸Šå„8ä¸ªé˜Ÿåˆ—ã€‚
2ã€æ€è€ƒ å› åˆæ¬¡è®¿é—®ï¼Œä¸ºé˜²æ­¢çˆ¬è™«å’Œäººæœºè¯†åˆ«ï¼Œè¯·å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œå›å¤:â€˜éªŒè¯ç â€˜è·å–éªŒè¯ç æ¥è§£é”å…¨æ–‡ è§£é”å†…å®¹ é»˜è®¤Topicçš„è·¯ç”±ä¿¡æ¯æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Ÿ
1ã€ Topicçš„è·¯ç”±ä¿¡æ¯æ˜¯å­˜å‚¨åœ¨å“ªé‡Œï¼ŸNameserverï¼Ÿbroker?ï¼›
2ã€ RocketMQTopicé»˜è®¤é˜Ÿåˆ—ä¸ªæ•°æ˜¯å¤šå°‘å‘¢ï¼Ÿï¼›
3ã€åŸç† 3.1 RocketMQåŸºæœ¬è·¯ç”±è§„åˆ™ 1ã€ Brokeråœ¨å¯åŠ¨æ—¶å‘Nameserveræ³¨å†Œå­˜å‚¨åœ¨è¯¥æœåŠ¡å™¨ä¸Šçš„è·¯ç”±ä¿¡æ¯ï¼Œå¹¶æ¯éš”30så‘Nameserverå‘é€å¿ƒè·³åŒ…ï¼Œå¹¶æ›´æ–°è·¯ç”±ä¿¡æ¯ï¼›
2ã€ Nameserveræ¯éš”10sæ‰«æè·¯ç”±è¡¨ï¼Œå¦‚æœæ£€æµ‹åˆ°BrokeræœåŠ¡å®•æœºï¼Œåˆ™ç§»é™¤å¯¹åº”çš„è·¯ç”±ä¿¡æ¯ï¼›
3ã€ æ¶ˆæ¯ç”Ÿäº§è€…æ¯éš”30sä¼šä»Nameserveré‡æ–°æ‹‰å–Topicçš„è·¯ç”±ä¿¡æ¯å¹¶æ›´æ–°æœ¬åœ°è·¯ç”±è¡¨ï¼›åœ¨æ¶ˆæ¯å‘é€ä¹‹å‰ï¼Œå¦‚æœæœ¬åœ°è·¯ç”±è¡¨ä¸­ä¸å­˜åœ¨å¯¹åº”ä¸»é¢˜çš„è·¯ç”±æ¶ˆæ¯æ—¶ï¼Œä¼šä¸»åŠ¨å‘Nameserveræ‹‰å–è¯¥ä¸»é¢˜çš„æ¶ˆæ¯ï¼›
å›åˆ°æœ¬æ–‡çš„ä¸»é¢˜ï¼šautoCreateTopicEnableï¼Œå¼€å¯è‡ªåŠ¨åˆ›å»ºä¸»é¢˜ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœç”Ÿäº§è€…å‘ä¸€ä¸ªä¸å­˜åœ¨çš„ä¸»é¢˜å‘é€æ¶ˆæ¯æ—¶ï¼Œä¸Šé¢çš„ä»»ä½•ä¸€ä¸ªæ­¥éª¤éƒ½æ— æ³•è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„ä¸»é¢˜çš„è·¯ç”±ä¿¡æ¯ï¼Œé‚£è¯¥å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µå‘¢ï¼Ÿ
åœ¨RocketMQä¸­ï¼Œå¦‚æœautoCreateTopicEnableè®¾ç½®ä¸ºtrueï¼Œæ¶ˆæ¯å‘é€è€…å‘NameServeræŸ¥è¯¢ä¸»é¢˜çš„è·¯ç”±æ¶ˆæ¯è¿”å›ç©ºæ—¶ï¼Œä¼šå°è¯•ç”¨ä¸€ä¸ªç³»ç»Ÿé»˜è®¤çš„ä¸»é¢˜åç§°(MixAll.AUTO_CREATE_TOPIC_KEY_TOPIC)ï¼Œæ­¤æ—¶æ¶ˆæ¯å‘é€è€…å¾—åˆ°çš„è·¯ç”±ä¿¡æ¯ä¸ºï¼š
ä½†é—®é¢˜å°±æ¥äº†ï¼Œé»˜è®¤Topicåœ¨é›†ç¾¤çš„æ¯ä¸€å°Brokerä¸Šåˆ›å»º8ä¸ªé˜Ÿåˆ—ï¼Œé‚£é—®é¢˜æ¥äº†ï¼Œä¸ºå•¥æ–°åˆ›å»ºçš„Topicåªåœ¨ä¸€ä¸ªBrokerä¸Šåˆ›å»º4ä¸ªé˜Ÿåˆ—ï¼Ÿ
3.2 æ¢ç©¶autoCreateTopicEnableæœºåˆ¶ 3.2.1 é»˜è®¤Topicè·¯ç”±åˆ›å»ºæ—¶æœº æ¸©é¦¨æç¤ºï¼šæœ¬æ–‡ä¸ä¼šè¯¦ç»†è·Ÿè¸ªæ•´ä¸ªåˆ›å»ºè¿‡ç¨‹ï¼Œåªä¼šç‚¹å‡ºæºç çš„å…³é”®å…¥å£ç‚¹ï¼Œå¦‚æƒ³è¯¦ç»†äº†è§£NameServerè·¯ç”±æ¶ˆæ¯ã€æ¶ˆæ¯å‘é€é«˜å¯ç”¨çš„å®ç°åŸç†ï¼Œå»ºè®®æŸ¥é˜…ç¬”è€…çš„ä¹¦ç±ã€ŠRocketMQæŠ€æœ¯å†…å¹•ã€‹ç¬¬äºŒã€ä¸‰ç« ã€‚
Step1ï¼šåœ¨Brokerå¯åŠ¨æµç¨‹ä¸­ï¼Œä¼šæ„å»ºTopicConfigManagerå¯¹è±¡ï¼Œå…¶æ„é€ æ–¹æ³•ä¸­é¦–å…ˆä¼šåˆ¤æ–­æ˜¯å¦å¼€å¯äº†å…è®¸è‡ªåŠ¨åˆ›å»ºä¸»é¢˜ï¼Œå¦‚æœå¯ç”¨äº†è‡ªåŠ¨åˆ›å»ºä¸»é¢˜ï¼Œåˆ™å‘topicConfigTableä¸­æ·»åŠ é»˜è®¤ä¸»é¢˜çš„è·¯ç”±ä¿¡æ¯ã€‚
TopicConfigManageræ„é€ æ–¹æ³•
å¤‡æ³¨ï¼šè¯¥topicConfigTableä¸­æ‰€æœ‰çš„è·¯ç”±ä¿¡æ¯ï¼Œä¼šéšç€Brokerå‘Nameserverå‘é€å¿ƒè·³åŒ…ä¸­ï¼ŒNameserveræ”¶åˆ°è¿™äº›ä¿¡æ¯åï¼Œæ›´æ–°å¯¹åº”Topicçš„è·¯ç”±ä¿¡æ¯è¡¨ã€‚
BrokerConfigçš„defaultTopicQueueNumé»˜è®¤ä¸º8ã€‚ä¸¤å°BrokeræœåŠ¡å™¨éƒ½ä¼šè¿è¡Œä¸Šé¢çš„è¿‡ç¨‹ï¼Œæ•…æœ€ç»ˆNameserverä¸­å…³äºé»˜è®¤ä¸»é¢˜çš„è·¯ç”±ä¿¡æ¯ä¸­ï¼Œä¼šåŒ…å«ä¸¤ä¸ªBrokeråˆ†åˆ«å„8ä¸ªé˜Ÿåˆ—ä¿¡æ¯ã€‚
Step2ï¼šç”Ÿäº§è€…å¯»æ‰¾è·¯ç”±ä¿¡æ¯
ç”Ÿäº§è€…é¦–å…ˆå‘NameServeræŸ¥è¯¢è·¯ç”±ä¿¡æ¯ï¼Œç”±äºæ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„ä¸»é¢˜ï¼Œæ•…æ­¤æ—¶è¿”å›çš„è·¯ç”±ä¿¡æ¯ä¸ºç©ºï¼ŒRocketMQä¼šä½¿ç”¨é»˜è®¤çš„ä¸»é¢˜å†æ¬¡å¯»æ‰¾ï¼Œç”±äºå¼€å¯äº†è‡ªåŠ¨åˆ›å»ºè·¯ç”±ä¿¡æ¯ï¼ŒNameServerä¼šå‘ç”Ÿäº§è€…è¿”å›é»˜è®¤ä¸»é¢˜çš„è·¯ç”±ä¿¡æ¯ã€‚ç„¶åä»è¿”å›çš„è·¯ç”±ä¿¡æ¯ä¸­é€‰æ‹©ä¸€ä¸ªé˜Ÿåˆ—ï¼ˆé»˜è®¤è½®è¯¢ï¼‰ã€‚æ¶ˆæ¯å‘é€è€…ä»Nameserverè·å–åˆ°é»˜è®¤çš„Topicçš„é˜Ÿåˆ—ä¿¡æ¯åï¼Œé˜Ÿåˆ—çš„ä¸ªæ•°ä¼šæ”¹å˜å—ï¼Ÿç­”æ¡ˆæ˜¯ä¼šçš„ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š
MQClientInstance#updateTopicRouteInfoFromNameServer
æ¸©é¦¨æç¤ºï¼šæ¶ˆæ¯å‘é€è€…åœ¨åˆ°é»˜è®¤è·¯ç”±ä¿¡æ¯æ—¶ï¼Œå…¶é˜Ÿåˆ—æ•°é‡ï¼Œä¼šé€‰æ‹©DefaultMQProducer#defaultTopicQueueNumsä¸Nameserverè¿”å›çš„çš„é˜Ÿåˆ—æ•°å–æœ€å°å€¼ï¼ŒDefaultMQProducer#defaultTopicQueueNumsé»˜è®¤å€¼ä¸º4ï¼Œæ•…è‡ªåŠ¨åˆ›å»ºçš„ä¸»é¢˜ï¼Œå…¶é˜Ÿåˆ—æ•°é‡é»˜è®¤ä¸º4ã€‚
Step3ï¼šå‘é€æ¶ˆæ¯
DefaultMQProducerImpl#sendKernelImpl
åœ¨æ¶ˆæ¯å‘é€æ—¶çš„è¯·æ±‚æŠ¥æ–‡ä¸­ï¼Œè®¾ç½®é»˜è®¤topicåç§°ï¼Œæ¶ˆæ¯å‘é€topicåç§°ï¼Œä½¿ç”¨çš„é˜Ÿåˆ—æ•°é‡ä¸ºDefaultMQProducer#defaultTopicQueueNumsï¼Œå³é»˜è®¤ä¸º4ã€‚
Step4ï¼šBrokerç«¯æ”¶åˆ°æ¶ˆæ¯åçš„å¤„ç†æµç¨‹
æœåŠ¡ç«¯æ”¶åˆ°æ¶ˆæ¯å‘é€çš„å¤„ç†å™¨ä¸ºï¼šSendMessageProcessorï¼Œåœ¨å¤„ç†æ¶ˆæ¯å‘é€æ—¶ï¼Œä¼šè°ƒç”¨super.msgCheckæ–¹æ³•ï¼š
AbstractSendMessageProcessor#msgCheck
åœ¨Brokerç«¯ï¼Œé¦–å…ˆä¼šä½¿ç”¨TopicConfigManageræ ¹æ®topicæŸ¥è¯¢è·¯ç”±ä¿¡æ¯ï¼Œå¦‚æœBrokerç«¯ä¸å­˜åœ¨è¯¥ä¸»é¢˜çš„è·¯ç”±é…ç½®(è·¯ç”±ä¿¡æ¯),æ­¤æ—¶å¦‚æœBrokerä¸­å­˜åœ¨é»˜è®¤ä¸»é¢˜çš„è·¯ç”±é…ç½®ä¿¡æ¯ï¼Œåˆ™æ ¹æ®æ¶ˆæ¯å‘é€è¯·æ±‚ä¸­çš„é˜Ÿåˆ—æ•°é‡ï¼Œåœ¨Brokeråˆ›å»ºæ–°Topicçš„è·¯ç”±ä¿¡æ¯ã€‚è¿™æ ·BrokeræœåŠ¡ç«¯å°±ä¼šå­˜åœ¨ä¸»é¢˜çš„è·¯ç”±ä¿¡æ¯ã€‚
åœ¨Brokerç«¯çš„topicé…ç½®ç®¡ç†å™¨ä¸­å­˜åœ¨çš„è·¯ç”±ä¿¡æ¯ï¼Œä¸€ä¼šå‘Nameserverå‘é€å¿ƒè·³åŒ…ï¼Œæ±‡æŠ¥åˆ°Nameserverï¼Œå¦ä¸€æ–¹é¢ä¼šæœ‰ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶å­˜å‚¨åœ¨brokerç«¯ï¼Œå…·ä½“è·¯å¾„ä¸º${ROCKET_HOME}/store/config/topics.jsonä¸­ï¼Œè¿™æ ·åœ¨Brokerå…³é—­åå†é‡å¯ï¼Œå¹¶ä¸ä¼šä¸¢å¤±è·¯ç”±ä¿¡æ¯ã€‚
å¹¿å¤§è¯»è€…æœ‹å‹ï¼Œè·Ÿè¸ªåˆ°è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œå¤§å®¶åº”è¯¥å¯¹å¯ç”¨è‡ªåŠ¨åˆ›å»ºä¸»é¢˜æœºåˆ¶æ—¶ï¼Œæ–°ä¸»é¢˜æ˜¯çš„è·¯ç”±ä¿¡æ¯æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œç»™å‡ºåˆ›å»ºä¸»é¢˜åºåˆ—å›¾ï¼š
3.2.2 ç°è±¡åˆ†æ ç»è¿‡ä¸Šé¢è‡ªåŠ¨åˆ›å»ºè·¯ç”±æœºåˆ¶çš„åˆ›å»ºæµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒå®¹æ˜“çš„åˆ†æå¾—å‡ºå¦‚ä¸‹ç»“è®ºï¼š</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/25/">é˜…è¯»æ›´å¤šå…³äºäºŒåäº”ã€RocketMQå®æˆ˜ï¼šç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒautoCreateTopicEnableä¸ºä»€ä¹ˆä¸èƒ½è®¾ç½®ä¸ºtrueçš„å†…å®¹ã€‚</a></div></div></div></div><div class="mb-3 mb-lg-4"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">2 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/mq/rocketmq-advanced/21/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="äºŒåä¸€ã€RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸Šç¯‡" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="äºŒåä¸€ã€RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸Šç¯‡" href="/docs/mq/rocketmq-advanced/21/">äºŒåä¸€ã€RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸Šç¯‡</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">æ¶ˆæ¯é˜Ÿåˆ—</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/rocketmq/">RocketMQ</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æ ¹æ®ä¸ŠèŠ‚Demoç¤ºä¾‹ï¼Œå‘é€äº‹åŠ¡æ¶ˆæ¯çš„å…¥å£ä¸ºï¼šTransactionMQProducer#sendMessageInTransactionï¼š
1public TransactionSendResult sendMessageInTransaction(final Message msg, final Object arg) throws MQClientException { 2 if (null == this.transactionListener) { // @1 3 throw new MQClientException(&#34;TransactionListener is null&#34;, null); 4 } 5 return this.defaultMQProducerImpl.sendMessageInTransaction(msg, transactionListener, arg); // @2 6 } ä»£ç @1ï¼šå¦‚æœtransactionListenerä¸ºç©ºï¼Œåˆ™ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚
ä»£ç @2ï¼šè°ƒç”¨defaultMQProducerImplçš„sendMessageInTransactionæ–¹æ³•ã€‚
DefaultMQProducerImpl#sendMessageInTransaction
1public TransactionSendResult sendMessageInTransaction(final Message msg, 2 final TransactionListener tranExecuter, final Object arg) throws MQClientException { Step1ï¼šé¦–å…ˆå…ˆé˜è¿°ä¸€ä¸‹å‚æ•°å«ä¹‰ã€‚final Message msgï¼šæ¶ˆæ¯ï¼›TransactionListener tranExecuterï¼šäº‹åŠ¡ç›‘å¬å™¨ï¼› Object argï¼šå…¶ä»–é™„åŠ å‚æ•°ï¼Œè¯¥å‚æ•°ä¼šå†TransactionListener å›è°ƒå‡½æ•°ä¸­åŸå€¼ä¼ å…¥ã€‚
DefaultMQProducerImpl#sendMessageInTransaction
1SendResult sendResult = null; 2MessageAccessor.putProperty(msg, MessageConst.</div><div class="mt-2"><a class="text-secondary" href="/docs/mq/rocketmq-advanced/21/">é˜…è¯»æ›´å¤šå…³äºäºŒåä¸€ã€RocketMQæºç åˆ†æä¹‹RocketMQäº‹åŠ¡æ¶ˆæ¯å®ç°åŸç†ä¸Šç¯‡çš„å†…å®¹ã€‚</a></div></div></div></div></div><nav class="hb-blog-pagination mb-3" aria-label="Page navigation"><ul class="pagination flex-wrap justify-content-center"><li class="page-item disabled"><a class="page-link" href="" aria-label="å‰ä¸€é¡µ"><span aria-hidden="true">Â«</span></a></li><li class="page-item active"><a class="page-link" href="/series/rocketmq/">1</a></li><li class="page-item"><a class="page-link" href="/series/rocketmq/page/2/">2</a></li><li class="page-item"><a class="page-link" href="/series/rocketmq/page/3/">3</a></li><li class="page-item"><a class="page-link" href="/series/rocketmq/page/2/" aria-label="ä¸‹ä¸€é¡µ"><span aria-hidden="true">Â»</span></a></li></ul></nav></div><div class="hb-blog-sidebar pe-lg-1"><div class="hb-blog-sidebar-profile hb-module d-flex flex-column justify-content-center align-items-center"><picture><source srcset="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_c6864c8867b5b1d8c1d896794c52a337.webp" type="image/webp"/><img class="hb-blog-sidebar-profile-img rounded-circle img-fluid mb-3" src="https://www.hotmindshare.com/images/logo_hu3f5eb531558986e612421c7146e04118_941594_100x0_resize_box_3.b5418e6eba234f774b07e8ca647386b9.png" alt="" loading="lazy" height="100" width="100"/></picture><p class="hb-blog-sidebar-profile-title text-center h5 mb-2">ç¨‹åºå‘˜å®‰ä»”</p><p class="hb-blog-sidebar-profile-desc text-center mb-2">ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº</p><p class="hb-blog-sidebar-profile-meta mb-0"></p><div class="hb-footer-socials d-flex mb-0 mt-1 justify-content-center"><a class="hb-social p-2" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg></a><a class="hb-social p-2" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:%!s(bool=true)" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="hb-social p-2" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></a><a class="hb-social p-2" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="çŸ¥ä¹"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:#056de8" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg></a></div></div><div style="padding-bottom:1px"><nav style="margin-bottom:1px;display:flex;flex-direction:column"><div style="float:left;text-align:center!important"><img style="width:110apx;height:110px" src="https://cdn.hotmindshare.com/public%2Fmy_QR_Code.jpg" alt="å…³æ³¨æˆ‘ä»¬" title="å…³æ³¨å…¬ä¼—å·"/></div><p style="font-size:11px;float:left;margin-top:8px;text-align:center!important"><span style="line-height:1.8"><span style="rgb(161,182,226)89color:); font-size: 15px; letter-spacing: 3px; line-height: 0">å…³æ³¨å¾®ä¿¡å…¬ä¼—å·</span><br/><span style="rgb(161,182,226)89color:); font-weight: 300; line-height: 1; font-size: 14px"><b>è·å–æ›´å¤šæŠ€æœ¯å¹²è´§å’Œèµ„æ–™</b><br/></span><br/></span></p></nav></div><div class="hb-blog-sidebar-posts hb-module"><ul class="nav nav-pills nav-fill" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="recent-posts-tab" data-bs-toggle="tab" data-bs-target="#recent-posts" type="button" role="tab" aria-controls="recent-posts" aria-selected="true">
æœ€è¿‘æ–‡ç« </button></li></ul><div class="tab-content mt-2"><div class="tab-pane slide active" id="recent-posts" role="tabpanel" aria-labelledby="recent-posts-tab" tabindex="0"><div class="slide"><div class="slide-inner row row-cols-1"><div class="slide-item px-0"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 bg-transparent mb-0"><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/blog/2023/12/20231229_10_reasons_to_learn_spring_boot_in_2024/"><picture><source srcset="/images/covers/20231229_10_reasons_to_learn_spring_boot_in_2024_huadb82ac6e42be1033d2bfdc1b1e34746_29915_900x500_resize_q75_h2_box_3.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/covers/20231229_10_reasons_to_learn_spring_boot_in_2024.46b0435dee9d577bf67bac590b07aa73.png" alt="2024å¹´10ä¸ªå€¼å¾—ç»§ç»­å­¦ä¹ Sprint Bootçš„ç†ç”±" loading="lazy" height="500" width="900"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="2024å¹´10ä¸ªå€¼å¾—ç»§ç»­å­¦ä¹ Sprint Bootçš„ç†ç”±" href="/blog/2023/12/20231229_10_reasons_to_learn_spring_boot_in_2024/"><span class="text-danger"><svg aria-hidden="true" class="bi bi-pinbi bi-pin hi-svg-inline me-1" fill="currentcolor" height=".85em" viewBox="0 0 16 16" width=".85em" xmlns="http://www.w3.org/2000/svg"><path d="M4.146.146A.5.5.0 014.5.0h7a.5.5.0 01.5.5c0 .68-.342 1.174-.646 1.479-.126.125-.25.224-.354.298v4.431l.078.048c.203.127.476.314.751.555C12.36 7.775 13 8.527 13 9.5a.5.5.0 01-.5.5h-4v4.5c0 .276-.224 1.5-.5 1.5s-.5-1.224-.5-1.5V10h-4A.5.5.0 013 9.5c0-.973.64-1.725 1.17-2.189A5.921 5.921.0 015 6.708V2.277a2.77 2.77.0 01-.354-.298C4.342 1.674 4 1.179 4 .5a.5.5.0 01.146-.354zm1.58 1.408-.002-.001.002.001m-.002-.001.002.001A.5.5.0 016 2v5a.5.5.0 01-.276.447h-.002l-.012.007-.054.03a4.922 4.922.0 00-.827.58c-.318.278-.585.596-.725.936h7.792c-.14-.34-.407-.658-.725-.936a4.915 4.915.0 00-.881-.61l-.012-.006h-.002A.5.5.0 0110 7V2a.5.5.0 01.295-.458 1.775 1.775.0 00.351-.271c.08-.08.155-.17.214-.271H5.14c.06.1.133.191.214.271a1.78 1.78.0 00.37.282"></path></svg></span>2024å¹´10ä¸ªå€¼å¾—ç»§ç»­å­¦ä¹ Sprint Bootçš„ç†ç”±</a></div></div></div></div><div class="slide-item px-0"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 bg-transparent mb-0"><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/java/concurrency_guide/9/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="9.ç®¡ç¨‹ï¼šå¹¶å‘ç¼–ç¨‹çš„ä¸‡èƒ½é’¥åŒ™" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="9.ç®¡ç¨‹ï¼šå¹¶å‘ç¼–ç¨‹çš„ä¸‡èƒ½é’¥åŒ™" href="/docs/java/concurrency_guide/9/">9.ç®¡ç¨‹ï¼šå¹¶å‘ç¼–ç¨‹çš„ä¸‡èƒ½é’¥åŒ™</a></div></div></div></div><div class="slide-item px-0"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 bg-transparent mb-0"><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/java/concurrency_guide/8/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="8.å®‰å…¨æ€§ã€æ´»è·ƒæ€§ä»¥åŠæ€§èƒ½é—®é¢˜" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="8.å®‰å…¨æ€§ã€æ´»è·ƒæ€§ä»¥åŠæ€§èƒ½é—®é¢˜" href="/docs/java/concurrency_guide/8/">8.å®‰å…¨æ€§ã€æ´»è·ƒæ€§ä»¥åŠæ€§èƒ½é—®é¢˜</a></div></div></div></div><div class="slide-item px-0"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 bg-transparent mb-0"><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/java/concurrency_guide/7/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="7.ç”¨&#39;ç­‰å¾…-é€šçŸ¥&#39;æœºåˆ¶ä¼˜åŒ–å¾ªç¯ç­‰å¾…" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="7.ç”¨&#39;ç­‰å¾…-é€šçŸ¥&#39;æœºåˆ¶ä¼˜åŒ–å¾ªç¯ç­‰å¾…" href="/docs/java/concurrency_guide/7/">7.ç”¨&#39;ç­‰å¾…-é€šçŸ¥&#39;æœºåˆ¶ä¼˜åŒ–å¾ªç¯ç­‰å¾…</a></div></div></div></div><div class="slide-item px-0"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 bg-transparent mb-0"><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/java/concurrency_guide/6/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="6.ä¸€ä¸å°å¿ƒå°±æ­»é”äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="6.ä¸€ä¸å°å¿ƒå°±æ­»é”äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ" href="/docs/java/concurrency_guide/6/">6.ä¸€ä¸å°å¿ƒå°±æ­»é”äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ</a></div></div></div></div></div><button class="slide-control-left">
<svg aria-hidden="true" class="bi bi-arrow-left-circlebi bi-arrow-left-circle hi-svg-inline slide-control-left-icon" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 8a7 7 0 1014 0A7 7 0 001 8m15 0A8 8 0 110 8a8 8 0 0116 0m-4.5-.5a.5.5.0 010 1H5.707l2.147 2.146a.5.5.0 01-.708.708l-3-3a.5.5.0 010-.708l3-3a.5.5.0 11.708.708L5.707 7.5z"></path></svg><span class="visually-hidden">å‘å·¦</span>
</button>
<button class="slide-control-right">
<svg aria-hidden="true" class="bi bi-arrow-right-circlebi bi-arrow-right-circle hi-svg-inline slide-control-right-icon" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1 8a7 7 0 1014 0A7 7 0 001 8m15 0A8 8 0 110 8a8 8 0 0116 0M4.5 7.5a.5.5.0 000 1h5.793l-2.147 2.146a.5.5.0 00.708.708l3-3a.5.5.0 000-.708l-3-3a.5.5.0 10-.708.708L10.293 7.5z"></path></svg><span class="visually-hidden">å‘å³</span></button></div></div></div></div><div class="hb-blog-sidebar-taxonomies hb-module"><ul class="nav nav-pills nav-justified mb-2" role="tablist"><li class="nav-item" role="presentation"><button class="nav-link active" id="taxonomy-authors-tab" data-bs-toggle="tab" data-bs-target="#taxonomy-authors-tab-pane" type="button" role="tab" aria-controls="taxonomy-authors-tab-pane" aria-selected="true">ä½œè€…</button></li><li class="nav-item" role="presentation"><button class="nav-link" id="taxonomy-categories-tab" data-bs-toggle="tab" data-bs-target="#taxonomy-categories-tab-pane" type="button" role="tab" aria-controls="taxonomy-categories-tab-pane" aria-selected="false">åˆ†ç±»</button></li><li class="nav-item" role="presentation"><button class="nav-link" id="taxonomy-series-tab" data-bs-toggle="tab" data-bs-target="#taxonomy-series-tab-pane" type="button" role="tab" aria-controls="taxonomy-series-tab-pane" aria-selected="false">ä¸“æ </button></li><li class="nav-item" role="presentation"><button class="nav-link" id="taxonomy-tags-tab" data-bs-toggle="tab" data-bs-target="#taxonomy-tags-tab-pane" type="button" role="tab" aria-controls="taxonomy-tags-tab-pane" aria-selected="false">æ ‡ç­¾</button></li></ul><div class="tab-content"><div class="tab-pane fade show active" id="taxonomy-authors-tab-pane" role="tabpanel" aria-labelledby="taxonomy-authors-tab" tabindex="0"><a class="taxonomy-term taxonomy-term-authors btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/authors/andywu/"><span class="taxonomy-term-title">å®‰å›¾æ–°</span>
<small class="taxonomy-term-count border rounded px-1">1184</small></a></div><div class="tab-pane fade" id="taxonomy-categories-tab-pane" role="tabpanel" aria-labelledby="taxonomy-categories-tab" tabindex="0"><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/hbase/"><span class="taxonomy-term-title">HBase</span>
<small class="taxonomy-term-count border rounded px-1">195</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/java/"><span class="taxonomy-term-title">Java</span>
<small class="taxonomy-term-count border rounded px-1">155</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="taxonomy-term-title">æ•°æ®åº“</span>
<small class="taxonomy-term-count border rounded px-1">126</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/"><span class="taxonomy-term-title">äº‘åŸç”Ÿ</span>
<small class="taxonomy-term-count border rounded px-1">94</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="taxonomy-term-title">å…³ç³»å‹æ•°æ®åº“</span>
<small class="taxonomy-term-count border rounded px-1">76</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/jfinal/"><span class="taxonomy-term-title">JFinal</span>
<small class="taxonomy-term-count border rounded px-1">70</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/devops/"><span class="taxonomy-term-title">DevOps</span>
<small class="taxonomy-term-count border rounded px-1">64</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/%E8%BF%90%E7%BB%B4/"><span class="taxonomy-term-title">è¿ç»´</span>
<small class="taxonomy-term-count border rounded px-1">64</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"><span class="taxonomy-term-title">æ¶ˆæ¯é˜Ÿåˆ—</span>
<small class="taxonomy-term-count border rounded px-1">61</small>
</a><a class="taxonomy-term taxonomy-term-categories btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/categories/gradle/"><span class="taxonomy-term-title">Gradle</span>
<small class="taxonomy-term-count border rounded px-1">56</small></a></div><div class="tab-pane fade" id="taxonomy-series-tab-pane" role="tabpanel" aria-labelledby="taxonomy-series-tab" tabindex="0"><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/java%E7%89%B9%E4%BE%9B/"><span class="taxonomy-term-title">Javaç‰¹ä¾›</span>
<small class="taxonomy-term-count border rounded px-1">290</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/hbase/"><span class="taxonomy-term-title">HBase</span>
<small class="taxonomy-term-count border rounded px-1">195</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/"><span class="taxonomy-term-title">å¤§æ•°æ®</span>
<small class="taxonomy-term-count border rounded px-1">195</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/"><span class="taxonomy-term-title">åŸºç¡€æ•™ç¨‹</span>
<small class="taxonomy-term-count border rounded px-1">143</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/jfinal/"><span class="taxonomy-term-title">JFinal</span>
<small class="taxonomy-term-count border rounded px-1">70</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B/"><span class="taxonomy-term-title">è¿›é˜¶æ•™ç¨‹</span>
<small class="taxonomy-term-count border rounded px-1">57</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/gradle/"><span class="taxonomy-term-title">Gradle</span>
<small class="taxonomy-term-count border rounded px-1">56</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/mongodb/"><span class="taxonomy-term-title">MongoDB</span>
<small class="taxonomy-term-count border rounded px-1">50</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"><span class="taxonomy-term-title">ç¼–ç¨‹è¯­è¨€</span>
<small class="taxonomy-term-count border rounded px-1">46</small>
</a><a class="taxonomy-term taxonomy-term-series btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/series/scala/"><span class="taxonomy-term-title">Scala</span>
<small class="taxonomy-term-count border rounded px-1">43</small></a></div><div class="tab-pane fade" id="taxonomy-tags-tab-pane" role="tabpanel" aria-labelledby="taxonomy-tags-tab" tabindex="0"><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/java/"><span class="taxonomy-term-title">Java</span>
<small class="taxonomy-term-count border rounded px-1">35</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"><span class="taxonomy-term-title">é¢è¯•é¢˜</span>
<small class="taxonomy-term-count border rounded px-1">33</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"><span class="taxonomy-term-title">å¹¶å‘ç¼–ç¨‹</span>
<small class="taxonomy-term-count border rounded px-1">20</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/git/"><span class="taxonomy-term-title">Git</span>
<small class="taxonomy-term-count border rounded px-1">2</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/jvm/"><span class="taxonomy-term-title">JVM</span>
<small class="taxonomy-term-count border rounded px-1">2</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/ai/"><span class="taxonomy-term-title">AI</span>
<small class="taxonomy-term-count border rounded px-1">1</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/dubbo/"><span class="taxonomy-term-title">Dubbo</span>
<small class="taxonomy-term-count border rounded px-1">1</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/elasticsearch/"><span class="taxonomy-term-title">ElasticSearch</span>
<small class="taxonomy-term-count border rounded px-1">1</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/hadoop/"><span class="taxonomy-term-title">Hadoop</span>
<small class="taxonomy-term-count border rounded px-1">1</small>
</a><a class="taxonomy-term taxonomy-term-tags btn btn-sm btn-outline-secondary p-1 me-1 mb-1" href="/tags/intellij-idea/"><span class="taxonomy-term-title">IntelliJ IDEA</span>
<small class="taxonomy-term-count border rounded px-1">1</small></a></div></div></div></div></div></div><footer class="hb-footer pt-4 pt-md-5 pb-2 pb-md-3 bg-body-tertiary"><div class="container-fluid container-lg px-4 px-md-3"><div class="row"><div class="hb-footer-site-info col mb-2 text-center"><div class="h5">ç¨‹åºå‘˜å®‰ä»”</div><ul class="list-unstyled small mb-2"><li class="mt-2">ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº</li><li class="mt-2">ç²¤ICPå¤‡2023148789å·</li></ul><div class="hb-footer-socials d-flex mb-2 justify-content-center flex-wrap"><a class="hb-social p-2" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg></a><a class="hb-social p-2" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:%!s(bool=true)" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="hb-social p-2" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></a><a class="hb-social p-2" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="çŸ¥ä¹"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:#056de8" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg></a></div></div></div></div></footer><script src="/js/hb.19ff2dd5085ae395c8501e5aef2fbcc49e7612473405d8eb7352b40a406e9daf.js" integrity="sha256-Gf8t1Qha45XIUB5a7y+8xJ52Ekc0Bdjrc1K0CkBuna8=" defer=""></script><script src="/js/search.60c6325701a1a087903f75b2304b1bb0ff0572506d58f09d2f9ce6c41cc85908.js" defer=""></script><script>"serviceWorker"in navigator&&window.addEventListener("DOMContentLoaded",function(){navigator.serviceWorker.register("/sw.js")})</script></body></html>