<!DOCTYPE html><html data-bs-theme="light" itemscope="" itemtype="http://schema.org/WebPage" lang="zh-hans"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="manifest" href="https://www.hotmindshare.com/manifest.webmanifest"/><link rel="alternate" type="application/rss+xml" href="https://www.hotmindshare.com/archives/2023/10/index.xml"/><meta name="description" content="十月"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_16x16_resize_box_3.png" sizes="16x16" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_32x32_resize_box_3.png" sizes="32x32" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_150x150_resize_box_3.png" sizes="150x150" type="image/png"/><link rel="apple-touch-icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_180x180_resize_box_3.png" sizes="180x180" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_192x192_resize_box_3.png" sizes="192x192" type="image/png"/><link rel="mask-icon" href="/mask-icon.svg" color="#000000"/><meta property="og:title" content="十月"/><meta property="og:description" content="一个只爱折腾技术的普通人"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.hotmindshare.com/archives/2023/10/"/><meta itemprop="name" content="十月"/><meta itemprop="description" content="一个只爱折腾技术的普通人"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="十月"/><meta name="twitter:description" content="一个只爱折腾技术的普通人"/><title>十月 - 4/34 - 2023 - 归档 - 程序员安仔</title>
<link href="/css/hb.408ff1b05748c6401c480d1446d8eb0cc4b9dc735b35c321ba83834b26ee29cc.css" rel="stylesheet"/><script src="/js/init.577d4e90bff5601d5756fcf799b0e53568bf56cea3b80fe43f66c9d365e8100c.js" integrity="sha256-V31OkL/1YB1XVvz3mbDlNWi/Vs6juA/kP2bJ02XoEAw="></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?1cbf85f7bc76266af7bdac71374879bf",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel="stylesheet" href="/css/search.ee67fb063f2e4be8eff1be9d9806279c3c3d43570b6266c759281faac3804b11.css"/></head><body><noscript><div class="alert alert-danger text-center rounded-0" role=alert><svg aria-hidden="true" class="bi bi-exclamation-square-fillbi bi-exclamation-square-fill hi-svg-inline me-2" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm6 4c.535.0.954.462.9.995l-.35 3.507a.552.552.0 01-1.1.0L7.1 4.995A.905.905.0 018 4m.002 6a1 1 0 110 2 1 1 0 010-2"/></svg>你的浏览器不支持 JavaScript。</div></noscript><header class="hb-header"><nav class="hb-header-nav navbar navbar-expand-lg"><div class="container-fluid"><a class="navbar-brand d-flex align-items-center" href="/"><img src="https://www.hotmindshare.com/images/logo_hu3f5eb531558986e612421c7146e04118_941594_0x64_resize_box_3.png" alt="Logo" width="64" height="64" class="hb-header-logo d-inline-block align-text-top me-2"/>程序员安仔</a><div class="d-flex order-5"><div class="search-modal-toggle hb-header-search-form position-relative d-flex ms-lg-1"><button type="button" class="hb-header-search-icon border-0 bg-transparent px-2" aria-label="Toggle search">
<svg aria-hidden="true" class="bi bi-searchbi bi-search hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1.007 1.007.0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"></path></svg></button>
<input class="form-control rounded-5 d-none d-lg-block ms-lg-1" id="hb-header-search-input" placeholder="搜索"/>
<span class="hb-header-search-keys position-absolute d-none d-lg-block"><kbd>CTRL</kbd>
<kbd>K</kbd></span></div><button class="navbar-toggler border-0 shadow-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#hb-header-content" aria-controls="hb-header-content" aria-label="Toggle navigation"><svg aria-hidden="true" class="bi bi-three-dotsbi bi-three-dots hi-svg-inline" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></button></div><div class="offcanvas offcanvas-lg offcanvas-end" tabindex="-1" id="hb-header-content" aria-labelledby="hb-header-content-label"><div class="offcanvas-header"><h5 class="offcanvas-title" id="hb-header-content-label">程序员安仔</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button></div><div class="offcanvas-body"><ul class="hb-header-menus navbar-nav flex-row flex-wrap"><li class="hb-header-menu nav-item col-6 col-lg-auto"><a class="nav-link" href="https://www.hotmindshare.com/docs/"><svg aria-hidden="true" class="bi bi-bookbi bi-book hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5.0 000 2.5v11a.5.5.0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5.0 00.78.0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5.0 0016 13.5v-11a.5.5.0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"></path></svg>系列教程</a></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto active"><a class="nav-link pe-0 d-inline-flex align-items-center active" href="/blog/" aria-current="page"><svg aria-hidden="true" class="hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M192 32c0 17.7 14.3 32 32 32 123.7.0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1.0 224 0c-17.7.0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32 70.7.0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7.0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5.0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144H128v96h16c26.5.0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48V144z"></path></svg>博客</a>
<a class="nav-link ps-0 d-inline-flex" href="#" id="header-menu-blog" role="button" data-bs-toggle="dropdown" aria-expanded="false"><span class="visually-hidden">Toggle Dropdown</span><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67z"></path></svg></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby="header-menu-blog" data-bs-popper="none"><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/series/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-columnsbi bi-columns hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v12a1 1 0 01-1 1H1a1 1 0 01-1-1zm8.5.0v8H15V2zm0 9v3H15v-3zm-1-9H1v3h6.5zM1 14h6.5V6H1z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">专栏</div><p class="dropdown-item-desc mb-0 text-wrap">所有专栏。</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/authors/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-pencilbi bi-pencil hi-svg-inline" fill="currentcolor" height="2em" style="color:#0f5e97" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M12.146.146a.5.5.0 01.708.0l3 3a.5.5.0 010 .708l-10 10a.5.5.0 01-.168.11l-5 2a.5.5.0 01-.65-.65l2-5a.5.5.0 01.11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5.0 01.5.5v.5h.5a.5.5.0 01.5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5.0 015 12.5V12h-.5a.5.5.0 01-.5-.5V11h-.5a.5.5.0 01-.468-.325z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">作者</div><p class="dropdown-item-desc mb-0 text-wrap">作者列表。</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/categories/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-folderbi bi-folder hi-svg-inline" fill="currentcolor" height="2em" style="color:orange" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M.54 3.87.5 3a2 2 0 012-2h3.672a2 2 0 011.414.586l.828.828A2 2 0 009.828 3h3.982a2 2 0 011.992 2.181l-.637 7A2 2 0 0113.174 14H2.826A2 2 0 01.835 12.181l-.637-7a1.99 1.99.0 01.342-1.31zM2.19 4a1 1 0 00-.996 1.09l.637 7a1 1 0 00.995.91h10.348a1 1 0 00.995-.91l.637-7A1 1 0 0013.81 4H2.19zm4.69-1.707A1 1 0 006.172 2H2.5a1 1 0 00-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">分类</div><p class="dropdown-item-desc mb-0 text-wrap">所有分类。</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center active" href="https://www.hotmindshare.com/archives/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-archivebi bi-archive hi-svg-inline" fill="currentcolor" height="2em" style="color:384955" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1v7.5A2.5 2.5.0 0112.5 15h-9A2.5 2.5.0 011 12.5V5A1 1 0 010 4zm2 3v7.5A1.5 1.5.0 003.5 14h9a1.5 1.5.0 001.5-1.5V5zm13-3H1v2h14zM5 7.5a.5.5.0 01.5-.5h5a.5.5.0 010 1h-5A.5.5.0 015 7.5"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">归档</div><p class="dropdown-item-desc mb-0 text-wrap">文章归档。</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/tags/_index.zh-han/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-tagsbi bi-tags hi-svg-inline" fill="currentcolor" height="2em" style="color:green" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M3 2v4.586l7 7L14.586 9l-7-7zM2 2a1 1 0 011-1h4.586a1 1 0 01.707.293l7 7a1 1 0 010 1.414l-4.586 4.586a1 1 0 01-1.414.0l-7-7A1 1 0 012 6.586z"></path><path d="M5.5 5a.5.5.0 110-1 .5.5.0 010 1m0 1a1.5 1.5.0 100-3 1.5 1.5.0 000 3M1 7.086a1 1 0 00.293.707L8.75 15.25l-.043.043a1 1 0 01-1.414.0l-7-7A1 1 0 010 7.586V3a1 1 0 011-1z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">标签</div><p class="dropdown-item-desc mb-0 text-wrap">所有标签。</p></div></a></li></ul></li></ul><ul class="hb-header-panel navbar-nav flex-row flex-wrap"><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><hr class="d-lg-none my-2 text-body-50"/></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg><span class="hb-social-text d-lg-none ms-1">Email</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="hb-social-text d-lg-none ms-1">GitHub</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg><span class="hb-social-text d-lg-none ms-1">RSS</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="知乎"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg><span class="hb-social-text d-lg-none ms-1">知乎</span></a></li><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><div class="vr d-none d-lg-flex h-100 mx-lg-2 text-body"></div><hr class="d-lg-none my-2 text-body-50"/></li><li class="theme-toggle nav-item dropdown col-6 col-lg-auto d-flex flex-column justify-content-center"><button class="btn btn-link btn-theme-toggle nav-link py-2 px-0 px-lg-2 d-flex justify-content-start justify-content-lg-center align-items-center" data-style="switch" aria-expanded="false" title="主题">
<svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1 theme-toggle-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"></path></svg><span class="d-lg-none ms-1 theme-name">主题</span></button><ul class="theme-toggle-menu dropdown-menu dropdown-menu-end"><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="自动" data-bs-theme-value="auto">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"></path></svg></span>自动</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="暗色" data-bs-theme-value="dark">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-moon-starsbi bi-moon-stars hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278M4.858 1.311A7.269 7.269.0 001.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316.0 005.205-2.162c-.337.042-.68.063-1.029.063-4.61.0-8.343-3.714-8.343-8.29.0-1.167.242-2.278.681-3.286z"></path><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></svg></span>暗色</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="亮色" data-bs-theme-value="light">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-brightness-highbi bi-brightness-high hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 11a3 3 0 110-6 3 3 0 010 6m0 1a4 4 0 100-8 4 4 0 000 8M8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0m0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13m8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5M3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8m10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0m-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707M4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"></path></svg></span>亮色</button></li></ul></li></ul></div></div></div></nav></header><div class="hb-main container"><div class="container-fluid px-0 mb-4"><nav aria-label="breadcrumb"><ol class="hb-breadcrumb breadcrumb"><li class="breadcrumb-item"><a href="/" title="程序员安仔的技术文档/博客">主页</a></li><li class="breadcrumb-item"><a href="/archives/" title="归档">归档</a></li><li class="breadcrumb-item"><a href="/archives/2023/" title="2023">2023</a></li><li class="breadcrumb-item active" aria-current="page"><a href="/archives/2023/10/" title="十月">十月</a></li></ol></nav></div><div class="archives border-start border-5 ps-4 pt-3 position-relative"><div class="archive border-1"><div class="archive-heading h4 mb-4 border-bottom pb-3 border-2"><a class="text-decoration-none" href="/archives/2023/">2023</a></div><div class="archive-subheading h5 mb-3"><a class="text-decoration-none" href="/archives/2023/10/">十月</a></div><div class="archive-posts border-top pt-3"><div class="hb-blog-posts row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-3 mb-3"><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/103/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百零三、HBase在线区域合并" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百零三、HBase在线区域合并" href="/docs/bigdata/hbase/103/">一百零三、HBase在线区域合并</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">在线区域合并 Master和RegionServer都参与在线区域合并事件。客户端将合并RPC发送到主服务器，然后主服务器将这些区域一起移动到负载较重的区域所在的RegionServer。最后，主服务器将合并请求发送到该RegionServer，然后运行合并。与区域拆分过程类似，区域合并在RegionServer上作为本地事务运行。它将区域划分为多个区域，然后合并文件系统上的两个区域，从hbase:meta中删除合并区域，并将合并后的区域添加到hbase:meta，在RegionServer中打开合并区域并将合并报告给Master。
HBase shell中的区域合并示例：
1$ hbase&gt; merge_region &#39;ENCODED_REGIONNAME&#39;, &#39;ENCODED_REGIONNAME&#39; 2$ hbase&gt; merge_region &#39;ENCODED_REGIONNAME&#39;, &#39;ENCODED_REGIONNAME&#39;, true 这是一个异步操作，并且在没有等待合并完成的情况下立即调用返回。true作为可选的第三个参数传递将强制合并。通常只有相邻的区域可以合并。该force参数将覆盖此行为，仅供专门使用。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/107/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百零七、块和KeyValue" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百零七、块和KeyValue" href="/docs/bigdata/hbase/107/">一百零七、块和KeyValue</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">块（Blocks） StoreFiles由块（blocks）组成。块大小基于每个ColumnFamily进行配置。
压缩发生在StoreFiles中的块级别。有关压缩的更多信息，请参阅HBase中的压缩和数据块编码。
KeyValue 因初次访问，为防止爬虫和人机识别，请关注微信公众号，回复:‘验证码‘获取验证码来解锁全文 解锁内容 KeyValue类是HBase中数据存储的核心。KeyValue包装一个字节数组，并将偏移量和长度放入传递的数组中，指定将内容开始解释为KeyValue的位置。
字节数组中的KeyValue格式是：
keylength valuelength key value Key进一步分解为：
rowlength row（即，rowkey） columnfamilylength ColumnFamily columnqualifier timestamp（时间戳） keytype（键类型）（例如，Put，Delete，DeleteColumn，DeleteFamily） KeyValue实例不会跨块拆分。例如，如果有8 MB的KeyValue，即使块大小为64kb，该KeyValue也会作为一个连贯的块读入。
示例 为了强调以上几点，请检查两行不同列Put同一行上发生的情况：
Put ＃1： rowkey=row1, cf:attr1=value1 Put ＃2： rowkey=row1, cf:attr2=value2 即使这些是针对同一行的，也会为每列创建一个KeyValue：
Put＃1的关键部分：
rowlength ———–→ 4 row —————–→ row1 columnfamilylength –→ 2 columnfamily ——–→ cf columnqualifier —–→ attr1 timestamp ———–→ server time of Put keytype ————-→ Put Put＃2的关键部分：
rowlength ———–→ 4 row —————–→ row1 columnfamilylength –→ 2 columnfamily ——–→ cf columnqualifier —–→ attr2 timestamp ———–→ server time of Put keytype ————-→ Put 了解rowkey，ColumnFamily和列（又名columnqualifier）嵌入在KeyValue实例中是很重要的。这些标识符越长，KeyValue就越大。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/106/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百零六、HBase使用StoreFile（HFile）" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百零六、HBase使用StoreFile（HFile）" href="/docs/bigdata/hbase/106/">一百零六、HBase使用StoreFile（HFile）</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">StoreFile（HFile） StoreFiles是您的数据所在的地方。
HFile格式 所述HFILE文件格式是基于BigTable[2006]论文中所描述的SSTable文件和Hadoop的TFile（所述单元测试套件和压缩线束直接从TFile获取）。Schubert Zhang的博客文章，HFile：分块索引文件格式存储分类键值对，全面介绍了HBase的HFile。Matteo Bertozzi还提出了一个有用的描述，HBase I / O：HFile。
HFile工具 要查看HFile内容的文本版本，可以使用该hbase hfile工具。输入以下内容查看用法：
1$ ${HBASE_HOME}/bin/hbase hfile 例如，要查看文件，hdfs：//10.81.47.41：8020/hbase/default/TEST/1418428042/DSMP/4759508618286845475的内容，请键入以下内容：
1 $ ${HBASE_HOME}/bin/hbase hfile -v -f hdfs://10.81.47.41:8020/hbase/default/TEST/1418428042/DSMP/4759508618286845475 如果您放弃选项-v仅查看HFile的摘要。查看其他与该hfile工具相关的用法。
HDFS上的StoreFile目录结构 有关StoreFiles在HDFS上的外观与目录结构有关的详细信息，请参阅“浏览HDFS以获取HBase对象”，这将在之后的章节中进行介绍。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/109/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百零九、HDFS" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百零九、HDFS" href="/docs/bigdata/hbase/109/">一百零九、HDFS</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HDFS 由于HBase在HDFS上运行（并且每个StoreFile都是作为HDFS上的文件编写的），因此了解HDFS体系结构非常重要，特别是在它如何存储文件，处理故障转移和复制块方面。
有关更多信息，请参阅HDFS体系结构上的Hadoop文档。
NameNode NameNode负责维护文件系统元数据。有关更多信息，请参阅上面的HDFS体系结构链接。
DataNode DataNode负责存储HDFS块。有关更多信息，请参阅上面的HDFS体系结构链接。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/102/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百零二、HBase手动拆分区域" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百零二、HBase手动拆分区域" href="/docs/bigdata/hbase/102/">一百零二、HBase手动拆分区域</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">手动拆分区域 你可以手动拆分表，无论是在创建表（预拆分）还是稍后作为管理操作。出于以下一种或多种原因，您可能会选择拆分您的区域。可能还有其他有效的原因，但手动拆分表的需求也可能指出您的模式设计存在问题。
手动拆分表格的原因：
您的数据按时间序列或其他类似的算法进行排序，这些算法会在表格末尾对新数据进行排序。这意味着持有最后一个区域的区域服务器始终处于负载状态，而其他区域服务器处于空闲状态，或者大部分空闲状态。 你在表的一个区域开发了一个意想不到的热点。例如，一旦有关于该名人的消息，跟踪网络搜索的应用程序可能会被大量搜索名人所淹没。 在群集中的RegionServers数量大幅增加之后，可以快速扩展负载。 在大批量装载之前，这可能会导致跨区域异常和不均匀的载荷。 该DisabledRegionSplitPolicy策略阻止手动区域拆分。
确定分拆分点 手动拆分表格的目标是在单独使用良好的rowkey设计无法达到的情况下，提高跨集群平衡负载的可能性。牢记这一点，你拆分区域的方式非常依赖于数据的特征。这可能是你已经知道拆分你的表的最好方法。如果不是这样，你拆分表的方式取决于你的键是什么样的。
字母数字行键（Alphanumeric Rowkeys）
如果您的行键以字母或数字开头，则可以在字母或数字边界处拆分表格。例如，下面的命令创建一个表，其区域在每个元音处都有拆分，所以第一个区域有AD，第二个区域有EH，第三个区域有IN，第四个区域有OV，第五个区域有UZ。
使用自定义算法
RegionSplitter工具提供了HBase，并使用SplitAlgorithm为您确定拆分点。作为参数，您可以给出算法，所需的区域数量和列族。它包括三个分割算法。首先是 HexStringSplit 算法，它假定行键是十六进制字符串。第二种 DecimalStringSplit 算法是假定行键是00000000到99999999范围内的十进制字符串。第三种 UniformSplit假设行键是随机字节数组。您可能需要开发自己的 SplitAlgorithm，使用提供的模型。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/108/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百零八、HBase批量加载架构" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百零八、HBase批量加载架构" href="/docs/bigdata/hbase/108/">一百零八、HBase批量加载架构</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">批量加载架构 HBase批量加载过程包含两个主要步骤。
通过MapReduce作业准备数据 # 批量加载的第一步是使用HFileOutputFormat2从MapReduce作业生成HBase数据文件（StoreFiles）。这种输出格式以 HBase 的内部存储格式写出数据，以便以后可以非常高效地将其加载到群集中。
为了高效工作，必须对HFileOutputFormat2进行配置，使每个输出 HFile 适合单个区域。为了做到这一点，输出将被批量加载到HBase中的作业使用Hadoop的TotalOrderPartitioner类来将映射输出分区到密钥空间的不相交范围中，对应于表中区域的键范围。
HFileOutputFormat2包括一个方便函数，configureIncrementalLoad()，它根据根据表格的当前区域边界自动设置TotalOrderPartitioner。
完成数据加载 # 在准备好数据导入之后，无论是通过使用具有“importtsv.bulk.output”选项的importtsv工具，还是使用HFileOutputFormat的其他MapReduce作业，该completebulkload工具都可用于将数据导入到正在运行的集群中。这个命令行工具遍历准备好的数据文件，并且每个文件确定文件所属的区域。然后，它会联系采用HFile的相应RegionServer，将其移动到其存储目录并使数据可供客户端使用。
如果在批量加载准备过程中或者在准备和完成步骤之间区域边界发生了变化，completebulkload公用程序会自动将数据文件分成与新边界相对应的部分。这个过程并不是最佳效率，因此用户应该注意尽量减少在准备批量加载和将其导入群集之间的延迟，特别是如果其他客户端同时通过其他方式加载数据。
1$ hadoop jar hbase-server-VERSION.jar completebulkload [-c /path/to/hbase/config/hbase-site.xml] /user/todd/myoutput mytable 该-cconfig-file选项可用于指定包含适当的hbase参数的文件（例如，hbase-site.xml）（如果CLASSPATH中尚未提供此参数）（此外，如果zookeeper不是由HBase管理，则CLASSPATH必须包含具有zookeeper配置文件的目录）。
如果目标表在HBase中不存在，则此工具将自动创建表。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/191/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百九十一、故障排除和调试HBase：Master" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百九十一、故障排除和调试HBase：Master" href="/docs/bigdata/hbase/191/">一百九十一、故障排除和调试HBase：Master</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">Master 有关Master的更多信息，请参阅master。
启动错误 Master提示您需要运行HBase迁移脚本 运行时，HBase迁移脚本提示根目录中没有文件。
HBase希望根目录不存在，或者已经由HBase先前运行初始化。如果使用Hadoop DFS为HBase创建新目录，则会发生此错误。确保HBase根目录当前不存在或已由先前的HBase运行初始化。确定的解决方案是使用Hadoop dfs删除HBase根目录，让HBase创建并初始化目录本身。
包len6080218超出范围！ 如果群集中有许多区域，并且您在日志中看到了如上部分标题中所述的错误，请参阅HBASE-4246集群太多的区域无法承受某些主故障转移方案。
由于缺少文件系统的hsync，Master无法激活 HBase的集群操作内部框架需要能够在写入日志中持久保存状态。当使用支持检查所需呼叫可用性的Apache Hadoop Common文件系统API版本时，如果发现无法安全运行，HBase将主动中止集群。
对于Master，失败将显示在这样的日志中：
12018-04-05 11:18:44,653 ERROR [Thread-21] master.HMaster: Failed to become active master 2java.lang.IllegalStateException: The procedure WAL relies on the ability to hsync for proper operation during component failures, but the underlying filesystem does not support doing so. Please check the config value of &#39;hbase.procedure.store.wal.use.hsync&#39; to set the desired level of robustness and ensure the config value of &#39;hbase.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/191/">阅读更多关于一百九十一、故障排除和调试HBase：Master的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/195/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百九十五、故障排除和调试HBase：HBase和HDFS" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百九十五、故障排除和调试HBase：HBase和HDFS" href="/docs/bigdata/hbase/195/">一百九十五、故障排除和调试HBase：HBase和HDFS</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HBase和HDFS Apache HDFS的常规配置指南不在本文中进行详细的介绍。有关配置HDFS的详细信息，请参阅https://hadoop.apache.org/上提供的文档。本节以HBase的形式介绍HDFS。
在大多数情况下，HBase将其数据存储在Apache HDFS中。这包括包含数据的HFile，以及在将数据写入HFile之前存储数据并预防RegionServer崩溃的预写日志（WAL）。HDFS为HBase中的数据提供可靠性和保护，因为它是分布式的。为了以最高效率运行，HBase需要在本地提供数据。因此，在每个RegionServer上运行HDFS DataNode是一种很好的做法。
HBase和HDFS的重要信息和指南 因初次访问，为防止爬虫和人机识别，请关注微信公众号，回复:‘验证码‘获取验证码来解锁全文 解锁内容 HBase是HDFS的客户端
HBase是使用HDFS DFSClient类的HDFS客户端，对此类的引用显示在HBase日志中，并带有其他HDFS客户端日志消息。
在多个地方需要配置
与HBase相关的一些HDFS配置需要在HDFS（服务器）端完成。其他必须在HBase内完成（在客户端）。需要在服务器端和客户端设置其他设置。
影响HBase的写入错误可能会记录在HDFS日志中而不是HBase日志中。
写入时，HDFS将通信从一个DataNode传输到另一个DataNode。HBase使用HDFS客户端类与HDFS NameNode和DataNode进行通信。DataNode之间的通信问题记录在HDFS日志中，而不是HBase日志中。
HBase使用两个不同的端口与HDFS通信
HBase使用ipc.Client接口和DataNode类与DataNode进行通信。对这些的引用将出现在HBase日志中。这些通信信道中的每一个使用不同的端口（默认为50010和50020）。通过dfs.datanode.address和dfs.datanode.ipc.address参数在HDFS配置中配置端口。
可能会在HBase、HDFS其中一个，或两者中记录错误
在对HBase中的HDFS问题进行故障排除时，请检查两个位置中的日志是否存在错误。
HDFS需要一段时间才能将节点标记为已死。您可以配置HDFS以避免使用陈旧的DataNode。
默认情况下，HDFS不会将节点标记为已死，直到630秒无法访问。在Hadoop 1.1和Hadoop 2.x中，可以通过启用对陈旧DataNode的检查来缓解此问题，但默认情况下禁用此检查。您可以通过dfs.namenode.avoid.read.stale.datanode和dfs.namenode.avoid.write.stale.datanode settings单独启用读取和写入检查。陈旧的DataNode是dfs.namenode.stale.datanode.interval（默认为30秒）无法访问的。避免过时的数据节点，并将其标记为读取或写入操作的最后可能目标。
HDFS重试和超时的设置对HBase很重要
您可以配置各种重试和超时的设置。请始终参考HDFS文档以获取当前建议和默认值。这里列出了一些对HBase很重要的设置。默认值是Hadoop 2.3的最新版本。查看Hadoop文档以获取最新的值和建议。
HBase Balancer和HDFS Balancer不兼容
HDFS平衡器尝试在DataNode中均匀分布HDFS块。HBase依赖于压缩来在区域分裂或失败后恢复局部性。这两种类型的平衡不能很好地协同工作。
过去，普遍接受的建议是关闭HDFS负载均衡器并依赖HBase均衡器，因为HDFS均衡器会降低局部性。如果您的HDFS版本低于2.7.1，此建议仍然有效。
HDFS-6133通过将dfs.datanode.block-pinning.enabled属性设置true为HDFS服务配置，可以从HDFS负载均衡器中排除优先节点（固定）块 。
可以通过将HBase均衡器类（CONF： hbase.master.loadbalancer.class）切换到org.apache.hadoop.hbase.favored.FavoredNodeLoadBalancer来启用HDFS的favorites -nodes特性。
提示：HDFS-6133在HDFS 2.7.0及更高版本中可用，但HBase不支持在HDFS 2.7.0上运行，因此您必须使用HDFS 2.7.1或更高版本才能在HBase中使用此功能
连接超时 客户端（HBASE）和HDFS DataNode之间发生连接超时。它们可能在建立连接，尝试读取或尝试写入时发生。下面的两个设置组合使用，并影响DFSClient和DataNode，ipc.cClient和DataNode之间的连接，以及两个DataNode之间的通信。
dfs.client.socket-timeout （默认值：60000）
建立连接或读取时客户端连接超时之前的时间。该值以毫秒表示，因此默认值为60秒。
dfs.datanode.socket.write.timeout （默认值：480000）
写入操作超时之前的时间量。默认值为8分钟，以毫秒表示。
典型的错误日志 日志中经常会出现以下类型的错误。
INFO HDFS.DFSClient: Failed to connect to /xxx50010, add to deadNodes and continue java.net.SocketTimeoutException: 60000 millis timeout while waiting for channel to be ready for connect.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/195/">阅读更多关于一百九十五、故障排除和调试HBase：HBase和HDFS的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/194/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百九十四、故障排除和调试HBase：HBase和Hadoop版本问题" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百九十四、故障排除和调试HBase：HBase和Hadoop版本问题" href="/docs/bigdata/hbase/194/">一百九十四、故障排除和调试HBase：HBase和Hadoop版本问题</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HBase和Hadoop版本问题 …无法与客户端版本通信… 如果您在日志中看到如下内容：
1... 2012-09-24 10:20:52,168 FATAL org.apache.hadoop.hbase.master.HMaster: Unhandled exception. Starting shutdown. org.apache.hadoop.ipc.RemoteException: Server IPC version 7 cannot communicate with client version 4 ... 您是否正在尝试从具有Hadoop 1.0.x客户端的HBase与Hadoop 2.0.x进行通信？使用针对Hadoop 2.0构建的HBase或重建HBase，将-Dhadoop.profile = 2.0属性传递给Maven（有关更多信息，请参阅“构建各种hadoop版本”，这将在之后的章节中进行介绍）。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/193/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百九十三、故障排除和调试HBase：Amazon EC2" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百九十三、故障排除和调试HBase：Amazon EC2" href="/docs/bigdata/hbase/193/">一百九十三、故障排除和调试HBase：Amazon EC2</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">Amazon EC2 ZooKeeper似乎不适用于Amazon EC2 部署为Amazon EC2实例时，HBase无法启动。如下所示的异常显示在Master或RegionServer日志中：
1 2009-10-19 11:52:27,030 INFO org.apache.zookeeper.ClientCnxn: Attempting 2 connection to server ec2-174-129-15-236.compute-1.amazonaws.com/10.244.9.171:2181 3 2009-10-19 11:52:27,032 WARN org.apache.zookeeper.ClientCnxn: Exception 4 closing session 0x0 to sun.nio.ch.SelectionKeyImpl@656dc861 5 java.net.ConnectException: Connection refused 安全组策略阻止公共地址上的ZooKeeper端口。在配置ZooKeeper quorum对等列表时，请使用内部EC2主机名。
Amazon EC2上的不稳定性 关于HBase和Amazon EC2的问题经常出现在HBase dist-list上。使用Search Hadoop搜索旧线程。
远程Java连接到EC2群集不起作用 请参阅Andrew的答案，在用户列表中：远程Java客户端连接到EC2实例。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/192/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百九十二、故障排除和调试HBase：ZooKeeper" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百九十二、故障排除和调试HBase：ZooKeeper" href="/docs/bigdata/hbase/192/">一百九十二、故障排除和调试HBase：ZooKeeper</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">ZooKeeper 启动错误 找不到我的地址：ZooKeeper Qualm服务器列表中的xyz ZooKeeper服务器无法启动，抛出该错误。xyz是服务器的名称。
这是名称查找问题。HBase尝试在某台计算机上启动ZooKeeper服务器，但该计算机无法在hbase.zookeeper.quorum配置中找到自己。
使用错误消息中显示的主机名而不是您使用的值。如果您有DNS服务器，则可以在hbase-site.xml中设置hbase.zookeeper.dns.interface和hbase.zookeeper.dns.nameserver，以确保它解析为正确的FQDN。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">3 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/190/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百九十、故障排除和调试HBase：RegionServer" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百九十、故障排除和调试HBase：RegionServer" href="/docs/bigdata/hbase/190/">一百九十、故障排除和调试HBase：RegionServer</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">RegionServer 有关RegionServers的更多信息，请参阅RegionServer。
启动错误 Master启动了，但RegionServers没有 Master认为RegionServers的IP为127.0.0.1 – 这是localhost的，并解析为master自己的localhost。
RegionServers错误地通知Master，他们的IP地址是127.0.0.1。
修改区域服务器上的/etc/hosts，可以从：
1# Do not remove the following line, or various programs 2# that require network functionality will fail. 3127.0.0.1 fully.qualified.regionservername regionservername localhost.localdomain localhost 4::1 localhost6.localdomain6 localhost6 到（从localhost中删除主节点的名称）：
1# Do not remove the following line, or various programs 2# that require network functionality will fail. 3127.0.0.1 localhost.localdomain localhost 4::1 localhost6.localdomain6 localhost6 压缩链接错误 由于需要在每个群集上安装和配置LZO等压缩算法，因此这是启动错误的常见原因。如果你看到这样的消息：
111/02/20 01:32:15 ERROR lzo.GPLNativeCodeLoader: Could not load native gpl library 2java.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/190/">阅读更多关于一百九十、故障排除和调试HBase：RegionServer的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/121/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十一、HBase：配置MOB压缩策略" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十一、HBase：配置MOB压缩策略" href="/docs/bigdata/hbase/121/">一百二十一、HBase：配置MOB压缩策略</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">配置MOB压缩策略 默认情况下，一个特定日期的MOB文件会压缩为一个大型MOB文件。为了更多地减少MOB文件数，还支持其他MOB压缩策略：
1、 每日（daily）策略–每天将MOB文件压缩为一个大型MOB文件（默认策略）；
2、 每周（weekly）策略–每周将MOB文件压缩为一个大型MOB文件；
3、 每月（montly）策略–每月将MOB文件压缩为一个大型MOB文件；
使用HBase Shell配置MOB压缩策略：
1hbase&gt; create &#39;t1&#39;, {NAME =&gt; &#39;f1&#39;, IS_MOB =&gt; true, MOB_THRESHOLD =&gt; 102400, MOB_COMPACT_PARTITION_POLICY =&gt; &#39;daily&#39;} 2hbase&gt; create &#39;t1&#39;, {NAME =&gt; &#39;f1&#39;, IS_MOB =&gt; true, MOB_THRESHOLD =&gt; 102400, MOB_COMPACT_PARTITION_POLICY =&gt; &#39;weekly&#39;} 3hbase&gt; create &#39;t1&#39;, {NAME =&gt; &#39;f1&#39;, IS_MOB =&gt; true, MOB_THRESHOLD =&gt; 102400, MOB_COMPACT_PARTITION_POLICY =&gt; &#39;monthly&#39;} 4hbase&gt; alter &#39;t1&#39;, {NAME =&gt; &#39;f1&#39;, IS_MOB =&gt; true, MOB_THRESHOLD =&gt; 102400, MOB_COMPACT_PARTITION_POLICY =&gt; &#39;daily&#39;} 5hbase&gt; alter &#39;t1&#39;, {NAME =&gt; &#39;f1&#39;, IS_MOB =&gt; true, MOB_THRESHOLD =&gt; 102400, MOB_COMPACT_PARTITION_POLICY =&gt; &#39;weekly&#39;} 6hbase&gt; alter &#39;t1&#39;, {NAME =&gt; &#39;f1&#39;, IS_MOB =&gt; true, MOB_THRESHOLD =&gt; 102400, MOB_COMPACT_PARTITION_POLICY =&gt; &#39;monthly&#39;}</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/125/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十五、HBase：MOB优化任务" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十五、HBase：MOB优化任务" href="/docs/bigdata/hbase/125/">一百二十五、HBase：MOB优化任务</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">MOB优化任务 手动压缩MOB文件 # 要手动压缩MOB文件，而不是等待配置触发压缩，请使用compact或major_compactHBase shell命令。这些命令要求第一个参数为表名，并将列族作为第二个参数。并将压缩类型作为第三个参数。
1hbase&gt; compact&#39;t1&#39;，&#39;c1&#39;，&#39;MOB&#39; 2hbase&gt; major_compact&#39;t1&#39;，&#39;c1&#39;，&#39;MOB&#39; 这些命令也可以通过Admin.compact和Admin.majorCompact方法获得。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/124/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十四、HBase：配置MOB缓存" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十四、HBase：配置MOB缓存" href="/docs/bigdata/hbase/124/">一百二十四、HBase：配置MOB缓存</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">配置MOB缓存 因为可以随时存在大量MOB文件，与HFiles的数量相比，MOB文件并不总是保持打开状态。MOB文件读取器缓存是一个LRU缓存，它保持最近使用的MOB文件打开。要在每个RegionServer上配置MOB文件读取器的缓存，请将以下属性添加到RegionServer的hbase-site.xml中，根据您的环境自定义配置，然后重新启动或滚动重新启动RegionServer。
MOB缓存配置示例：
1&lt;property&gt; 2 &lt;name&gt;hbase.mob.file.cache.size&lt;/name&gt; 3 &lt;value&gt;1000&lt;/value&gt; 4 &lt;description&gt; 5 Number of opened file handlers to cache. 6 A larger value will benefit reads by providing more file handlers per mob 7 file cache and would reduce frequent file opening and closing. 8 However, if this is set too high, this could lead to a &#34;too many opened file handers&#34; 9 The default value is 1000. 10 &lt;/description&gt; 11&lt;/property&gt; 12&lt;property&gt; 13 &lt;name&gt;hbase.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/124/">阅读更多关于一百二十四、HBase：配置MOB缓存的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/123/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十三、HBase：测试MOB" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十三、HBase：测试MOB" href="/docs/bigdata/hbase/123/">一百二十三、HBase：测试MOB</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">测试MOB HBase中提供了实用程序org.apache.hadoop.hbase.IntegrationTestIngestWithMOB以帮助测试MOB功能。该实用程序运行如下：
1$ sudo -u hbase hbase org.apache.hadoop.hbase.IntegrationTestIngestWithMOB \ 2 -threshold 1024 \ 3 -minMobDataSize 512 \ 4 -maxMobDataSize 5120 threshold是当cells被认为是MOB时的阈值；默认值为1 kB，以字节为单位表示。 minMobDataSize是MOB数据大小的最小值；默认值为512 B，以字节为单位表示。 maxMobDataSize是MOB数据大小的最大值；默认值为5 kB，以字节为单位表示。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/127/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十七、启用HBase内存压缩" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十七、启用HBase内存压缩" href="/docs/bigdata/hbase/127/">一百二十七、启用HBase内存压缩</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">要启用HBase的内存压缩，请在您希望的行为的每个列族上设置IN_MEMORY_COMPACTION属性。该IN_MEMORY_COMPACTION属性可以是四个值之一：
NONE：没有内存压缩。 BASIC：基本策略允许刷新并保持一个刷新管道，直到我们跳过管道最大阈值，然后我们刷新到磁盘。没有内存压缩，但可以帮助提高吞吐量，因为数据从挥霍的原生ConcurrentSkipListMap数据类型转移到更紧凑（和高效）的数据类型。 EAGER：这是基本的策略加上内存压缩的刷新（很像是对hfiles进行的磁盘上压缩）；在压缩时，我们应用磁盘规则来消除版本，重复，ttl’d单元格等。 ADAPTIVE：自适应压缩适应工作负载。它根据数据中重复单元格的比例应用索引压缩或数据压缩。实验。 要在radish表中的info列系列上启用BASIC，请禁用该表并将该属性添加到info列族，然后重新启用：
1hbase(main):002:0&gt; disable &#39;radish&#39; 2Took 0.5570 seconds 3hbase(main):003:0&gt; alter &#39;radish&#39;, {NAME =&gt; &#39;info&#39;, IN_MEMORY_COMPACTION =&gt; &#39;BASIC&#39;} 4Updating all regions with the new schema... 5All regions updated. 6Done. 7Took 1.2413 seconds 8hbase(main):004:0&gt; describe &#39;radish&#39; 9Table radish is DISABLED 10radish 11COLUMN FAMILIES DESCRIPTION 12{NAME =&gt; &#39;info&#39;, VERSIONS =&gt; &#39;1&#39;, EVICT_BLOCKS_ON_CLOSE =&gt; &#39;false&#39;, NEW_VERSION_BEHAVIOR =&gt; &#39;false&#39;, KEEP_DELETED_CELLS =&gt; &#39;FALSE&#39;, CACHE_DATA_ON_WRITE =&gt; &#39;false&#39;, DATA_BLOCK_ENCODING =&gt; &#39;NONE&#39;, TTL =&gt; &#39;FOREVER&#39;, MIN_VERSIONS =&gt; &#39;0&#39;, REPLICATION_SCOPE =&gt; &#39;0&#39;, BLOOMFILTER =&gt; &#39;ROW&#39;, CACHE_INDEX_ON_WRITE =&gt; &#39;false&#39;, IN_MEMORY =&gt; &#39;false&#39;, CACHE_BLOOMS_ON_WRITE =&gt; &#39;false&#39;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#39;false&#39;, COMPRESSION =&gt; &#39;NONE&#39;, BLOCKCACHE =&gt; &#39;true&#39;, BLOCKSIZE =&gt; &#39;65536&#39;, METADATA =&gt; { 13&#39;IN_MEMORY_COMPACTION&#39; =&gt; &#39;BASIC&#39;}} 141 row(s) 15Took 0.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/127/">阅读更多关于一百二十七、启用HBase内存压缩的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/126/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十六、HBase内存压缩" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十六、HBase内存压缩" href="/docs/bigdata/hbase/126/">一百二十六、HBase内存压缩</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">概述 内存压缩（AKA Accordion）是hbase-2.0.0中的一项新功能。它首先在Accordion的Apache HBase博客上推出 ：通过内存压缩进行HBase Breathes。引用博客：
Accordion重新应用LSM主体[ Log-Structured-Merge Tree，HBase基于MemStore的设计模式，以便在数据仍在RAM中时消除冗余和其他开销。这样做可以降低刷新到HDFS的频率，从而减少写入放大和整个磁盘占用空间。由于刷新次数较少，因此MemStore溢出时写入操作停止的频率降低，因此写入性能得到改善。磁盘上的数据越少，对块缓存的压力越小，命中率越高，最终读取响应时间越长。最后，减少磁盘写入也意味着在后台执行的压缩更少，即从生产（读取和写入）工作中窃取的周期更少。总而言之，内存压缩的效果可以被设想为催化剂，使系统整体上移动得更快。
Accordion提供开发人员视图：内存压缩的开发人员视图。
内存压缩在大量数据流失时效果最佳；当数据仍在内存中时，可以消除覆盖或过度版本。如果写入都是唯一的，则可能会拖动写入吞吐量（内存中压缩成本CPU）。我们建议您在部署到生产之前进行测试和比较。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/129/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十九、HBase备份与还原的首次配置" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十九、HBase备份与还原的首次配置" href="/docs/bigdata/hbase/129/">一百二十九、HBase备份与还原的首次配置</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">首次配置步骤 本节包含为使用备份和还原功能而必须进行的必要配置更改。由于此功能大量使用YARN的MapReduce框架来并行化这些I/O重载操作，因此配置更改不仅仅局限于此hbase-site.xml。
允许YARN中的“hbase”系统用户 YARN container-executor.cfg配置文件必须具有以下属性设置：allowed.system.users = hbase。此配置文件的条目中不允许有空格。
执行第一个备份任务时，跳过此步骤将导致运行时错误。
用于备份和还原的有效container-executor.cfg文件的示例：
1yarn.nodemanager.log-dirs=/var/log/hadoop/mapred 2yarn.nodemanager.linux-container-executor.group=yarn 3banned.users=hdfs,yarn,mapred,bin 4allowed.system.users=hbase 5min.user.id=500 HBase特定的变化 将以下属性添加到hbase-site.xml并重新启动HBase（如果它已在运行）。
“，…”是省略号，意味着这是一个以逗号分隔的值列表，而不是应该添加到hbase-site.xml的文字文本。
1&lt;property&gt; 2 &lt;name&gt;hbase.backup.enable&lt;/name&gt; 3 &lt;value&gt;true&lt;/value&gt; 4&lt;/property&gt; 5&lt;property&gt; 6 &lt;name&gt;hbase.master.logcleaner.plugins&lt;/name&gt; 7 &lt;value&gt;org.apache.hadoop.hbase.backup.master.BackupLogCleaner,...&lt;/value&gt; 8&lt;/property&gt; 9&lt;property&gt; 10 &lt;name&gt;hbase.procedure.master.classes&lt;/name&gt; 11 &lt;value&gt;org.apache.hadoop.hbase.backup.master.LogRollMasterProcedureManager,...&lt;/value&gt; 12&lt;/property&gt; 13&lt;property&gt; 14 &lt;name&gt;hbase.procedure.regionserver.classes&lt;/name&gt; 15 &lt;value&gt;org.apache.hadoop.hbase.backup.regionserver.LogRollRegionServerProcedureManager,...&lt;/value&gt; 16&lt;/property&gt; 17&lt;property&gt; 18 &lt;name&gt;hbase.coprocessor.region.classes&lt;/name&gt; 19 &lt;value&gt;org.apache.hadoop.hbase.backup.BackupObserver,...&lt;/value&gt; 20&lt;/property&gt; 21&lt;property&gt; 22 &lt;name&gt;hbase.master.hfilecleaner.plugins&lt;/name&gt; 23 &lt;value&gt;org.apache.hadoop.hbase.backup.BackupHFileCleaner,...&lt;/value&gt; 24&lt;/property&gt;</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/122/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十二、HBase：配置MOB压缩可合并阈值" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十二、HBase：配置MOB压缩可合并阈值" href="/docs/bigdata/hbase/122/">一百二十二、HBase：配置MOB压缩可合并阈值</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">配置MOB压缩可合并阈值 如果一个mob文件的大小小于默认值1280MB，它被认为是一个小文件，需要在mob compaction中合并。
1&lt;property&gt; 2 &lt;name&gt;hbase.mob.compaction.mergeable.threshold&lt;/name&gt; 3 &lt;value&gt;10000000000&lt;/value&gt; 4&lt;/property&gt;</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/128/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十八、HBase备份与还原策略" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十八、HBase备份与还原策略" href="/docs/bigdata/hbase/128/">一百二十八、HBase备份与还原策略</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">策略 有一些常用策略可用于在您的环境中实现备份和还原。以下部分显示了如何实施这些策略并确定每种策略的潜在权衡。
此备份和还原工具尚未在启用透明数据加密（TDE）的HDFS群集上进行测试。这与开放式问题HBASE-16178有关。
在群集内备份 此策略将备份存储在与执行备份的位置相同的群集上。这种方法仅适用于测试，因为它不会在软件本身提供的内容之外提供任何额外的安全性。
使用专用群集进行备份 该策略提供了更高的容错能力，并为灾难恢复提供了途径。在此设置中，您将备份存储在单独的HDFS群集上，方法是将备份目标群集的HDFS URL提供给备份实用程序。您应该考虑备份到不同的物理位置，例如不同的数据中心。
通常，备份专用HDFS群集使用更经济的硬件配置文件来节省资金。
备份到云或存储供应商设备 保护HBase增量备份的另一种方法是将数据存储在属于第三方供应商且位于站点外的配置的安全服务器上。供应商可以是公共云提供商或使用Hadoop兼容文件系统（例如S3和其他与HDFS兼容的目标）的存储供应商。
HBase备份实用程序不支持备份到多个目标，解决方法是从HDFS或S3手动创建备份文件的副本。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/120/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百二十、HBase：为MOB配置列" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百二十、HBase：为MOB配置列" href="/docs/bigdata/hbase/120/">一百二十、HBase：为MOB配置列</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">为MOB配置列 您可以在表创建或更改期间配置列以支持MOB，无论是在HBase Shell中还是通过Java API。两个相关的属性是boolean IS_MOB和MOB_THRESHOLD，它是一个对象被认为是MOB的字节数，只需要IS_MOB。如果未指定MOB_THRESHOLD，则使用默认阈值100 KB。
使用HBase Shell为MOB配置列：
1hbase&gt; create &#39;t1&#39;, {NAME =&gt; &#39;f1&#39;, IS_MOB =&gt; true, MOB_THRESHOLD =&gt; 102400} 2hbase&gt; alter &#39;t1&#39;, {NAME =&gt; &#39;f1&#39;, IS_MOB =&gt; true, MOB_THRESHOLD =&gt; 102400} 示例23.使用Java API为MOB配置列：
1... 2HColumnDescriptor hcd = new HColumnDescriptor(“f”); 3hcd.setMobEnabled(true); 4... 5hcd.setMobThreshold(102400L); 6...</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/181/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百八十一、配置HBase和MapReduce" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百八十一、配置HBase和MapReduce" href="/docs/bigdata/hbase/181/">一百八十一、配置HBase和MapReduce</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">配置HBase和MapReduce 通常建议为HBase和MapReduce使用不同的集群。对此更好的限定条件是：不要配置一个 HBase，它提供重MR工作负载的实时请求。OLTP和OLAP优化的系统具有冲突的要求，而另一个将失去另一个，通常是前者。例如，短暂的延迟敏感磁盘读取将不得不排在较长的读取后面，这些读取试图挤出尽可能多的吞吐量。写入HBase的MR作业也会生成刷新和压缩，这反过来会使块缓存中的块无效。
如果需要处理MR中的实时HBase集群中的数据，可以使用CopyTable发送增量，或使用复制在OLAP集群上实时获取新数据。在最坏的情况下，如果您确实需要同时配置两者，请将MR设置为使用比您通常配置的更少的Map和Reduce插槽，可能只需一个。
当HBase的用于OLAP操作，最好以一种经过强化的方式设置它，比如设置更高的ZooKeeper会话超时以及为MemStores提供更多内存（因为工作负载通常是长扫描，所以块缓存不会被大量使用）。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">3 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/185/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百八十五、外部工具" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百八十五、外部工具" href="/docs/bigdata/hbase/185/">一百八十五、外部工具</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">外部工具 tail # tail是命令行工具，可以让您查看文件的末尾。添加-f选项，当新数据可用时，它将刷新。当你想知道发生了什么时，这很有用，例如，当一个集群需要很长时间才能关闭或启动时，因为你可以触发一个新的终端并跟踪主日志（可能还有一些RegionServers）。
top 在第一次尝试查看计算机上运行的内容以及如何使用资源时，top可能是最重要的工具之一。这是生产系统的一个例子：
1top - 14:46:59 up 39 days, 11:55, 1 user, load average: 3.75, 3.57, 3.84 2Tasks: 309 total, 1 running, 308 sleeping, 0 stopped, 0 zombie 3Cpu(s): 4.5%us, 1.6%sy, 0.0%ni, 91.7%id, 1.4%wa, 0.1%hi, 0.6%si, 0.0%st 4Mem: 24414432k total, 24296956k used, 117476k free, 7196k buffers 5Swap: 16008732k total, 14348k used, 15994384k free, 11106908k cached 6 PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 715558 hadoop 18 -2 3292m 2.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/185/">阅读更多关于一百八十五、外部工具的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/184/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百八十四、内置工具" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百八十四、内置工具" href="/docs/bigdata/hbase/184/">一百八十四、内置工具</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">内置工具 主Web接口 # 默认情况下，Master在端口16010上启动Web接口。
Master Web UI列出了创建的表及其定义（例如，ColumnFamilies、blocksize等）。此外，还会列出群集中可用的RegionServers以及选定的高级度量标准（请求，区域数，usedHeap，maxHeap）。Master Web UI允许导航到每个RegionServer的Web UI。
RegionServer Web接口 默认情况下，RegionServers在端口16030上启动Web接口。
RegionServer Web UI列出了在线区域及其开始/结束键，以及时间点RegionServer度量（请求，区域，storeFileIndexSize，compactionQueueSize等）。
有关度量标准定义的详细信息，请参阅HBase度量标准，这将在之后的章节进行介绍。
zkcli zkcli是一个非常有用的工具，用于调查ZooKeeper相关的问题。要调用方法如下：
1./hbase zkcli -server host:port &lt;cmd&gt; &lt;args&gt; 命令（和参数）是：
1connect host:port 2 get path [watch] 3 ls path [watch] 4 set path data [version] 5 delquota [-n|-b] path 6 quit 7 printwatches on|off 8 create [-s] [-e] path data acl 9 stat path [watch] 10 close 11 ls2 path [watch] 12 history 13 listquota path 14 setAcl path acl 15 getAcl path 16 sync path 17 redo cmdno 18 addauth scheme auth 19 delete path [version] 20 setquota -n|-b val path</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/183/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百八十三、故障排除和调试HBase：资源" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百八十三、故障排除和调试HBase：资源" href="/docs/bigdata/hbase/183/">一百八十三、故障排除和调试HBase：资源</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">资源 search-hadoop.com search-hadoop.com索引所有邮件列表，非常适合历史搜索。当你遇到问题时首先在这里搜索，因为很可能有人已经遇到了你的问题。
邮件列表 在Apache HBase邮件列表上提出问题。’dev’邮件列表针对实际构建Apache HBase的开发人员社区以及当前正在开发的功能，而’user’通常用于发布Apache HBase版本的问题。在进入邮件列表之前，请先通过搜索邮件列表存档,以确保您的问题尚未得到解答。使用search-hadoop.com。花一些时间来草拟你的问题。一个包含所有上下文和证据的高质量问题，作者试图在手册和列表中找到答案，更有可能得到迅速的回应。
Slack 参见http://apache-hbase.slack.com关于Slack的频道
IRC （你可能会在Slack上得到更及时的回复）
irc.freenode.net上的#hbase
JIRA 在查找Hadoop/HBase特定问题时，JIRA也非常有用。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/187/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百八十七、故障排除和调试HBase：MapReduce" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百八十七、故障排除和调试HBase：MapReduce" href="/docs/bigdata/hbase/187/">一百八十七、故障排除和调试HBase：MapReduce</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">MapReduce 你认为你在群集中，但你实际上是本地的 以下堆栈跟踪发生在使用ImportTsv的时候，但是这样的事情可能发生在配置错误的任何作业上。
1 WARN mapred.LocalJobRunner: job_local_0001 2java.lang.IllegalArgumentException: Can&#39;t read partitions file 3 at org.apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner.setConf(TotalOrderPartitioner.java:111) 4 at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:62) 5 at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117) 6 at org.apache.hadoop.mapred.MapTask$NewOutputCollector.&lt;init&gt;(MapTask.java:560) 7 at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:639) 8 at org.apache.hadoop.mapred.MapTask.run(MapTask.java:323) 9 at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:210) 10Caused by: java.io.FileNotFoundException: File _partition.lst does not exist. 11 at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:383) 12 at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:251) 13 at org.apache.hadoop.fs.FileSystem.getLength(FileSystem.java:776) 14 at org.apache.hadoop.io.SequenceFile$Reader.&lt;init&gt;(SequenceFile.java:1424) 15 at org.apache.hadoop.io.SequenceFile$Reader.&lt;init&gt;(SequenceFile.java:1419) 16 at org.apache.hadoop.hbase.mapreduce.hadoopbackport.TotalOrderPartitioner.readPartitions(TotalOrderPartitioner.java:296) …看到堆栈的关键部分了吗？如下：
1at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:210) LocalJobRunner表示作业在本地运行，而不是在群集上运行。
要解决此问题，您应该使用您的HADOOP_CLASSPATH集合运行MR作业以包含HBase依赖项。“hbase classpath”实用程序可用于轻松完成此操作。例如（用您的HBase版本替换VERSION）：
1HADOOP_CLASSPATH=hbase classpath hadoop jar $HBASE_HOME/hbase-mapreduce-VERSION.jar rowcounter usertable 有关HBase MapReduce作业和类路径的更多信息，请参阅HBase，MapReduce和CLASSPATH。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/186/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百八十六、故障排除和调试HBase：客户端" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百八十六、故障排除和调试HBase：客户端" href="/docs/bigdata/hbase/186/">一百八十六、故障排除和调试HBase：客户端</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">客户端 有关HBase客户端的更多信息，请参阅客户端。
ScannerTimeoutException或UnknownScannerException 如果从客户端到RegionServer的RPC调用之间的时间超过扫描超时，则抛出此异常。例如，如果Scan.setCaching设置为500，然后在ResultScanner上每调用500个.next()行，就会有一个RPC调用来获取下一批行，因为数据正以500行为一个块的形式传输到客户端。减少setCaching值可能是一个选项，但将此值设置得太低会导致对行数的处理效率低下。
请参阅扫描缓存。
Thrift和Java API的性能差异 如果Scan.setCaching太高，可能会出现性能不佳，甚至可能发生ScannerTimeoutExceptions，如上文的“ScannerTimeoutException或UnknownScannerException”中所述。如果Thrift客户端对给定工作负载使用错误的缓存设置，则与Java API相比，性能会受到影响。要在Thrift客户端中为给定扫描设置缓存，请使用该scannerGetList(scannerId, numRows)方法，其中numRows是一个表示要缓存的行数的整数。在一个案例中，我们发现在相同的查询条件下，将Thrift扫描的缓存从1000减少到100，。
调用Scanner.next时的LeaseException 在某些情况下，从RegionServer获取数据的客户端会获得LeaseException而不是通常的ScannerTimeoutException或UnknownScannerException。通常，例外的来源是org.apache.hadoop.hbase.regionserver.Leases.removeLease(Leases.java:230)（行号可能会有所不同）。它往往发生在缓慢/冻结的RegionServer#next调用中。可以通过hbase.rpc.timeout &gt; hbase.regionserver.lease.period来防止它。Harsh J调查了该问题，作为邮件列表线程HBase的一部分，mail＃user – Lease不存在异常。
Shell或客户端应用程序在正常操作期间会引发许多可怕的异常 从0、20.0开始，`org.apache.hadoop.hbase.*`的默认日志级别为DEBUG。
在您的客户端上，编辑$ HBASE_HOME / conf / log4j.properties，并更改log4j.logger.org.apache.hadoop.hbase=DEBUG为：log4j.logger.org.apache.hadoop.hbase=INFO，或者甚至log4j.logger.org.apache.hadoop.hbase=WARN。
长客户端暂停压缩 这是关于Apache HBase dist-list的一个相当常见的问题。这种情况下，客户端通常将大量数据插入到相对未优化的HBase集群中。压缩会加剧暂停，尽管它不是问题的根源。
请参阅用于预创建区域的模式上的“表创建：预创建区域”，并确认该表不是以单个区域开始的。
对于集群配置，请参考HBase配置，特别是hbase.hstore.blockingStoreFiles，hbase.hregion.memstore.block.multiplier，MAX_FILESIZE（区域的大小），和MEMSTORE_FLUSHSIZE.
暂停原因可能发生的稍长解释如下：在MemStores上有时会阻塞Puts，这些Plusher被阻塞的刷新线程阻塞，因为压缩文件太多而无法压缩，因为压缩程序有太多小文件要压缩而且必须重复压缩相同的数据。即使是轻微的压缩，也可能发生这种情况。更糟糕的是，Apache HBase不会压缩内存中的数据。因此，存储在MemStore中的64MB可能在压缩后变为6MB文件 – 这导致更小的StoreFile。好处是更多的数据被打包到同一个区域，但是通过能够编写更大的文件来实现性能 – 这就是为什么HBase在写入新的StoreFile之前等待flushsize的原因。较小的StoreFiles成为压缩的目标。如果不进行压缩，文件就会大得多，不需要那么多的压缩，但是这是以I/O为代价的。
有关其他信息，请参阅具有压缩的长客户端暂停上的此线程。
安全客户端连接（[由GSS异常引起：未提供有效凭据…]） 您可能会遇到以下错误：
1Secure Client Connect ([Caused by GSSException: No valid credentials provided 2 (Mechanism level: Request is a replay (34) V PROCESS_TGS)]) 此问题是由MIT Kerberos replay_cache组件中的＃1201和＃5924错误引起的。这些错误导致旧版本的krb5-server错误地阻止从Principal发送的后续请求。这导致krb5-server阻止从一个客户端发送的连接（每个RegionServer具有多个线程连接实例的HTable实例）；客户端日志中记录了诸如Request is a replay (34)之类的消息，您可以忽略这些消息，因为默认情况下，HTable将为每个失败的连接重试5 * 10（50）次。如果重试后与RegionServer的任何连接失败，HTable将抛出IOException，以便HTable实例的用户客户端代码可以进一步处理它。注意：HTable在HBase 1.0中弃用，使用Table。</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/186/">阅读更多关于一百八十六、故障排除和调试HBase：客户端的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/189/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百八十九、故障排除和调试HBase：网络" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百八十九、故障排除和调试HBase：网络" href="/docs/bigdata/hbase/189/">一百八十九、故障排除和调试HBase：网络</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">网络 网络峰值 如果您看到定期的网络峰值，您可能需要检查compactionQueues以查看主要压缩是否正在发生。
有关管理压缩的更多信息，请参阅管理压缩部分的内容。
Loopback IP HBase期望loopback IP地址为127.0.0.1。
网络接口 所有网络接口都正常运行吗？你确定吗？请参阅案例研究中的故障排除案例研究，这将在之后的章节进行介绍。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">3 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/182/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百八十二、故障排除和调试HBase：日志" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百八十二、故障排除和调试HBase：日志" href="/docs/bigdata/hbase/182/">一百八十二、故障排除和调试HBase：日志</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">日志 关键进程日志如下…（将 替换为启动服务的用户，将 替换为计算机名称）
NameNode：$ HADOOP_HOME / logs / hadoop- -namenode- .log
DataNode：$ HADOOP_HOME / logs / hadoop- -datanode- .log
JobTracker：$ HADOOP_HOME / logs / hadoop- -jobtracker- .log
TaskTracker：$ HADOOP_HOME / logs / hadoop- -tasktracker- .log
HMaster：$ HBASE_HOME / logs / hbase- -master- .log
RegionServer：$ HBASE_HOME / logs / hbase- -regionserver- .log
ZooKeeper：TODO
日志位置 对于独立部署，日志显然将位于单个计算机上，但这只是一个开发配置。生产部署需要在群集上运行。
NameNode
NameNode日志位于NameNode服务器上。HBase Master通常在NameNode服务器上运行，也可以在ZooKeeper上运行。
对于较小的群集，JobTracker/ResourceManager通常也在NameNode服务器上运行。
DataNode
每个DataNode服务器都有一个HDFS的DataNode日志，以及HBase的RegionServer日志。
此外，每个DataNode服务器还将具有用于MapReduce任务执行的TaskTracker/NodeManager日志。
日志级别 启用RPC级别日志记录
在RegionServer上启用RPC级别日志记录通常可以深入了解服务器的计时。启用后，记录的日志量很大。建议您不要将此登录时间保留在短时间。要启用RPC级别日志记录，请浏览到RegionServer UI并单击“日志级别”。将日志级别设置为包org.apache.hadoop.ipc的DEBUG（这对于hadoop.ipc这是正确的，对于hbase.ipc不是）。然后尾随RegionServers日志、分析。
要禁用，请将日志记录级别设置回INFO级别。
JVM垃圾回收日志 本节中的所有示例垃圾回收日志都基于Java 8输出。在Java 9和更新版本中引入统一的日志记录将导致非常不同的日志。</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/182/">阅读更多关于一百八十二、故障排除和调试HBase：日志的内容。</a></div></div></div></div></div></div></div><div class="border-1"><nav class="hb-blog-pagination mb-3" aria-label="Page navigation"><ul class="pagination flex-wrap justify-content-center"><li class="page-item"><a class="page-link" href="/archives/2023/10/page/3/" aria-label="前一页"><span aria-hidden="true">«</span></a></li><li class="page-item"><a class="page-link" href="/archives/2023/10/">1</a></li><li class="page-item"><a class="page-link" href="/archives/2023/10/page/2/">2</a></li><li class="page-item"><a class="page-link" href="/archives/2023/10/page/3/">3</a></li><li class="page-item active"><a class="page-link" href="/archives/2023/10/page/4/">4</a></li><li class="page-item"><a class="page-link" href="/archives/2023/10/page/5/">5</a></li><li class="page-item"><a class="page-link" href="/archives/2023/10/page/6/">6</a></li><li class="page-item disabled"><a class="page-link" href="#">...</a></li><li class="page-item"><a class="page-link" href="/archives/2023/10/page/34/">34</a></li><li class="page-item"><a class="page-link" href="/archives/2023/10/page/5/" aria-label="下一页"><span aria-hidden="true">»</span></a></li></ul></nav></div></div></div><footer class="hb-footer pt-4 pt-md-5 pb-2 pb-md-3 bg-body-tertiary"><div class="container-fluid container-lg px-4 px-md-3"><div class="row"><div class="hb-footer-site-info col mb-2 text-center"><div class="h5">程序员安仔</div><ul class="list-unstyled small mb-2"><li class="mt-2">一个只爱折腾技术的普通人</li><li class="mt-2">粤ICP备2023148789号</li><li class="mt-2">Built with ❤️ from <a class="text-body-emphasis" href="https://gohugo.io/" target="_blank" rel="external" title="Hugo">Hugo</a>, <a class="text-body-emphasis" href="https://hugomods.com/" target="_blank" rel="external" title="HugoMods">HugoMods</a> and <a class="text-body-emphasis" href="https://hbstack.dev/" target="_blank" rel="external" title="HB Framework">HB Framework</a>.</li></ul><div class="hb-footer-socials d-flex mb-2 justify-content-center flex-wrap"><a class="hb-social p-2" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg></a><a class="hb-social p-2" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:%!s(bool=true)" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="hb-social p-2" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></a><a class="hb-social p-2" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="知乎"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:#056de8" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg></a></div></div></div></div></footer><script src="/js/hb.50d14a1b7f62235386f6d49a5bb9495ff4747f5a972f615733af6a9d8fa8d1f8.js" integrity="sha256-UNFKG39iI1OG9tSaW7lJX/R0f1qXL2FXM69qnY+o0fg=" defer=""></script><script src="/js/search.c9fac61245d331d8ba0f9acc30dd59aa2c5c56b50ce96004664ea6089577a191.js" defer=""></script><script>"serviceWorker"in navigator&&window.addEventListener("DOMContentLoaded",function(){navigator.serviceWorker.register("/sw.js")})</script></body></html>