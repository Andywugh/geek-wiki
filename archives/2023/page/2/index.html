<!DOCTYPE html><html data-bs-theme="light" itemscope="" itemtype="http://schema.org/WebPage" lang="zh-hans"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="manifest" href="https://www.hotmindshare.com/manifest.webmanifest"/><link rel="alternate" type="application/rss+xml" href="https://www.hotmindshare.com/archives/2023/index.xml"/><meta name="description" content="2023"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_16x16_resize_box_3.png" sizes="16x16" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_32x32_resize_box_3.png" sizes="32x32" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_150x150_resize_box_3.png" sizes="150x150" type="image/png"/><link rel="apple-touch-icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_180x180_resize_box_3.png" sizes="180x180" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_192x192_resize_box_3.png" sizes="192x192" type="image/png"/><link rel="mask-icon" href="/mask-icon.svg" color="#000000"/><meta property="og:title" content="2023"/><meta property="og:description" content="一个只爱折腾技术的普通人"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.hotmindshare.com/archives/2023/"/><meta itemprop="name" content="2023"/><meta itemprop="description" content="一个只爱折腾技术的普通人"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="2023"/><meta name="twitter:description" content="一个只爱折腾技术的普通人"/><title>2023 - 2/34 - 归档 - 程序员安仔</title>
<link href="/css/hb.23d6b6c1b2a5cfcc11f90a4deed345d935f5a54d78d4bdadde2f54ba4fbae157.css" rel="stylesheet"/><script src="/js/init.577d4e90bff5601d5756fcf799b0e53568bf56cea3b80fe43f66c9d365e8100c.js" integrity="sha256-V31OkL/1YB1XVvz3mbDlNWi/Vs6juA/kP2bJ02XoEAw="></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?1cbf85f7bc76266af7bdac71374879bf",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel="stylesheet" href="/css/search.ee67fb063f2e4be8eff1be9d9806279c3c3d43570b6266c759281faac3804b11.css"/></head><body><noscript><div class="alert alert-danger text-center rounded-0" role=alert><svg aria-hidden="true" class="bi bi-exclamation-square-fillbi bi-exclamation-square-fill hi-svg-inline me-2" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm6 4c.535.0.954.462.9.995l-.35 3.507a.552.552.0 01-1.1.0L7.1 4.995A.905.905.0 018 4m.002 6a1 1 0 110 2 1 1 0 010-2"/></svg>你的浏览器不支持 JavaScript。</div></noscript><header class="hb-header"><nav class="hb-header-nav navbar navbar-expand-lg"><div class="container-fluid"><a class="navbar-brand d-flex align-items-center" href="/"><img src="https://www.hotmindshare.com/images/logo_hu3f5eb531558986e612421c7146e04118_941594_0x64_resize_box_3.png" alt="Logo" width="64" height="64" class="hb-header-logo d-inline-block align-text-top me-2"/>程序员安仔</a><div class="d-flex order-5"><div class="search-modal-toggle hb-header-search-form position-relative d-flex ms-lg-1"><button type="button" class="hb-header-search-icon border-0 bg-transparent px-2" aria-label="Toggle search">
<svg aria-hidden="true" class="bi bi-searchbi bi-search hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1.007 1.007.0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"></path></svg></button>
<input class="form-control rounded-5 d-none d-lg-block ms-lg-1" id="hb-header-search-input" placeholder="搜索"/>
<span class="hb-header-search-keys position-absolute d-none d-lg-block"><kbd>CTRL</kbd>
<kbd>K</kbd></span></div><button class="navbar-toggler border-0 shadow-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#hb-header-content" aria-controls="hb-header-content" aria-label="Toggle navigation"><svg aria-hidden="true" class="bi bi-three-dotsbi bi-three-dots hi-svg-inline" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></button></div><div class="offcanvas offcanvas-lg offcanvas-end" tabindex="-1" id="hb-header-content" aria-labelledby="hb-header-content-label"><div class="offcanvas-header"><h5 class="offcanvas-title" id="hb-header-content-label">程序员安仔</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button></div><div class="offcanvas-body"><ul class="hb-header-menus navbar-nav flex-row flex-wrap"><li class="hb-header-menu nav-item col-6 col-lg-auto"><a class="nav-link" href="https://www.hotmindshare.com/docs/"><svg aria-hidden="true" class="bi bi-bookbi bi-book hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5.0 000 2.5v11a.5.5.0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5.0 00.78.0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5.0 0016 13.5v-11a.5.5.0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"></path></svg>系列教程</a></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto active"><a class="nav-link pe-0 d-inline-flex align-items-center active" href="/blog/" aria-current="page"><svg aria-hidden="true" class="hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M192 32c0 17.7 14.3 32 32 32 123.7.0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1.0 224 0c-17.7.0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32 70.7.0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7.0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5.0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144H128v96h16c26.5.0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48V144z"></path></svg>博客</a>
<a class="nav-link ps-0 d-inline-flex" href="#" id="header-menu-blog" role="button" data-bs-toggle="dropdown" aria-expanded="false"><span class="visually-hidden">Toggle Dropdown</span><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67z"></path></svg></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby="header-menu-blog" data-bs-popper="none"><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/series/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-columnsbi bi-columns hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v12a1 1 0 01-1 1H1a1 1 0 01-1-1zm8.5.0v8H15V2zm0 9v3H15v-3zm-1-9H1v3h6.5zM1 14h6.5V6H1z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">专栏</div><p class="dropdown-item-desc mb-0 text-wrap">所有专栏。</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/authors/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-pencilbi bi-pencil hi-svg-inline" fill="currentcolor" height="2em" style="color:#0f5e97" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M12.146.146a.5.5.0 01.708.0l3 3a.5.5.0 010 .708l-10 10a.5.5.0 01-.168.11l-5 2a.5.5.0 01-.65-.65l2-5a.5.5.0 01.11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5.0 01.5.5v.5h.5a.5.5.0 01.5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5.0 015 12.5V12h-.5a.5.5.0 01-.5-.5V11h-.5a.5.5.0 01-.468-.325z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">作者</div><p class="dropdown-item-desc mb-0 text-wrap">作者列表。</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/categories/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-folderbi bi-folder hi-svg-inline" fill="currentcolor" height="2em" style="color:orange" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M.54 3.87.5 3a2 2 0 012-2h3.672a2 2 0 011.414.586l.828.828A2 2 0 009.828 3h3.982a2 2 0 011.992 2.181l-.637 7A2 2 0 0113.174 14H2.826A2 2 0 01.835 12.181l-.637-7a1.99 1.99.0 01.342-1.31zM2.19 4a1 1 0 00-.996 1.09l.637 7a1 1 0 00.995.91h10.348a1 1 0 00.995-.91l.637-7A1 1 0 0013.81 4H2.19zm4.69-1.707A1 1 0 006.172 2H2.5a1 1 0 00-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">分类</div><p class="dropdown-item-desc mb-0 text-wrap">所有分类。</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center active" href="https://www.hotmindshare.com/archives/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-archivebi bi-archive hi-svg-inline" fill="currentcolor" height="2em" style="color:384955" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1v7.5A2.5 2.5.0 0112.5 15h-9A2.5 2.5.0 011 12.5V5A1 1 0 010 4zm2 3v7.5A1.5 1.5.0 003.5 14h9a1.5 1.5.0 001.5-1.5V5zm13-3H1v2h14zM5 7.5a.5.5.0 01.5-.5h5a.5.5.0 010 1h-5A.5.5.0 015 7.5"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">归档</div><p class="dropdown-item-desc mb-0 text-wrap">文章归档。</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/tags/_index.zh-han/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-tagsbi bi-tags hi-svg-inline" fill="currentcolor" height="2em" style="color:green" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M3 2v4.586l7 7L14.586 9l-7-7zM2 2a1 1 0 011-1h4.586a1 1 0 01.707.293l7 7a1 1 0 010 1.414l-4.586 4.586a1 1 0 01-1.414.0l-7-7A1 1 0 012 6.586z"></path><path d="M5.5 5a.5.5.0 110-1 .5.5.0 010 1m0 1a1.5 1.5.0 100-3 1.5 1.5.0 000 3M1 7.086a1 1 0 00.293.707L8.75 15.25l-.043.043a1 1 0 01-1.414.0l-7-7A1 1 0 010 7.586V3a1 1 0 011-1z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">标签</div><p class="dropdown-item-desc mb-0 text-wrap">所有标签。</p></div></a></li></ul></li></ul><ul class="hb-header-panel navbar-nav flex-row flex-wrap"><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><hr class="d-lg-none my-2 text-body-50"/></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg><span class="hb-social-text d-lg-none ms-1">Email</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="hb-social-text d-lg-none ms-1">GitHub</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg><span class="hb-social-text d-lg-none ms-1">RSS</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="知乎"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg><span class="hb-social-text d-lg-none ms-1">知乎</span></a></li><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><div class="vr d-none d-lg-flex h-100 mx-lg-2 text-body"></div><hr class="d-lg-none my-2 text-body-50"/></li><li class="theme-toggle nav-item dropdown col-6 col-lg-auto d-flex flex-column justify-content-center"><button class="btn btn-link btn-theme-toggle nav-link py-2 px-0 px-lg-2 d-flex justify-content-start justify-content-lg-center align-items-center" data-style="switch" aria-expanded="false" title="主题">
<svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1 theme-toggle-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"></path></svg><span class="d-lg-none ms-1 theme-name">主题</span></button><ul class="theme-toggle-menu dropdown-menu dropdown-menu-end"><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="自动" data-bs-theme-value="auto">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"></path></svg></span>自动</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="暗色" data-bs-theme-value="dark">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-moon-starsbi bi-moon-stars hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278M4.858 1.311A7.269 7.269.0 001.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316.0 005.205-2.162c-.337.042-.68.063-1.029.063-4.61.0-8.343-3.714-8.343-8.29.0-1.167.242-2.278.681-3.286z"></path><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></svg></span>暗色</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="亮色" data-bs-theme-value="light">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-brightness-highbi bi-brightness-high hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 11a3 3 0 110-6 3 3 0 010 6m0 1a4 4 0 100-8 4 4 0 000 8M8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0m0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13m8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5M3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8m10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0m-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707M4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"></path></svg></span>亮色</button></li></ul></li></ul></div></div></div></nav></header><div class="hb-main container"><div class="container-fluid px-0 mb-4"><nav aria-label="breadcrumb"><ol class="hb-breadcrumb breadcrumb"><li class="breadcrumb-item"><a href="/" title="程序员安仔的技术文档/博客">主页</a></li><li class="breadcrumb-item"><a href="/archives/" title="归档">归档</a></li><li class="breadcrumb-item active" aria-current="page"><a href="/archives/2023/" title="2023">2023</a></li></ol></nav></div><div class="archives border-start border-5 ps-4 pt-3 position-relative"><div class="archive border-1"><div class="archive-heading h4 mb-4 border-bottom pb-3 border-2"><a class="text-decoration-none" href="/archives/2023/">2023</a></div><div class="archive-subheading h5 mb-3"><a class="text-decoration-none" href="/archives/2023/10/">十月</a></div><div class="archive-posts border-top pt-3"><div class="hb-blog-posts row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-3 mb-3"><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/114/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百一十四、HBase时间轴一致性：META表区域的区域复制" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百一十四、HBase时间轴一致性：META表区域的区域复制" href="/docs/bigdata/hbase/114/">一百一十四、HBase时间轴一致性：META表区域的区域复制</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">META表区域的区域复制 目前，还没有为META表的WAL完成异步WAL复制。META表的辅助副本仍然从持久性存储文件中刷新自己。因此，hbase.regionserver.meta.storefile.refresh.period需要设置为一个特定的非零值，以刷新元存储文件。请注意，此配置与hbase.regionserver.storefile.refresh.period的配置不同。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/113/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百一十三、HBase时间轴一致性：存储文件TTL" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百一十三、HBase时间轴一致性：存储文件TTL" href="/docs/bigdata/hbase/113/">一百一十三、HBase时间轴一致性：存储文件TTL</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">存储文件TTL 在上述两种写传播方法中，主服务器的存储文件将在独立于主要区域的辅助服务器中打开。因此，对于主要压缩的文件，辅助文件可能仍然在引用这些文件进行读取。这两个功能都使用HFileLinks来引用文件，但是没有任何保护（还）来保证文件不会被过早删除。因此，作为警卫，您应该将配置属性hbase.master.hfilecleaner.ttl设置为较大的值，例如1小时，以确保您不会收到要转到副本的请求的IOException。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">4 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/117/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百一十七、HBase时间轴一致性：配置属性" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百一十七、HBase时间轴一致性：配置属性" href="/docs/bigdata/hbase/117/">一百一十七、HBase时间轴一致性：配置属性</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">配置属性 要使用高可用读取，您应该在hbase-site.xml文件中设置以下属性。没有特定配置可启用或禁用区域副本。相反，您可以在创建表时或使用alter table更改每个表的区域副本数量以增加或减少。以下配置用于使用异步wal复制和使用3的元副本。
服务器端属性 1&lt;property&gt; 2 &lt;name&gt;hbase.regionserver.storefile.refresh.period&lt;/name&gt; 3 &lt;value&gt;0&lt;/value&gt; 4 &lt;description&gt; 5 The period (in milliseconds) for refreshing the store files for the secondary regions. 0 means this feature is disabled. Secondary regions sees new files (from flushes and compactions) from primary once the secondary region refreshes the list of files in the region (there is no notification mechanism). But too frequent refreshes might cause extra Namenode pressure. If the files cannot be refreshed for longer than HFile TTL (hbase.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/117/">阅读更多关于一百一十七、HBase时间轴一致性：配置属性的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/116/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百一十六、HBase时间轴一致性：辅助副本故障切换" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百一十六、HBase时间轴一致性：辅助副本故障切换" href="/docs/bigdata/hbase/116/">一百一十六、HBase时间轴一致性：辅助副本故障切换</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">辅助副本故障切换 当辅助区域副本首次联机或故障转移时，它可能已经从其存储区进行了一些编辑。由于对辅助副本的恢复处理方式不同，因此辅助服务器必须确保在辅助服务器分配后开始服务请求之前，辅助服务器不会及时恢复。为此，辅助服务器会等待，直到它观察到完整的刷新周期（启动刷新，提交刷新）或从主服务器复制的“区域打开事件”。在这种情况发生之前，辅助区域副本将通过抛出IOException消息并拒绝所有读取请求，并显示消息“区域的读取被禁用”。但是，其他副本可能仍然可以读取，因此不会对具有TIMELINE一致性的rpc造成任何影响。为了加快恢复速度，辅助区域在打开时会触发主要刷新请求。hbase.region.replica.wait.for.primary.flush （默认启用）可用于在需要时禁用此功能。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/119/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百一十九、HBase时间轴一致性：读取API和用法" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百一十九、HBase时间轴一致性：读取API和用法" href="/docs/bigdata/hbase/119/">一百一十九、HBase时间轴一致性：读取API和用法</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">阅读API和用法 # Shell 您可以使用Consistency.TIMELINE语义在shell中进行读取，如下所示：
1hbase(main):001:0&gt; get &#39;t1&#39;,&#39;r6&#39;, {CONSISTENCY =&gt; &#34;TIMELINE&#34;} 您可以模拟区域服务器暂停或变得不可用，并从辅助副本执行读取操作：
1$ kill -STOP &lt;pid or primary region server&gt; 2hbase(main):001:0&gt; get &#39;t1&#39;,&#39;r6&#39;, {CONSISTENCY =&gt; &#34;TIMELINE&#34;} 使用扫描也是类似的：
1hbase&gt; scan &#39;t1&#39;, {CONSISTENCY =&gt; &#39;TIMELINE&#39;} Java # 您可以为Get和Scans设置一致性，并按如下方式执行请求：
1Get get = new Get(row); 2get.setConsistency(Consistency.TIMELINE); 3... 4Result result = table.get(get); 您还可以传递多个获取：
1Get get1 = new Get(row); 2get1.setConsistency(Consistency.TIMELINE); 3... 4ArrayList&lt;Get&gt; gets = new ArrayList&lt;Get&gt;(); 5gets.add(get1); 6... 7Result[] results = table.get(gets); 以及扫描：
1Scan scan = new Scan(); 2scan.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/119/">阅读更多关于一百一十九、HBase时间轴一致性：读取API和用法的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/112/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百一十二、HBase时间轴一致性：将写入传播到区域副本" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百一十二、HBase时间轴一致性：将写入传播到区域副本" href="/docs/bigdata/hbase/112/">一百一十二、HBase时间轴一致性：将写入传播到区域副本</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">将写入传播到区域副本 如上所述，在HBase时间轴一致性中，写入只转到主要区域副本。为了将写入从主区域副本传播到次区域，有两种不同的机制。对于只读表，您不需要使用以下任何方法。禁用和启用表格应使数据在所有区域副本中可用。对于可变的表，你必须仅使用下列机制之一：storefile刷新，或异步WAL复制。建议使用后者。
StoreFile复习 第一种机制是在HBase-1.0 +中引入的存储文件刷新。存储文件刷新是每个区域服务器的一个线程，该服务器定期运行，并为辅助区域副本的主区域的存储文件执行刷新操作。如果启用，刷新器将确保次要区域副本及时查看来自主要区域的新刷新，压缩或批量加载的文件。但是，这意味着只有刷新的数据可以从辅助区域副本读取，并且在刷新完成后，使辅助数据在较长的时间内落后于主数据库。
要打开此功能，您应该将hbase.regionserver.storefile.refresh.period配置为非零值。参见下面的配置部分。
Asnyc WAL复制 写入副本的第二种机制是通过“异步WAL复制”功能完成的，并且仅在HBase-1.1 +中可用。这与HBase的多数据中心复制类似，但是来自区域的数据被复制到次要区域。每个辅助副本总是按照主区域提交的顺序接收和观察写入。从某种意义上说，这种设计可以被认为是“群集内复制”，不是将数据复制到不同的数据中心，而是将数据转移到次要区域，以保持次区域的内存中状态是最新的。数据文件在主区域和其他副本之间共享，因此没有额外的存储开销。但是，次要区域的内存中会有近期未刷新的数据，这增加了内存开销。主要区域也将清除，压缩和批量加载事件写入其WAL，这些事件也通过wal复制复制到辅助节点。当他们观察到刷新/压实或批量加载事件时，次要区域重放该事件以拾取新文件并丢弃旧文件。
以与主服务器相同的顺序提交写入操作可确保次服务器不会偏离主要区域数据，但由于日志复制是异步的，因此数据在次要区域中可能仍旧过时。由于此功能可用作复制端点，因此预计性能和延迟特征与群集间复制类似。
异步WAL复制默认是禁用的。您可以通过设置hbase.region.replica.replication.enabled为true来启用此功能。当您首次创建区域复制&gt;1的表时，Asyn WAL复制功能将添加一个名为region_replica_replication复制对等点的新复制对等点。启用后，如果要禁用此功能，则需要执行两项操作：（1）将配置属性hbase.region.replica.replication.enabled设置为false hbase-site.xml（请参见下面的配置部分）；（2）使用hbase shell或Adminclass禁用集群中指定的复制对等点region_replica_replication：
1hbase&gt; disable_peer &#39;region_replica_replication&#39;</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/118/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百一十八、HBase时间轴一致性：创建具有区域复制的表" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百一十八、HBase时间轴一致性：创建具有区域复制的表" href="/docs/bigdata/hbase/118/">一百一十八、HBase时间轴一致性：创建具有区域复制的表</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">创建具有区域复制的表 区域复制是每个表的属性。默认情况下，所有表都有REGION_REPLICATION=1，这意味着每个区域只有一个副本。您可以通过在表描述符中提供REGION_REPLICATION属性来设置和更改表的每个区域的副本数。
Shell 1create &#39;t1&#39;, &#39;f1&#39;, {REGION_REPLICATION =&gt; 2} 2describe &#39;t1&#39; 3for i in 1..100 4put &#39;t1&#39;, &#34;r#{i}&#34;, &#39;f1:c1&#39;, i 5end 6flush &#39;t1&#39; Java 1HTableDescriptor htd = new HTableDescriptor(TableName.valueOf(“test_table”)); 2htd.setRegionReplication(2); 3... 4admin.createTable(htd); 您还可以使用setRegionReplication()和更改表来增加，减少表的区域复制。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/110/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百一十、HBase时间轴一致性（Timeline Consistency）" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百一十、HBase时间轴一致性（Timeline Consistency）" href="/docs/bigdata/hbase/110/">一百一十、HBase时间轴一致性（Timeline Consistency）</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">时间轴一致性（Timeline Consistency） HBase引入了一致性定义，可以根据读取操作（获取或扫描）提供一致性定义。
1public enum Consistency { 2 STRONG, 3 TIMELINE Consistency.STRONG是HBase提供的默认一致性模型。如果表的区域复制为1，或者在具有区域副本的表中，但是读取是以此一致性完成的，则读取总是由主区域执行，以便与先前的行为不会发生任何变化，并且客户端总是观察最新的数据。
如果执行读取操作Consistency.TIMELINE，则读取的RPC将首先发送到主要区域服务器。在很短的时间间隔（hbase.client.primaryCallTimeout.get默认为10ms）之后，如果主服务器没有响应，则也会发送用于辅助区域副本的并行RPC。在此之后，结果将从首先完成的RPC中返回。如果响应从主区域副本返回，则我们始终可以知道数据是最新的。为此，Result.isStale（）API已被添加到检查失效。如果结果来自辅助区域，则Result.isStale（）将被设置为true。然后用户可以检查该字段，以便了解有关数据的可能原因。
就语义而言，HBase实现的TIMELINE一致性与这些方面的纯粹最终一致性不同：
单宿主和有序更新：区域复制与否，在写入端，仍然只有1个定义的副本（主）可以接受写入。此副本负责命令编辑并防止冲突。这保证了两个不同的写入不会被不同的副本同时提交，并且数据发散。有了这个，就不需要进行read-repair或last-timestamp-wins两种中的冲突解决。 辅助还按照主要承诺的顺序应用编辑。通过这种方式，辅助数据将在任何时间点包含初选数据的快照。这与RDBMS复制相似，甚至与HBase自己的多数据中心复制类似，但在单个集群中也是如此。 在读取端，客户端可以检测读取是来自最新数据还是旧数据。另外，客户端可以在每个操作的基础上发布具有不同一致性要求的读取，以确保其自身的语义保证。 客户端仍然可以观察到无序编辑，并且如果它观察到首先从一个辅助副本读取，然后观察到另一个辅助副本的读取，则可以及时返回。对区域副本或基于交易ID的担保没有粘性。如果需要，这可以稍后实施。 为了更好地理解TIMELINE语义，让我们看看上面的图。假设有两个客户端，第一个客户端首先写入x=1，然后x=2和x=3。如上所述，所有写入都由主区域副本处理。写入保存在预写日志（WAL）中，并异步复制到其他副本。在上图中，请注意replica_id=1收到2次更新，其数据显示x=2，而replica_id=2只收到一次更新，其数据显示x=1。
如果client1以STRONG一致性读取，它只会与replica_id=0进行通信，因此保证观察x=3的最新值。如果客户端发出TIMELINE一致性读取，则RPC将转到所有副本（在主超时之后），并且第一个响应的结果将返回。因此，客户端可以将1，2或3看作x的值。假设主区域发生故障并且日志复制无法持续一段时间。如果客户端使用TIMELINE一致性进行多次读取，则它可以先观察x=2，然后观察x=1，依此类推。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/151/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十一、HBase与Scala一起使用" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十一、HBase与Scala一起使用" href="/docs/bigdata/hbase/151/">一百五十一、HBase与Scala一起使用</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">Scala 设置类路径 要将Scala与HBase一起使用，您的CLASSPATH必须包含HBase的类路径以及代码所需的Scala JAR。首先，在运行HBase RegionServer进程的服务器上使用以下命令，以获取HBase的类路径。
1$ ps aux |grep regionserver| awk -F &#39;java.library.path=&#39; {&#39;print $2&#39;} | awk {&#39;print $1&#39;} 2/usr/lib/hadoop/lib/native:/usr/lib/hbase/lib/native/Linux-amd64-64 设置$CLASSPATH环境变量以包括您在上一步中找到的路径，以及项目所需的scala-library.jar路径和每个与Scala相关的其他JAR。
1$ export CLASSPATH=$CLASSPATH:/usr/lib/hadoop/lib/native:/usr/lib/hbase/lib/native/Linux-amd64-64:/path/to/scala-library.jar Scala SBT文件 # 您的build.sbt文件需要以下解析程序和libraryDependencies才能与HBase一起使用。
1resolvers += &#34;Apache HBase&#34; at &#34;https://repository.apache.org/content/repositories/releases&#34; 2resolvers += &#34;Thrift&#34; at &#34;https://people.apache.org/~rawson/repo/&#34; 3libraryDependencies ++= Seq( 4 &#34;org.apache.hadoop&#34; % &#34;hadoop-core&#34; % &#34;0.20.2&#34;, 5 &#34;org.apache.hbase&#34; % &#34;hbase&#34; % &#34;0.90.4&#34; Scala代码示例 此示例列出HBase表，创建新表并向其添加行：
1import org.apache.hadoop.hbase.HBaseConfiguration 2import org.apache.hadoop.hbase.client.{Connection,ConnectionFactory,HBaseAdmin,HTable,Put,Get} 3import org.apache.hadoop.hbase.util.Bytes 4val conf = new HBaseConfiguration() 5val connection = ConnectionFactory.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/151/">阅读更多关于一百五十一、HBase与Scala一起使用的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/155/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十五、HBase：过滤器计算顺序" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十五、HBase：过滤器计算顺序" href="/docs/bigdata/hbase/155/">一百五十五、HBase：过滤器计算顺序</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">计算顺序 1、 括号具有最高优先级；
2、 然后是一元运算符SKIP和WHILE，并具有相同的优先级；
3、 接着是二元运算符，其中AND优先级最高，其次是OR；
优先级示例：
1Filter1 AND Filter2 OR Filter 2is evaluated as 3(Filter1 AND Filter2) OR Filter3 4Filter1 AND SKIP Filter2 OR Filter3 5is evaluated as 6(Filter1 AND (SKIP Filter2)) OR Filter3 您可以使用括号明确的控制计算顺序。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/154/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十四、HBase：复合过滤器和运算符" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十四、HBase：复合过滤器和运算符" href="/docs/bigdata/hbase/154/">一百五十四、HBase：复合过滤器和运算符</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">复合过滤器和运算符 二元运算符
AND
如果使用AND运算符，则键值必须满足两个过滤器。
OR
如果使用OR运算符，则键值必须满足至少一个过滤器。
一元运算符
SKIP
对于特定行，如果任何键值未通过过滤条件，则跳过整行。
WHILE
对于特定行，将发出键值，直到达到未通过过滤条件的键值。
示例-复合运算符
您可以组合多个运算符来创建过滤器层次结构，例如以下示例：
1(Filter1 AND Filter2) OR (Filter3 AND Filter4)</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/153/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十三、HBase：常规过滤字符串语法" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十三、HBase：常规过滤字符串语法" href="/docs/bigdata/hbase/153/">一百五十三、HBase：常规过滤字符串语法</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">常规过滤字符串语法 一个简单的过滤表达式表示为一个字符串，如下所示：
1“FilterName (argument, argument,... , argument)” 请记住以下语法准则：
指定过滤器的名称，后跟括号中以逗号分隔的参数列表。 如果参数表示字符串，则应将其括在单引号（’）中。 表示布尔值，整数或比较运算符（例如：&lt;，&gt;或！=）的参数不应包含在引号中 过滤器名称必须是单个单词。除空格，单引号和括号外，允许使用所有ASCII字符。 过滤器的参数可以包含任何ASCII字符。如果参数中存在单引号，则必须通过附加的前一个单引号对其进行转义。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/157/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十七、HBase比较器" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十七、HBase比较器" href="/docs/bigdata/hbase/157/">一百五十七、HBase比较器</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">比较器 HBase比较器可以是以下任何一种：
1、 BinaryComparator–使用Bytes.compareTo(byte[]，byte[])比较指定的字节数组；
2、 BinaryPrefixComparator–按字典顺序与指定的字节数组进行比较它只比较该字节数组的长度；
3、 RegexStringComparator–使用给定的正则表达式与指定的字节数组进行比较只有EQUAL和NOT_EQUAL比较对此比较器有效；
4、 SubStringComparator–测试给定的子字符串是否出现在指定的字节数组中比较不区分大小写只有EQUAL和NOT_EQUAL比较对此比较器有效；
比较器的一般语法是： ComparatorType:ComparatorValue
各种比较器的ComparatorType如下：
1、 BinaryComparator-二进制；
2、 BinaryPrefixComparator–binaryprefix；
3、 RegexStringComparator–regexstring；
4、 SubStringComparator–substring；
ComparatorValue可以是任何值。
示例-ComparatorValues
1、 binary:abc将匹配所以字典顺序大于“abc”的所有内容；
2、 binaryprefix:abc将匹配前3个字符在词典上等于“abc”的所有内容；
3、 regexstring:ab*yz将匹配所有不以“ab”开头并以“yz”结尾的内容；
4、 substring:abc123将匹配以子串“abc123”开头的所有内容；</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/156/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十六、HBase：过滤器比较运算符" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十六、HBase：过滤器比较运算符" href="/docs/bigdata/hbase/156/">一百五十六、HBase：过滤器比较运算符</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">比较运算符 在HBase中提供了以下的比较运算符：
1、 LESS（&lt;）；
2、 LESS_OR_EQUAL（⇐）；
3、 EQUAL（=）；
4、 NOT_EQUAL（！=）；
5、 GREATER_OR_EQUAL（&gt;=）；
6、 GREATER（&gt;）；
7、 NO_OP（无操作）；
客户端应使用符号（&lt;，⇐，=，！=，&gt;，&gt; =）来表示比较运算符。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/159/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十九、HBase单个过滤器语法" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十九、HBase单个过滤器语法" href="/docs/bigdata/hbase/159/">一百五十九、HBase单个过滤器语法</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">单个过滤器语法 KeyOnlyFilter
此过滤器不带任何参数。它仅返回每个键值的关键组件。
FirstKeyOnlyFilter
此过滤器不带任何参数。它仅返回每行的第一个键值。
PrefixFilter
此过滤器采用一个参数 – 行键的前缀。它仅返回以指定行前缀开头的行中存在的键值
ColumnPrefixFilter
此过滤器采用一个参数 – 列前缀。它仅返回以指定列前缀开头的列中存在的键值。列前缀的格式必须为：“qualifier”。
MultipleColumnPrefixFilter
此过滤器采用列前缀列表。它返回以任何指定列前缀开头的列中存在的键值。每个列前缀必须采用以下形式：“qualifier”。
ColumnCountGetFilter
此过滤器采用一个参数 – 一个限制。它返回表中的第一个限制列数。
的PageFilter
此过滤器采用一个参数 – 页面大小。它返回表中的页面大小行数。
ColumnPaginationFilter
此过滤器有两个参数 – 限制和偏移。它返回偏移列数后的列数限制。它为所有行执行此操作。
InclusiveStopFilter
此过滤器使用一个参数 – 要停止扫描的行键。它返回行中存在的所有键值，包括指定的行。
TimeStampsFilter
此过滤器采用时间戳列表。它返回时间戳与任何指定时间戳匹配的键值。
的RowFilter
该过滤器采用比较运算符和比较器。它使用compare运算符将每个行键与比较器进行比较，如果比较返回true，则返回该行中的所有键值。
家庭过滤器
该过滤器采用比较运算符和比较器。它使用比较运算符将每个列族名称与比较器进行比较，如果比较返回true，则返回该列族中的所有单元格。
QualifierFilter
该过滤器采用比较运算符和比较器。它使用compare运算符将每个限定符名称与比较器进行比较，如果比较返回true，则返回该列中的所有键值。
ValueFilter
该过滤器采用比较运算符和比较器。它使用比较运算符将每个值与比较器进行比较，如果比较返回true，则返回该键值。
DependentColumnFilter
此过滤器有两个参数 – 族和限定符。它尝试在每一行中找到此列，并返回该行中具有相同时间戳的所有键值。如果该行不包含指定的列 – 将返回该行中的任何键值。
SingleColumnValueFilter
该过滤器采用列族，限定符，比较运算符和比较器。如果未找到指定的列 – 将发出该行的所有列。如果找到该列并且与比较器的比较返回true，则将发出该行的所有列。如果条件失败，则不会发出该行。
SingleColumnValueExcludeFilter
此过滤器采用相同的参数，其行为与SingleColumnValueFilter相同 – 但是，如果找到该列并且条件通过，则除了测试的列值之外，将发出该行的所有列。
ColumnRangeFilter
此过滤器仅用于选择列在minColumn和maxColumn之间的键。它还需要两个布尔变量来指示是否包含minColumn和maxColumn。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">2 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/152/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十二、HBase与Jython一起使用" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十二、HBase与Jython一起使用" href="/docs/bigdata/hbase/152/">一百五十二、HBase与Jython一起使用</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">Jython 设置类路径 要将Jython与HBase一起使用，您的CLASSPATH必须包含HBase的类路径以及代码所需的Jython JAR。
将路径设置为包含Jython .jar的目录，以及每个项目需要的附加的Jython相关JAR。然后导出指向$ JYTHON_HOME环境变量的HBASE_CLASSPATH。
1$ export HBASE_CLASSPATH=/directory/jython.jar 在类路径中使用HBase和Hadoop JAR启动Jython shell：$ bin / hbase org.python.util.jython
Jython代码示例 使用Jython创建表，填充，获取和删除表
以下Jython代码示例检查表，如果存在，则删除它然后创建它。然后，它使用数据填充表并获取数据。
1import java.lang 2from org.apache.hadoop.hbase import HBaseConfiguration, HTableDescriptor, HColumnDescriptor, TableName 3from org.apache.hadoop.hbase.client import Admin, Connection, ConnectionFactory, Get, Put, Result, Table 4from org.apache.hadoop.conf import Configuration 5# First get a conf object. This will read in the configuration 6# that is out in your hbase-*.xml files such as location of the 7# hbase master node.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/152/">阅读更多关于一百五十二、HBase与Jython一起使用的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/158/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十八、HBase过滤器语言示例" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十八、HBase过滤器语言示例" href="/docs/bigdata/hbase/158/">一百五十八、HBase过滤器语言示例</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">使用过滤器语言的PHP客户端程序示例 1&lt;? 2 $_SERVER[&#39;PHP_ROOT&#39;] = realpath(dirname(__FILE__).&#39;/..&#39;); 3 require_once $_SERVER[&#39;PHP_ROOT&#39;].&#39;/flib/__flib.php&#39;; 4 flib_init(FLIB_CONTEXT_SCRIPT); 5 require_module(&#39;storage/hbase&#39;); 6 $hbase = new HBase(&#39;&lt;server_name_running_thrift_server&gt;&#39;, &lt;port on which thrift server is running&gt;); 7 $hbase-&gt;open(); 8 $client = $hbase-&gt;getClient(); 9 $result = $client-&gt;scannerOpenWithFilterString(&#39;table_name&#39;, &#34;(PrefixFilter (&#39;row2&#39;) AND (QualifierFilter (&gt;=, &#39;binary:xyz&#39;))) AND (TimestampsFilter ( 123, 456))&#34;); 10 $to_print = $client-&gt;scannerGetList($result,1); 11 while ($to_print) { 12 print_r($to_print); 13 $to_print = $client-&gt;scannerGetList($result,1); 14 } 15 $client-&gt;scannerClose($result); 16?&gt; 过滤器字符串示例 因初次访问，为防止爬虫和人机识别，请关注微信公众号，回复:‘验证码‘获取验证码来解锁全文 解锁内容 # “PrefixFilter (‘Row’) AND PageFilter (1) AND FirstKeyOnlyFilter ()” 将返回符合以下条件的所有键值对： 1、 包含键值的行应该有前缀Row；</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/158/">阅读更多关于一百五十八、HBase过滤器语言示例的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">2 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/150/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百五十、将Java数据对象（JDO）与HBase一起使用" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百五十、将Java数据对象（JDO）与HBase一起使用" href="/docs/bigdata/hbase/150/">一百五十、将Java数据对象（JDO）与HBase一起使用</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">将Java数据对象（JDO）与HBase一起使用 Java数据对象（JDO）是一种访问数据库中持久数据的标准方法，使用普通的旧Java对象（POJO）来表示持久数据。
依赖
此代码示例具有以下依赖项：
1、 HBase0.90.x或更高版本；
2、 commons-beanutils.jar（https://commons.apache.org/）；
3、 commons-pool-1.5.5.jar（https://commons.apache.org/）；
4、 transactional-tableindexedforHBase0.90（https://github.com/hbase-trx/hbase-transactional-tableindexed）；
下载 hbase-jdo
从http://code.google.com/p/hbase-jdo/下载代码。
JDO示例 此示例使用JDO创建一个表和一个索引，在表中插入行，获取行，获取列值，执行查询以及执行一些其他HBase操作。
1package com.apache.hadoop.hbase.client.jdo.examples; 2import java.io.File; 3import java.io.FileInputStream; 4import java.io.InputStream; 5import java.util.Hashtable; 6import org.apache.hadoop.fs.Path; 7import org.apache.hadoop.hbase.client.tableindexed.IndexedTable; 8import com.apache.hadoop.hbase.client.jdo.AbstractHBaseDBO; 9import com.apache.hadoop.hbase.client.jdo.HBaseBigFile; 10import com.apache.hadoop.hbase.client.jdo.HBaseDBOImpl; 11import com.apache.hadoop.hbase.client.jdo.query.DeleteQuery; 12import com.apache.hadoop.hbase.client.jdo.query.HBaseOrder; 13import com.apache.hadoop.hbase.client.jdo.query.HBaseParam; 14import com.apache.hadoop.hbase.client.jdo.query.InsertQuery; 15import com.apache.hadoop.hbase.client.jdo.query.QSearch; 16import com.apache.hadoop.hbase.client.jdo.query.SelectQuery; 17import com.apache.hadoop.hbase.client.jdo.query.UpdateQuery; 18/** 19 * Hbase JDO Example. 20 * 21 * dependency library. 22 * - commons-beanutils.jar 23 * - commons-pool-1.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/150/">阅读更多关于一百五十、将Java数据对象（JDO）与HBase一起使用的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/141/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十一、HBase方案：在Amazon S3上保护应用程序数据集" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十一、HBase方案：在Amazon S3上保护应用程序数据集" href="/docs/bigdata/hbase/141/">一百四十一、HBase方案：在Amazon S3上保护应用程序数据集</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">方案：在Amazon S3上保护应用程序数据集 此HBase方案描述了假设的零售业务如何使用备份来保护应用程序数据, 然后在失败后还原数据集。
HBase 管理团队使用备份集来存储一组表中的数据, 它们具有一个名为绿色的应用程序的相关信息。在此示例中, 一个表包含交易记录, 另一张包含客户详细信息。需要备份这两个表并作为一个组进行恢复。
管理团队还希望确保自动进行每日备份。
以下是用于备份绿色应用程序的数据并稍后恢复数据的命令的步骤和示例的概述。以HBase超级用户身份登录时，将运行所有命令。
创建名为green_set的备份集作为transactions表和customer表的别名。备份集可用于所有操作，以避免键入每个表名。备份集名称区分大小写，应仅使用可打印字符且和不带空格的格式生成。 1 $ hbase backup set add green_set transactions 2 $ hbase backup set add green_set customer green_set数据的第一个备份必须是完整备份。以下命令示例显示如何将凭据传递到Amazon S3并使用s3a：前缀指定文件系统。 1 $ ACCESS_KEY=ABCDEFGHIJKLMNOPQRST 2 $ SECRET_KEY=123456789abcdefghijklmnopqrstuvwxyzABCD 3 $ sudo -u hbase hbase backup create full\ 4 s3a://$ACCESS_KEY:SECRET_KEY@prodhbasebackups/backups -s green_set 应根据计划运行增量备份，以确保在发生灾难时进行必要的数据恢复。在这家零售公司，HBase管理团队决定自动每日备份以充分保护数据。团队决定他们可以通过修改在/etc/crontab中定义的现有Cron作业来实现此目的。因此，IT通过添加以下行来修改Cron作业： 1 @daily hbase hbase backup create incremental s3a://$ACCESS_KEY:$SECRET_KEY@prodhbasebackups/backups -s green_set 失败性IT事件会禁用绿色应用程序使用的生产群集。备份群集的HBase系统管理员必须将green_set数据集还原到最接近恢复目标的时间点。
如果备份HBase群集的管理员具有可访问记录中具有相关详细信息的备份ID，则可以绕过以下使用该hdfs dfs -ls命令搜索和手动扫描备份ID列表的搜索。请考虑在环境中的生产群集外部持续维护和保护备份ID的详细日志。
管理员在存储备份的目录上运行以下命令，以在控制台上打印成功备份ID的列表： 1 hdfs dfs -ls -t /prodhbasebackups/backups 管理员扫描列表以查看在最接近恢复目标的日期和时间创建的备份。为此，管理员将恢复时间点的日历时间戳转换为Unix时间，因为备份ID是用Unix时间唯一标识的。备份ID按反向时间顺序列出，这意味着最先出现的最新成功备份。管理员注意到命令输出中的以下行与需要还原的green_set备份相对应： 1 /prodhbasebackups/backups/backup_1467823988425 管理员恢复green_set调用备份ID和-overwrite选项。-overwrite选项截断目标中的所有现有数据，并使用备份数据集中的数据填充表。如果没有此标志，备份数据将附加到目标中的现有数据。在这种情况下，管理员决定覆盖数据，因为它已损坏。 1 $ sudo -u hbase hbase restore -s green_set \ 2 s3a://$ACCESS_KEY:$SECRET_KEY@prodhbasebackups/backups backup_1467823988425 \ -overwrite</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/145/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十五、HBase容量规划" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十五、HBase容量规划" href="/docs/bigdata/hbase/145/">一百四十五、HBase容量规划</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HBase容量规划 在设计分布式系统部署时，必须执行一些基本的数学严谨性，以确保在给定系统的数据和软件要求的情况下有足够的计算能力。对于此功能，在估计某些备份和还原实施的性能时，网络容量的可用性是最大的瓶颈。第二个最昂贵的功能是可以读/写数据的速度。
完全备份 要估计完整备份的持续时间，我们必须了解调用的一般操作：
每个RegionServer上的预写日志滚动：每个RegionServer并行运行几十秒。相对于每个RegionServer的负载。 获取表格的HBase快照：几十秒。相对于构成表的区域和文件的数量。 将快照导出到目标：请参阅下文。相对于数据的大小和到到目标的网络带宽。 为了估计最后一步将花费多长时间，我们必须对硬件做出一些假设。请注意，这些对您的系统来说并不准确 – 这些是您或您的管理员为您的系统所知的数字。假设在单个节点上从HDFS读取数据的速度上限为80MB / s（在该主机上运行的所有Mapper上），现代网络接口控制器（NIC）支持10Gb / s，架顶式交换机可以处理40Gb / s，集群之间的WAN为10Gb / s。这意味着您只能以1.25GB / s的速度将数据发送到远程控制器 – 这意味着参与ExportSnapshot的16个节点（1.25 * 1024 / 80 = 16）应该能够完全饱和集群之间的链接。由于群集中有更多节点，我们仍然可以使网络饱和，但对任何一个节点的影响较小，这有助于确保本地SLA。如果快照的大小是10TB，这将完全备份将花费2.5小时（10 * 1024 / 1.25 / (60 * 60) = 2.23hrs）
作为一般性声明，本地群集与远程存储之间的WAN带宽很可能是完全备份速度的最大瓶颈。
当考虑将备份的计算影响限制为“生产系统”时，可以使用可选的命令行参数对hbase backup create: -b、-w、-q进行重用。该-b选项定义每个worker（Mapper）写入数据的带宽。该-w参数限制了在DistCp作业中生成的工作者数量。该-q允许指定的YARN队列可以可以限制生成worker的特定节点——这可以隔离备份工人执行复制到一组非关键节点。将-b和-w选项与前面的公式关联起来：-b用于限制每个节点读取80MB/s的数据，-w用于限制作业产生16个worker任务。
增量备份 就像我们为完整备份所做的那样，我们必须了解增量备份过程，以估计其运行时间和成本。
识别自上次完全备份或增量备份以来的新预写日志：可忽略不计。来自备份系统表的Apriori知识。 读取，过滤和写入“最小化”HFile相当于WAL：以写入数据的速度为主。相对于HDFS的写入速度。 将HFiles分配到目的地：见上文。 对于第二步，该操作的主要成本是重写数据（假设WAL中的大部分数据被保留）。在这种情况下，我们可以假设每个节点的聚合写入速度为30MB / s。继续我们的16节点集群示例，这将需要大约15分钟来执行50GB数据（50 * 1024/60/60 = 14.2）的此步骤。启动DistCp MapReduce作业的时间可能会占据复制数据所需的实际时间（50 / 1.25 = 40秒）并且可以忽略。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/144/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十四、HBase关于文件系统增长的警告" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十四、HBase关于文件系统增长的警告" href="/docs/bigdata/hbase/144/">一百四十四、HBase关于文件系统增长的警告</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">关于文件系统增长的警告 需要提醒的是，增量备份是通过保留HBase主要用于数据持久性的预写日志来实现的。因此，为确保需要包含在备份中的所有数据在系统中仍然可用，HBase备份和还原功能将保留自上次备份以来的所有预写日志，直到执行下一个增量备份。
与HBase快照一样，对于高容量表，这可能对HBase的HDFS使用产生预期的巨大影响。注意启用和使用备份和还原功能，尤其要注意在未主动使用备份会话时删除备份会话。
对于保留的用于备份和恢复的预写日志，惟一的自动上限是基于hbase:backup system表的TTL，在撰写本文档时，这是无限的（备份表项永远不会自动删除）。这要求管理员按照计划执行备份，该计划的频率相对于HDFS上的可用空间量（例如，较少的可用HDFS空间需要更积极的备份合并和删除）。提醒一下，可以使用HBase shell中的alter命令在hbase:backup表上更改TTL 。在系统表存在后修改hbase-site.xml中的配置属性hbase.backup.system.ttl是无效的。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/143/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十三、HBase增量备份和还原的技术细节" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十三、HBase增量备份和还原的技术细节" href="/docs/bigdata/hbase/143/">一百四十三、HBase增量备份和还原的技术细节</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">增量备份和还原的技术细节 与以前尝试使用串行备份和还原解决方案（例如仅使用HBase导出和导入API的方法）相比，HBase增量备份可以更有效地捕获HBase表映像。增量备份使用“预写日志（WAL）”来捕获自上次备份创建以来的数据更改。在所有RegionServers上执行WAL roll（创建新的WAL）以跟踪需要在备份中的WAL。
创建增量备份映像后，源备份文件通常与数据源位于同一节点上。类似于DistCp（分布式副本）工具的过程用于将源备份文件移动到目标文件系统。当表还原操作启动时，启动两个步骤的进程。首先，从完整备份映像恢复完整备份。其次，来自上次完全备份和正在恢复的增量备份之间的增量备份的所有WAL文件都将转换为HFiles，HBase批量加载实用程序会自动将其导入为表中的已还原数据。
您只能在实时的HBase群集上进行还原，因为必须重新分发数据才能成功完成还原操作。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/147/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十七、HBase同步复制" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十七、HBase同步复制" href="/docs/bigdata/hbase/147/">一百四十七、HBase同步复制</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HBase同步复制背景 HBase中的当前的异步复制。因此，如果主集群崩溃，则从属集群可能没有最新数据。如果用户想要强一致性，那么他们就无法切换到从属集群。
设计 因初次访问，为防止爬虫和人机识别，请关注微信公众号，回复:‘验证码‘获取验证码来解锁全文 解锁内容 请参阅HBASE-19064上的设计文档
运行和维护 Case.1设置两个同步复制集群
在源集群和对等集群中添加同步对等体。 对于源集群：
1hbase&gt; add_peer &#39;1&#39;, CLUSTER_KEY =&gt; &#39;lg-hadoop-tst-st01.bj:10010,lg-hadoop-tst-st02.bj:10010,lg-hadoop-tst-st03.bj:10010:/hbase/test-hbase-slave&#39;, REMOTE_WAL_DIR=&gt;&#39;hdfs://lg-hadoop-tst-st01.bj:20100/hbase/test-hbase-slave/remoteWALs&#39;, TABLE_CFS =&gt; {&#34;ycsb-test&#34;=&gt;[]} 对于对等集群：
1hbase&gt; add_peer &#39;1&#39;, CLUSTER_KEY =&gt; &#39;lg-hadoop-tst-st01.bj:10010,lg-hadoop-tst-st02.bj:10010,lg-hadoop-tst-st03.bj:10010:/hbase/test-hbase&#39;, REMOTE_WAL_DIR=&gt;&#39;hdfs://lg-hadoop-tst-st01.bj:20100/hbase/test-hbase/remoteWALs&#39;, TABLE_CFS =&gt; {&#34;ycsb-test&#34;=&gt;[]} 对于同步复制，当前实现要求源和对等集群具有相同的对等ID。另一件需要注意的事情是：对等体不支持集群级，命名空间级或cf级复制，现在只支持表级复制。
将对等集群转换为STANDBY状态 1 hbase&gt; transit_peer_sync_replication_state &#39;1&#39;, &#39;STANDBY&#39; 将源群集转换为ACTIVE状态 1 hbase&gt; transit_peer_sync_replication_state &#39;1&#39;, &#39;ACTIVE&#39; 现在，已成功设置同步复制。HBase客户端只能请求源集群，如果请求到对等集群，则现在处于STANDBY状态的对等集群将拒绝读/写请求。
Case.2备用集群崩溃时的操作方法
如果备用群集已崩溃，则无法为活动群集写入远程WAL。所以我们需要将源集群转移到DOWNGRANDE_ACTIVE状态，这意味着源集群将不再写任何远程WAL，但正常复制（异步复制）仍然可以正常工作，它会对新写入的WAL进行排队，但是复制块直到对等集群返回。
1hbase&gt; transit_peer_sync_replication_state &#39;1&#39;, &#39;DOWNGRADE_ACTIVE&#39; 一旦对等集群返回，我们就可以将源集群转移到ACTIVE，以确保复制是同步的。
1hbase&gt; transit_peer_sync_replication_state &#39;1&#39;, &#39;ACTIVE&#39; Case.3活动集群崩溃时的操作方法
如果活动集群已崩溃（现在可能无法访问），那么让我们将备用集群转移到DOWNGRANDE_ACTIVE状态，之后，我们应该将所有请求从客户端重定向到DOWNGRADE_ACTIVE集群。
1hbase&gt; transit_peer_sync_replication_state &#39;1&#39;, &#39;DOWNGRADE_ACTIVE&#39; 如果崩溃的集群再次返回，我们只需要将其直接转移到STANDBY。否则，如果将集群传输到DOWNGRADE_ACTIVE，则原始ACTIVE群集可能具有与当前ACTIVE集群相比的冗余数据。因为我们设计的是同时编写源集群WAL和远程集群WAL，所以源集群WALs可能比远程集群具有更多数据，这导致数据不一致。将ACTIVE转换为STANDBY的过程没有问题，因为我们将跳过重放原始的WAL。
1hbase&gt; transit_peer_sync_replication_state &#39;1&#39;, &#39;STANDBY&#39; 然后，我们现在可以将DOWNGRADE_ACTIVE集群提升为ACTIVE，以确保复制是同步的。
1hbase&gt; transit_peer_sync_replication_state &#39;1&#39;, &#39;ACTIVE&#39;</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/146/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十六、HBase备份和还原实用程序的限制" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十六、HBase备份和还原实用程序的限制" href="/docs/bigdata/hbase/146/">一百四十六、HBase备份和还原实用程序的限制</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HBase备份和还原实用程序的限制 串行备份操作
备份操作不能同时运行。操作包括创建，删除，还原和合并等操作。仅支持一个活动备份会话。HBASE-16391 将引入多备份会话支持。
无法取消备份
备份和还原操作都无法取消。（HBASE-15997，HBASE-15998）。取消备份的解决方法是终止客户端备份命令（control-C），确保已退出所有相关的MapReduce作业，然后运行该hbase backup repair命令以确保系统备份元数据一致。
备份只能保存到单个位置
将备份信息复制到多个位置是留给用户的练习。HBASE-15476将引入本质上指定多备份目标的功能。
需要HBase超级用户访问权限
只允许HBase超级用户（例如hbase）可以执行备份/恢复，这可能会对共享HBase安装造成问题。当前的缓解措施需要与系统管理员协调，以构建和部署备份和还原策略（HBASE-14138）。
备份还原是一种在线操作
要从备份执行还原，它需要HBase集群在线作为当前实现（HBASE-16573）的警告。
某些操作可能会失败并需要重新运行
HBase备份功能主要由客户端驱动。虽然HBase连接中内置了标准的HBase重试逻辑，但执行操作中的持久性错误可能会传播回客户端（例如，由于区域拆分导致的快照失败）。应将备份实现从客户端移到将来的ProcedureV2框架中，这将为瞬态/可重试故障提供额外的稳健性。该hbase backup repair命令用于纠正系统无法自动检测和恢复的状态。
避免公开API的声明
虽然存在与此功能交互的Java API，并且它的实现与接口分离，但没有足够的严格性来确定它是否正是我们要向用户运送的。因此，它被标记为一个Private受众，期望随着用户开始尝试该功能，将有必要修改兼容性（HBASE-17517）。
缺乏备份和还原的全局指标
单独的备份和还原操作包含有关操作所包含的工作量的指标，但没有集中位置（例如主用户界面），它提供信息用于消费（HBASE-16565）。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">6 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/149/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十九、HBase：REST服务器" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十九、HBase：REST服务器" href="/docs/bigdata/hbase/149/">一百四十九、HBase：REST服务器</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">REST REST代表状态转移，它于2000年在Roy Fielding的博士论文中引入，他是HTTP规范的主要作者之一。
REST本身超出了本文档的范围，但通常，REST允许通过与URL本身绑定的API进行客户端-服务器交互。本节讨论如何配置和运行HBase附带的REST服务器，该服务器将HBase表，行，单元和元数据作为URL指定的资源公开。
启动和停止REST服务器 包含的REST服务器可以作为守护程序运行，该守护程序启动嵌入式Jetty servlet容器并将servlet部署到其中。使用以下命令之一在前台或后台启动REST服务器。端口是可选的，默认为8080。
1# Foreground 2$ bin/hbase rest start -p &lt;port&gt; 3# Background, logging to a file in $HBASE_LOGS_DIR 4$ bin/hbase-daemon.sh start rest -p &lt;port&gt; 要停止REST服务器，请在前台运行时使用Ctrl-C，如果在后台运行则使用以下命令。
1$ bin/hbase-daemon.sh stop rest 配置REST服务器和客户端 有关为SSL配置REST服务器和客户端以及为REST服务器配置doAs模拟的信息，请参阅配置Thrift网关以代表客户端进行身份验证以及Securing Apache HBase章节的其他部分。
使用REST端点 以下示例使用占位符服务器http://example.com:8000，并且可以使用curl或wget命令运行以下命令。您可以通过不为纯文本添加头信息来请求纯文本(默认)，XML或JSON输出，或者为XML添加头信息“Accept：text / xml”，为JSON添加“Accept：application / json”或为协议缓冲区添加“Accept: application/x-protobuf”。
除非指定，否则使用GET请求进行查询，PUT或POST请求进行创建或修改，DELETE用于删除。
群集范围的端点
“` “Accept: text/xml” \
“`
“` “Accept: text/xml” \
“`
“` “Accept: text/xml” \
“`
端点 HTTP动词 描述 示例 /version/cluster
GET
在此群集上运行的HBase版本
/status/cluster</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/149/">阅读更多关于一百四十九、HBase：REST服务器的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/142/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十二、HBase备份数据的安全性" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十二、HBase备份数据的安全性" href="/docs/bigdata/hbase/142/">一百四十二、HBase备份数据的安全性</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">备份数据的安全性 使用此功能可以将数据复制到远程位置，需要花点时间清楚地说明数据安全性存在的程序问题。与HBase复制功能一样，备份和还原提供了将数据从公司边界内部自动复制到该边界之外的某个系统的构造。在存储具有备份和还原功能的敏感数据时（更不用说从HBase中提取数据的任何功能），发送数据的位置都经过安全审核以确保只有经过身份验证的用户才能访问数据。
例如，对于上一节中将数据备份到S3的示例，最重要的是将适当的权限分配给S3存储桶以确保仅允许最小的一组授权用户访问该数据。由于不再通过HBase访问数据及其身份验证和授权控制，因此我们必须确保存储该数据的文件系统提供相当级别的安全性。这是用户必须自己实施的手动步骤。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">2 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/148/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十八、Apache HBase API" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十八、Apache HBase API" href="/docs/bigdata/hbase/148/">一百四十八、Apache HBase API</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">Apache HBase API 本章提供有关使用HBase本机API执行操作的信息。此信息并非详尽无遗，除了User API Reference之外，还提供了快速参考。此处的示例不全面，仅用于说明目的。
Apache HBase也适用于多个外部API。有关更多信息，请参阅Apache HBase外部API（将在下一节的内容中介绍）。
示例 使用Java创建、修改和删除表：
1package com.example.hbase.admin; 2import java.io.IOException; 3import org.apache.hadoop.conf.Configuration; 4import org.apache.hadoop.fs.Path; 5import org.apache.hadoop.hbase.HBaseConfiguration; 6import org.apache.hadoop.hbase.HColumnDescriptor; 7import org.apache.hadoop.hbase.HConstants; 8import org.apache.hadoop.hbase.HTableDescriptor; 9import org.apache.hadoop.hbase.TableName; 10import org.apache.hadoop.hbase.client.Admin; 11import org.apache.hadoop.hbase.client.Connection; 12import org.apache.hadoop.hbase.client.ConnectionFactory; 13import org.apache.hadoop.hbase.io.compress.Compression.Algorithm; 14public class Example { 15 private static final String TABLE_NAME = &#34;MY_TABLE_NAME_TOO&#34;; 16 private static final String CF_DEFAULT = &#34;DEFAULT_COLUMN_FAMILY&#34;; 17 public static void createOrOverwrite(Admin admin, HTableDescriptor table) throws IOException { 18 if (admin.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/148/">阅读更多关于一百四十八、Apache HBase API的内容。</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/140/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百四十、HBase备份与还原的最佳做法" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百四十、HBase备份与还原的最佳做法" href="/docs/bigdata/hbase/140/">一百四十、HBase备份与还原的最佳做法</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">制定恢复策略并对其进行测试。 在依赖生产环境的备份和还原策略之前，请确定必须如何执行备份，更重要的是要确定必须如何执行还原。测试计划以确保它是可行的。至少，从不同群集或服务器上的生产群集存储备份数据。要进一步保护数据，请使用位于不同物理位置的备份位置。
如果由于计算机系统问题导致主生产群集上的数据丢失不可恢复，则可以从同一站点的其他群集或服务器还原数据。但是，破坏整个站点的灾难使本地存储的备份变得毫无用处。考虑存储备份数据和必要资源（计算能力和操作员专业技能），以便在远离生产站点的站点上还原数据。如果在整个主要站点（fire，earthquake等）发生灾难的情况下，远程备份站点可能非常有价值。
首先保护完整备份映像 因初次访问，为防止爬虫和人机识别，请关注微信公众号，回复:‘验证码‘获取验证码来解锁全文 解锁内容 作为基准，您必须至少完成一次HBase数据的完整备份，然后才能依赖增量备份。完整备份应存储在源群集之外。要确保完整的数据集恢复，您必须运行恢复实用程序，并提供恢复基准完全备份的选项。完整备份是数据集的基础。在还原操作期间，增量备份数据应用于完整备份之上，以使您返回上次执行备份的时间点。
定义和使用作为整个数据集的逻辑子集的表组和备份集 您可以将表分组到称为备份集的对象中。当您拥有一组您希望重复备份或还原的特定表组时，备份集可以节省时间。
创建备份集时，可以键入要包括在组中的表名。备份集不仅包括相关表组，还保留HBase备份元数据。之后，您可以调用备份集名称来指示哪些表适用于命令执行，而不是单独输入所有表名。
记录备份和还原策略，最好记录有关每个备份的信息 记录整个过程，以便知识库可以在员工离职后转移给新的管理员。作为额外的安全预防措施，还要记录每个备份的数据的日历日期、时间以及其他相关详细信息。在源群集发生故障或主站点灾难的情况下，此元数据可能有助于查找特定数据集。维护所有文档的重复副本：一个副本位于生产集群站点，另一个副本位于备份位置，或者任何管理员可以从生产集群远程访问的地方。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/131/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百三十一、HBase恢复备份映像" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百三十一、HBase恢复备份映像" href="/docs/bigdata/hbase/131/">一百三十一、HBase恢复备份映像</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">恢复备份映像 以HBase超级用户身份运行以下命令。您只能在正在运行的HBase集群上还原备份，因为必须将数据重新分发到RegionServers才能成功完成操作。
1hbase restore &lt;backup_path&gt; &lt;backup_id&gt; 位置命令行参数 # BACKUP_PATH
该BACKUP_PATH参数指定的地方用来存储备份映像文件系统的完整URI。有效的前缀是hdfs：，webhdfs：，gpfs：和s3fs :
备份ID
唯一标识要还原的备份映像的备份ID。
命名命令行参数 # -t&lt;table_name [，table_name]&gt;
要还原的以逗号分隔的表列表。有关对表集合执行操作的详细信息，请参阅备份集。与-s选项互斥；其中一个命名选项是必需的。
-s&lt;backup_set_name&gt;
根据备份集确定要备份的表。有关备份集的用途和用法，请参阅使用备份集。与-t选项互斥。
-q
（可选）允许指定应在其中执行创建备份的MapReduce作业的YARN队列的名称。此选项有助于防止备份任务从其他高重要性MapReduce作业中窃取资源。
-C
（可选）执行还原的干运行（dry-run）。会检查操作，但不执行。
-m&lt;target_tables&gt;
（可选）要还原到的以逗号分隔的表列表。如果未提供此选项，则使用原始表名。提供此选项时，必须提供与-t选项中相同数量的条目。
-o
（可选）如果表已存在，则覆盖还原的目标表。
用法示例 1hbase backup restore /tmp/backup_incremental backupId_1467823988425 -t mytable1,mytable2 此命令还原增量备份映像的两个表。在此示例中: · tmp/backup_incremental 是包含备份映像的目录的路径。· backupId_1467823988425 是备份 ID。· mytable1 和 mytable2 是要还原的备份映像中的表的名称。
此命令将恢复增量备份映像的两个表。在此示例中：
/tmp/backup_incremental是包含备份映像的目录的路径。 backupId_1467823988425是备份ID。 mytable1和mytable2是要还原的备份映像中的表的名称。</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="安图新"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="安图新" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023年10月21日</span>
<span class="hb-blog-post-reading-time">1 分钟阅读</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">系列教程</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/135/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="一百三十五、HBase管理备份历史记录" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="一百三十五、HBase管理备份历史记录" href="/docs/bigdata/hbase/135/">一百三十五、HBase管理备份历史记录</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">管理备份历史记录 此命令显示备份会话日志。每个会话的信息包括备份ID、类型（完整或增量），备份中的表、状态以及开始和结束时间。使用可选的-n参数指定要显示的备份会话数。
1$ hbase backup history &lt;backup_id&gt; 位置命令行参数 # backup_id
通过查看进度信息指定要监视的备份，backupId要区分大小写。
命名命令行参数 # -n&lt;num_records&gt;
（可选）最大备份记录数（默认值：10）。
-p&lt;backup_root_path&gt;
存储备份映像的完整文件系统URI。
-s&lt;backup_set_name&gt;
要获取其历史记录的备份集的名称。与-t选项互斥。
-t&lt;table_name&gt;
获取历史记录的表的名称。与-s选项互斥。
用法示例 1$ hbase backup history 2$ hbase backup history -n 20 3$ hbase backup history -t WebIndexRecords</div></div></div></div></div></div></div><div class="border-1"><nav class="hb-blog-pagination mb-3" aria-label="Page navigation"><ul class="pagination flex-wrap justify-content-center"><li class="page-item"><a class="page-link" href="/archives/2023/" aria-label="前一页"><span aria-hidden="true">«</span></a></li><li class="page-item"><a class="page-link" href="/archives/2023/">1</a></li><li class="page-item active"><a class="page-link" href="/archives/2023/page/2/">2</a></li><li class="page-item"><a class="page-link" href="/archives/2023/page/3/">3</a></li><li class="page-item"><a class="page-link" href="/archives/2023/page/4/">4</a></li><li class="page-item disabled"><a class="page-link" href="#">...</a></li><li class="page-item"><a class="page-link" href="/archives/2023/page/34/">34</a></li><li class="page-item"><a class="page-link" href="/archives/2023/page/3/" aria-label="下一页"><span aria-hidden="true">»</span></a></li></ul></nav></div></div></div><footer class="hb-footer pt-4 pt-md-5 pb-2 pb-md-3 bg-body-tertiary"><div class="container-fluid container-lg px-4 px-md-3"><div class="row"><div class="hb-footer-site-info col mb-2 text-center"><div class="h5">程序员安仔</div><ul class="list-unstyled small mb-2"><li class="mt-2">一个只爱折腾技术的普通人</li><li class="mt-2">粤ICP备2023148789号</li><li class="mt-2">Built with ❤️ from <a class="text-body-emphasis" href="https://gohugo.io/" target="_blank" rel="external" title="Hugo">Hugo</a>, <a class="text-body-emphasis" href="https://hugomods.com/" target="_blank" rel="external" title="HugoMods">HugoMods</a> and <a class="text-body-emphasis" href="https://hbstack.dev/" target="_blank" rel="external" title="HB Framework">HB Framework</a>.</li></ul><div class="hb-footer-socials d-flex mb-2 justify-content-center flex-wrap"><a class="hb-social p-2" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg></a><a class="hb-social p-2" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:%!s(bool=true)" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="hb-social p-2" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></a><a class="hb-social p-2" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="知乎"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:#056de8" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg></a></div></div></div></div></footer><script src="/js/hb.50d14a1b7f62235386f6d49a5bb9495ff4747f5a972f615733af6a9d8fa8d1f8.js" integrity="sha256-UNFKG39iI1OG9tSaW7lJX/R0f1qXL2FXM69qnY+o0fg=" defer=""></script><script src="/js/search.911cd44dc51ff88f213f130c90e81cf0c55b4c77ebc811c692773b495a564198.js" defer=""></script><script>"serviceWorker"in navigator&&window.addEventListener("DOMContentLoaded",function(){navigator.serviceWorker.register("/sw.js")})</script></body></html>