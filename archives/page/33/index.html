<!DOCTYPE html><html data-bs-theme="light" itemscope="" itemtype="http://schema.org/WebPage" lang="zh-hans"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="manifest" href="https://www.hotmindshare.com/manifest.webmanifest"/><link rel="alternate" type="application/rss+xml" href="https://www.hotmindshare.com/archives/index.xml"/><meta name="description" content="å½’æ¡£"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_16x16_resize_box_3.png" sizes="16x16" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_32x32_resize_box_3.png" sizes="32x32" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_150x150_resize_box_3.png" sizes="150x150" type="image/png"/><link rel="apple-touch-icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_180x180_resize_box_3.png" sizes="180x180" type="image/png"/><link rel="icon" href="/images/logo_hu3f5eb531558986e612421c7146e04118_941594_192x192_resize_box_3.png" sizes="192x192" type="image/png"/><link rel="mask-icon" href="/mask-icon.svg" color="#000000"/><meta property="og:title" content="å½’æ¡£"/><meta property="og:description" content="ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº"/><meta property="og:type" content="website"/><meta property="og:url" content="https://www.hotmindshare.com/archives/"/><meta itemprop="name" content="å½’æ¡£"/><meta itemprop="description" content="ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="å½’æ¡£"/><meta name="twitter:description" content="ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº"/><title>å½’æ¡£ - 33/40 - ç¨‹åºå‘˜å®‰ä»”</title>
<link href="/css/hb.3c67f855ccf80f01a3923f0fd3bd3203f1b4e2f740e3ce444e0ccab10e418d07.css" rel="stylesheet"/><script src="/js/init.577d4e90bff5601d5756fcf799b0e53568bf56cea3b80fe43f66c9d365e8100c.js" integrity="sha256-V31OkL/1YB1XVvz3mbDlNWi/Vs6juA/kP2bJ02XoEAw="></script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?1cbf85f7bc76266af7bdac71374879bf",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><link rel="stylesheet" href="/css/search.ee67fb063f2e4be8eff1be9d9806279c3c3d43570b6266c759281faac3804b11.css"/></head><body><noscript><div class="alert alert-danger text-center rounded-0" role=alert><svg aria-hidden="true" class="bi bi-exclamation-square-fillbi bi-exclamation-square-fill hi-svg-inline me-2" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm6 4c.535.0.954.462.9.995l-.35 3.507a.552.552.0 01-1.1.0L7.1 4.995A.905.905.0 018 4m.002 6a1 1 0 110 2 1 1 0 010-2"/></svg>ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ JavaScriptã€‚</div></noscript><header class="hb-header"><nav class="hb-header-nav navbar navbar-expand-lg"><div class="container-fluid"><a class="navbar-brand d-flex align-items-center" href="/"><img src="https://www.hotmindshare.com/images/logo_hu3f5eb531558986e612421c7146e04118_941594_0x64_resize_box_3.png" alt="Logo" width="64" height="64" class="hb-header-logo d-inline-block align-text-top me-2"/>ç¨‹åºå‘˜å®‰ä»”</a><div class="d-flex order-5"><div class="search-modal-toggle hb-header-search-form position-relative d-flex ms-lg-1"><button type="button" class="hb-header-search-icon border-0 bg-transparent px-2" aria-label="Toggle search">
<svg aria-hidden="true" class="bi bi-searchbi bi-search hi-svg-inline" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M11.742 10.344a6.5 6.5.0 10-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 001.415-1.414l-3.85-3.85a1.007 1.007.0 00-.115-.1zM12 6.5a5.5 5.5.0 11-11 0 5.5 5.5.0 0111 0"></path></svg></button>
<input class="form-control rounded-5 d-none d-lg-block ms-lg-1" id="hb-header-search-input" placeholder="æœç´¢"/>
<span class="hb-header-search-keys position-absolute d-none d-lg-block"><kbd>CTRL</kbd>
<kbd>K</kbd></span></div><button class="navbar-toggler border-0 shadow-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#hb-header-content" aria-controls="hb-header-content" aria-label="Toggle navigation"><svg aria-hidden="true" class="bi bi-three-dotsbi bi-three-dots hi-svg-inline" fill="currentcolor" height="1.25em" viewBox="0 0 16 16" width="1.25em" xmlns="http://www.w3.org/2000/svg"><path d="M3 9.5a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3m5 0a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></button></div><div class="offcanvas offcanvas-lg offcanvas-end" tabindex="-1" id="hb-header-content" aria-labelledby="hb-header-content-label"><div class="offcanvas-header"><h5 class="offcanvas-title" id="hb-header-content-label">ç¨‹åºå‘˜å®‰ä»”</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button></div><div class="offcanvas-body"><ul class="hb-header-menus navbar-nav flex-row flex-wrap"><li class="hb-header-menu nav-item col-6 col-lg-auto"><a class="nav-link" href="https://www.hotmindshare.com/docs/"><svg aria-hidden="true" class="bi bi-bookbi bi-book hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5.0 000 2.5v11a.5.5.0 00.707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5.0 00.78.0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5.0 0016 13.5v-11a.5.5.0 00-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"></path></svg>æŠ€æœ¯æ•™ç¨‹</a></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto"><a class="nav-link pe-0 d-inline-flex align-items-center" href="/interview/"><svg aria-hidden="true" class="bi bi-journal-bookmark-fillbi bi-journal-bookmark-fill hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 1h6v7a.5.5.0 01-.757.429L9 7.083 6.757 8.43A.5.5.0 016 8z"></path><path d="M3 0h10a2 2 0 012 2v12a2 2 0 01-2 2H3a2 2 0 01-2-2v-1h1v1a1 1 0 001 1h10a1 1 0 001-1V2a1 1 0 00-1-1H3A1 1 0 002 2v1H1V2a2 2 0 012-2"></path><path d="M1 5v-.5a.5.5.0 011 0V5h.5a.5.5.0 010 1h-2a.5.5.0 010-1zm0 3v-.5a.5.5.0 011 0V8h.5a.5.5.0 010 1h-2a.5.5.0 010-1zm0 3v-.5a.5.5.0 011 0v.5h.5a.5.5.0 010 1h-2a.5.5.0 010-1z"></path></svg>ğŸ”¥é¢è¯•æŒ‡å—</a>
<a class="nav-link ps-0 d-inline-flex" href="#" id="header-menu-interview" role="button" data-bs-toggle="dropdown" aria-expanded="false"><span class="visually-hidden">Toggle Dropdown</span><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67z"></path></svg></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby="header-menu-interview" data-bs-popper="none"><li class="column-span-all"><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/interview/v4/"><div class="dropdown-item-content"><div class="dropdown-item-title">ç»¼åˆé¢è¯•æŒ‡å—ç¬¬4ç‰ˆ</div></div></a></li></ul></li><li class="hb-header-menu dropdown nav-item col-12 col-lg-auto active"><a class="nav-link pe-0 d-inline-flex align-items-center active" href="/blog/" aria-current="page"><svg aria-hidden="true" class="hi-svg-inline hb-header-menu-icon me-1" fill="currentcolor" height="1em" viewBox="0 0 512 512" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M192 32c0 17.7 14.3 32 32 32 123.7.0 224 100.3 224 224 0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1.0 224 0c-17.7.0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32 70.7.0 128 57.3 128 128 0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192-17.7.0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5.0 144V368c0 79.5 64.5 144 144 144s144-64.5 144-144-64.5-144-144-144H128v96h16c26.5.0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48V144z"></path></svg>åšå®¢</a>
<a class="nav-link ps-0 d-inline-flex" href="#" id="header-menu-blog" role="button" data-bs-toggle="dropdown" aria-expanded="false"><span class="visually-hidden">Toggle Dropdown</span><svg aria-hidden="true" class="bi bi-chevron-compact-downbi bi-chevron-compact-down hi-svg-inline" fill="currentcolor" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M1.553 6.776a.5.5.0 01.67-.223L8 9.44l5.776-2.888a.5.5.0 11.448.894l-6 3a.5.5.0 01-.448.0l-6-3a.5.5.0 01-.223-.67z"></path></svg></a><ul class="hb-header-submenus dropdown-menu" aria-labelledby="header-menu-blog" data-bs-popper="none"><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/series/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-columnsbi bi-columns hi-svg-inline" fill="currentcolor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v12a1 1 0 01-1 1H1a1 1 0 01-1-1zm8.5.0v8H15V2zm0 9v3H15v-3zm-1-9H1v3h6.5zM1 14h6.5V6H1z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">ä¸“æ </div><p class="dropdown-item-desc mb-0 text-wrap">æ‰€æœ‰ä¸“æ ã€‚</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/authors/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-pencilbi bi-pencil hi-svg-inline" fill="currentcolor" height="2em" style="color:#0f5e97" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M12.146.146a.5.5.0 01.708.0l3 3a.5.5.0 010 .708l-10 10a.5.5.0 01-.168.11l-5 2a.5.5.0 01-.65-.65l2-5a.5.5.0 01.11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5.0 01.5.5v.5h.5a.5.5.0 01.5.5v.5h.293zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5.0 015 12.5V12h-.5a.5.5.0 01-.5-.5V11h-.5a.5.5.0 01-.468-.325z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">ä½œè€…</div><p class="dropdown-item-desc mb-0 text-wrap">ä½œè€…åˆ—è¡¨ã€‚</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/categories/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-folderbi bi-folder hi-svg-inline" fill="currentcolor" height="2em" style="color:orange" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M.54 3.87.5 3a2 2 0 012-2h3.672a2 2 0 011.414.586l.828.828A2 2 0 009.828 3h3.982a2 2 0 011.992 2.181l-.637 7A2 2 0 0113.174 14H2.826A2 2 0 01.835 12.181l-.637-7a1.99 1.99.0 01.342-1.31zM2.19 4a1 1 0 00-.996 1.09l.637 7a1 1 0 00.995.91h10.348a1 1 0 00.995-.91l.637-7A1 1 0 0013.81 4H2.19zm4.69-1.707A1 1 0 006.172 2H2.5a1 1 0 00-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">åˆ†ç±»</div><p class="dropdown-item-desc mb-0 text-wrap">æ‰€æœ‰åˆ†ç±»ã€‚</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center active" href="https://www.hotmindshare.com/archives/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-archivebi bi-archive hi-svg-inline" fill="currentcolor" height="2em" style="color:384955" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M0 2a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1v7.5A2.5 2.5.0 0112.5 15h-9A2.5 2.5.0 011 12.5V5A1 1 0 010 4zm2 3v7.5A1.5 1.5.0 003.5 14h9a1.5 1.5.0 001.5-1.5V5zm13-3H1v2h14zM5 7.5a.5.5.0 01.5-.5h5a.5.5.0 010 1h-5A.5.5.0 015 7.5"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">å½’æ¡£</div><p class="dropdown-item-desc mb-0 text-wrap">æ–‡ç« å½’æ¡£ã€‚</p></div></a></li><li><a class="hb-header-submenu dropdown-item d-flex align-items-center" href="https://www.hotmindshare.com/tags/"><div class="dropdown-item-icon d-flex align-items-center bg-body-secondary bg-gradient rounded me-2 p-2"><svg aria-hidden="true" class="bi bi-tagsbi bi-tags hi-svg-inline" fill="currentcolor" height="2em" style="color:green" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg"><path d="M3 2v4.586l7 7L14.586 9l-7-7zM2 2a1 1 0 011-1h4.586a1 1 0 01.707.293l7 7a1 1 0 010 1.414l-4.586 4.586a1 1 0 01-1.414.0l-7-7A1 1 0 012 6.586z"></path><path d="M5.5 5a.5.5.0 110-1 .5.5.0 010 1m0 1a1.5 1.5.0 100-3 1.5 1.5.0 000 3M1 7.086a1 1 0 00.293.707L8.75 15.25l-.043.043a1 1 0 01-1.414.0l-7-7A1 1 0 010 7.586V3a1 1 0 011-1z"></path></svg></div><div class="dropdown-item-content"><div class="dropdown-item-title mb-1">æ ‡ç­¾</div><p class="dropdown-item-desc mb-0 text-wrap">æ‰€æœ‰æ ‡ç­¾ã€‚</p></div></a></li></ul></li></ul><ul class="hb-header-panel navbar-nav flex-row flex-wrap"><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><hr class="d-lg-none my-2 text-body-50"/></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg><span class="hb-social-text d-lg-none ms-1">Email</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg><span class="hb-social-text d-lg-none ms-1">GitHub</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg><span class="hb-social-text d-lg-none ms-1">RSS</span></a></li><li class="nav-item col-6 col-lg-auto d-flex align-items-center"><a class="hb-social btn btn-link nav-link py-2 px-0 px-lg-2 d-flex justify-content-center align-items-center" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="çŸ¥ä¹"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1em" role="img" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg><span class="hb-social-text d-lg-none ms-1">çŸ¥ä¹</span></a></li><li class="nav-item py-2 py-lg-1 col-12 col-lg-auto"><div class="vr d-none d-lg-flex h-100 mx-lg-2 text-body"></div><hr class="d-lg-none my-2 text-body-50"/></li><li class="theme-toggle nav-item dropdown col-6 col-lg-auto d-flex flex-column justify-content-center"><button class="btn btn-link btn-theme-toggle nav-link py-2 px-0 px-lg-2 d-flex justify-content-start justify-content-lg-center align-items-center" data-style="switch" aria-expanded="false" title="ä¸»é¢˜">
<svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1 theme-toggle-icon" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"></path></svg><span class="d-lg-none ms-1 theme-name">ä¸»é¢˜</span></button><ul class="theme-toggle-menu dropdown-menu dropdown-menu-end"><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="è‡ªåŠ¨" data-bs-theme-value="auto">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-circle-halfbi bi-circle-half hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 15A7 7 0 108 1zm0 1A8 8 0 118 0a8 8 0 010 16"></path></svg></span>è‡ªåŠ¨</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="æš—è‰²" data-bs-theme-value="dark">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-moon-starsbi bi-moon-stars hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278M4.858 1.311A7.269 7.269.0 001.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316.0 005.205-2.162c-.337.042-.68.063-1.029.063-4.61.0-8.343-3.714-8.343-8.29.0-1.167.242-2.278.681-3.286z"></path><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></svg></span>æš—è‰²</button></li><li><button class="theme-toggle-item dropdown-item d-flex align-items-center justify-content-center" data-bs-theme-name="äº®è‰²" data-bs-theme-value="light">
<span class="theme-toggle-item-icon me-1 d-flex align-items-center"><svg aria-hidden="true" class="bi bi-brightness-highbi bi-brightness-high hi-svg-inline my-1" fill="currentcolor" height="1em" viewBox="0 0 16 16" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 11a3 3 0 110-6 3 3 0 010 6m0 1a4 4 0 100-8 4 4 0 000 8M8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0m0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13m8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5M3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8m10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0m-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707M4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"></path></svg></span>äº®è‰²</button></li></ul></li></ul></div></div></div></nav></header><div class="hb-main container"><div class="container-fluid px-0 mb-4"><nav aria-label="breadcrumb"><ol class="hb-breadcrumb breadcrumb"><li class="breadcrumb-item"><a href="/" title="ç¨‹åºå‘˜å®‰ä»”çš„æŠ€æœ¯æ–‡æ¡£/åšå®¢">ä¸»é¡µ</a></li><li class="breadcrumb-item active" aria-current="page"><a href="/archives/" title="å½’æ¡£">å½’æ¡£</a></li></ol></nav></div><div class="archives border-start border-5 ps-4 pt-3 position-relative"><div class="archive border-1"><div class="archive-heading h4 mb-4 border-bottom pb-3 border-2"><a class="text-decoration-none" href="/archives/2023/">2023</a></div><div class="archive-subheading h5 mb-3"><a class="text-decoration-none" href="/archives/2023/10/">åæœˆ</a></div><div class="archive-posts border-top pt-3"><div class="hb-blog-posts row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-3 mb-3"><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/103/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾é›¶ä¸‰ã€HBaseåœ¨çº¿åŒºåŸŸåˆå¹¶" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾é›¶ä¸‰ã€HBaseåœ¨çº¿åŒºåŸŸåˆå¹¶" href="/docs/bigdata/hbase/103/">ä¸€ç™¾é›¶ä¸‰ã€HBaseåœ¨çº¿åŒºåŸŸåˆå¹¶</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åœ¨çº¿åŒºåŸŸåˆå¹¶ Masterå’ŒRegionServeréƒ½å‚ä¸åœ¨çº¿åŒºåŸŸåˆå¹¶äº‹ä»¶ã€‚å®¢æˆ·ç«¯å°†åˆå¹¶RPCå‘é€åˆ°ä¸»æœåŠ¡å™¨ï¼Œç„¶åä¸»æœåŠ¡å™¨å°†è¿™äº›åŒºåŸŸä¸€èµ·ç§»åŠ¨åˆ°è´Ÿè½½è¾ƒé‡çš„åŒºåŸŸæ‰€åœ¨çš„RegionServerã€‚æœ€åï¼Œä¸»æœåŠ¡å™¨å°†åˆå¹¶è¯·æ±‚å‘é€åˆ°è¯¥RegionServerï¼Œç„¶åè¿è¡Œåˆå¹¶ã€‚ä¸åŒºåŸŸæ‹†åˆ†è¿‡ç¨‹ç±»ä¼¼ï¼ŒåŒºåŸŸåˆå¹¶åœ¨RegionServerä¸Šä½œä¸ºæœ¬åœ°äº‹åŠ¡è¿è¡Œã€‚å®ƒå°†åŒºåŸŸåˆ’åˆ†ä¸ºå¤šä¸ªåŒºåŸŸï¼Œç„¶ååˆå¹¶æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä¸¤ä¸ªåŒºåŸŸï¼Œä»hbase:metaä¸­åˆ é™¤åˆå¹¶åŒºåŸŸï¼Œå¹¶å°†åˆå¹¶åçš„åŒºåŸŸæ·»åŠ åˆ°hbase:metaï¼Œåœ¨RegionServerä¸­æ‰“å¼€åˆå¹¶åŒºåŸŸå¹¶å°†åˆå¹¶æŠ¥å‘Šç»™Masterã€‚
HBase shellä¸­çš„åŒºåŸŸåˆå¹¶ç¤ºä¾‹ï¼š
1$ hbase&gt; merge_region &#39;ENCODED_REGIONNAME&#39;, &#39;ENCODED_REGIONNAME&#39; 2$ hbase&gt; merge_region &#39;ENCODED_REGIONNAME&#39;, &#39;ENCODED_REGIONNAME&#39;, true è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶ä¸”åœ¨æ²¡æœ‰ç­‰å¾…åˆå¹¶å®Œæˆçš„æƒ…å†µä¸‹ç«‹å³è°ƒç”¨è¿”å›ã€‚trueä½œä¸ºå¯é€‰çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’å°†å¼ºåˆ¶åˆå¹¶ã€‚é€šå¸¸åªæœ‰ç›¸é‚»çš„åŒºåŸŸå¯ä»¥åˆå¹¶ã€‚è¯¥forceå‚æ•°å°†è¦†ç›–æ­¤è¡Œä¸ºï¼Œä»…ä¾›ä¸“é—¨ä½¿ç”¨ã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/104/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾é›¶å››ã€MEMSTORE" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾é›¶å››ã€MEMSTORE" href="/docs/bigdata/hbase/104/">ä¸€ç™¾é›¶å››ã€MEMSTORE</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">MEMSTORE MemStoreå¯¹Storeè¿›è¡Œå†…å­˜ä¸­ä¿®æ”¹ã€‚ä¿®æ”¹æ˜¯Cells / KeyValuesã€‚å½“è¯·æ±‚åˆ·æ–°æ—¶ï¼Œå½“å‰çš„MemStoreè¢«ç§»åŠ¨åˆ°å¿«ç…§å¹¶è¢«æ¸…é™¤ã€‚HBaseå°†ç»§ç»­å¤„ç†æ¥è‡ªæ–°MemStoreå’Œå¤‡ä»½å¿«ç…§çš„ç¼–è¾‘ï¼Œç›´åˆ°åˆ·æ–°å™¨æŠ¥å‘Šåˆ·æ–°æˆåŠŸä¸ºæ­¢ã€‚æ­¤æ—¶ï¼Œå¿«ç…§å°†è¢«ä¸¢å¼ƒã€‚è¯·æ³¨æ„ï¼Œå½“å‘ç”Ÿåˆ·æ–°æ—¶ï¼Œå±äºåŒä¸€åŒºåŸŸçš„MemStoreå°†å…¨éƒ¨è¢«åˆ·æ–°ã€‚
MemStoreåˆ·æ–° å› åˆæ¬¡è®¿é—®ï¼Œä¸ºé˜²æ­¢çˆ¬è™«å’Œäººæœºè¯†åˆ«ï¼Œè¯·å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œå›å¤:â€˜éªŒè¯ç â€˜è·å–éªŒè¯ç æ¥è§£é”å…¨æ–‡ è§£é”å†…å®¹ # MemStoreåˆ·æ–°å¯ä»¥åœ¨ä¸‹åˆ—ä»»ä½•æ¡ä»¶ä¸‹è§¦å‘ã€‚æœ€å°åˆ·æ–°å•ä½æ˜¯æ¯ä¸ªåŒºåŸŸï¼Œè€Œä¸æ˜¯å•ç‹¬çš„MemStoreçº§åˆ«ã€‚
1ã€ å½“MemStoreè¾¾åˆ°hbase.hregion.memstore.flush.sizeæŒ‡å®šçš„å¤§å°æ—¶ï¼Œå±äºå…¶åŒºåŸŸçš„æ‰€æœ‰MemStoreå°†è¢«åˆ·æ–°åˆ°ç£ç›˜ï¼›
2ã€ å½“æ•´ä½“MemStoreä½¿ç”¨ç‡è¾¾åˆ°hbase.regionserver.global.memstore.upperLimitæŒ‡å®šçš„å€¼æ—¶ï¼Œæ¥è‡ªå„ä¸ªåŒºåŸŸçš„MemStoreå°†è¢«åˆ·æ–°åˆ°ç£ç›˜ä»¥å‡å°‘RegionServerä¸­çš„æ•´ä½“MemStoreä½¿ç”¨é‡åˆ·æ–°é¡ºåºåŸºäºåŒºåŸŸMemStoreä½¿ç”¨çš„é™åºåŒºåŸŸå°†åˆ·æ–°å®ƒä»¬çš„MemStoreï¼Œç›´åˆ°æ•´ä¸ªMemStoreä½¿ç”¨ç‡é™è‡³æˆ–ç¨ä½äºhbase.regionserver.global.memstore.lowerLimitï¼›
3ã€ å½“ç»™å®šåŒºåŸŸæœåŠ¡å™¨çš„WALä¸­çš„WALæ—¥å¿—æ¡ç›®æ•°è¾¾åˆ°hbase.regionserver.max.logsä¸­æŒ‡å®šçš„å€¼æ—¶ï¼Œæ¥è‡ªå„ä¸ªåŒºåŸŸçš„MemStoreså°†è¢«åˆ·æ–°åˆ°ç£ç›˜ä»¥å‡å°‘WALä¸­çš„æ—¥å¿—æ•°é‡åˆ·æ–°é¡ºåºåŸºäºæ—¶é—´é¦–å…ˆåˆ·æ–°å…·æœ‰æœ€æ—©MemStoreçš„åŒºåŸŸï¼Œç›´åˆ°WALè®¡æ•°ä¸‹é™åˆ°hbase.regionserver.max.logsä»¥ä¸‹ï¼›</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/105/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾é›¶äº”ã€Scans" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾é›¶äº”ã€Scans" href="/docs/bigdata/hbase/105/">ä¸€ç™¾é›¶äº”ã€Scans</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">Scans å½“å®¢æˆ·ç«¯é’ˆå¯¹è¡¨å‘å‡ºæ‰«ææ—¶ï¼ŒHBaseä¼šä¸ºæ¯ä¸ªåŒºåŸŸç”Ÿæˆä¸€ä¸ªRegionScannerå¯¹è±¡æ¥æä¾›æ‰«æè¯·æ±‚ã€‚ è¯¥RegionScannerå¯¹è±¡åŒ…å«ä¸€ä¸ªStoreScannerå¯¹è±¡åˆ—è¡¨ï¼Œæ¯åˆ—æ—ä¸€ä¸ªã€‚ æ¯ä¸ªStoreScannerå¯¹è±¡è¿˜åŒ…å«StoreFileScannerå¯¹åº”çš„åˆ—è¡¨ï¼Œå¯¹åº”äºç›¸åº”åˆ—æ—çš„æ¯ä¸ªStoreFileå’ŒHFileï¼Œä»¥åŠMemStoreçš„KeyValueScannerå¯¹è±¡åˆ—è¡¨ã€‚ è¿™ä¸¤ä¸ªåˆ—è¡¨è¢«åˆå¹¶ä¸ºä¸€ä¸ªï¼Œè¯¥åˆ—è¡¨æŒ‰ç…§å‡åºå¯¹åˆ—è¡¨æœ«å°¾çš„MemStoreæ‰«æå¯¹è±¡è¿›è¡Œæ’åºã€‚ å½“ä¸€ä¸ªStoreFileScannerå¯¹è±¡è¢«æ„é€ æ—¶ï¼Œå®ƒä¸ä¸€ä¸ªMultiVersionConcurrencyControlè¯»å–ç‚¹ï¼ˆå³å½“å‰çš„memstoreTSï¼‰ç›¸å…³è”ï¼Œè¿‡æ»¤å‡ºè¯»å–ç‚¹ä¹‹å¤–çš„ä»»ä½•æ–°çš„æ›´æ–°ã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/101/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾é›¶ä¸€ã€HBaseè‡ªå®šä¹‰æ‹†åˆ†ç­–ç•¥" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾é›¶ä¸€ã€HBaseè‡ªå®šä¹‰æ‹†åˆ†ç­–ç•¥" href="/docs/bigdata/hbase/101/">ä¸€ç™¾é›¶ä¸€ã€HBaseè‡ªå®šä¹‰æ‹†åˆ†ç­–ç•¥</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">è‡ªå®šä¹‰æ‹†åˆ†ç­–ç•¥ æ‚¨å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰RegionSplitPolicyï¼ˆHBase 0.94+ï¼‰é‡å†™é»˜è®¤æ‹†åˆ†ç­–ç•¥ã€‚é€šå¸¸ï¼Œè‡ªå®šä¹‰æ‹†åˆ†ç­–ç•¥åº”è¯¥æ‰©å±•HBaseçš„é»˜è®¤æ‹†åˆ†ç­–ç•¥ï¼š IncreasingToUpperBoundRegionSplitPolicyã€‚
è¯¥ç­–ç•¥å¯ä»¥é€šè¿‡HBaseé…ç½®æˆ–è€…ä¹Ÿå¯ä»¥åŸºäºæ¯ä¸ªè¡¨åœ¨å…¨å±€èŒƒå›´å†…è¿›è¡Œè®¾ç½®ã€‚
åœ¨hbase-site.xmlä¸­å…¨å±€é…ç½®æ‹†åˆ†ç­–ç•¥ï¼š
1&lt;property&gt; 2 &lt;name&gt;hbase.regionserver.region.split.policy&lt;/name&gt; 3 &lt;value&gt;org.apache.hadoop.hbase.regionserver.IncreasingToUpperBoundRegionSplitPolicy&lt;/value&gt; 4&lt;/property&gt; ä½¿ç”¨Java APIåœ¨è¡¨ä¸Šé…ç½®æ‹†åˆ†ç­–ç•¥ï¼š
1HTableDescriptor tableDesc = new HTableDescriptor(&#34;test&#34;); 2tableDesc.setValue(HTableDescriptor.SPLIT_POLICY, ConstantSizeRegionSplitPolicy.class.getName()); 3tableDesc.addFamily(new HColumnDescriptor(Bytes.toBytes(&#34;cf1&#34;))); 4admin.createTable(tableDesc); 5---- ä½¿ç”¨HBase Shellåœ¨è¡¨ä¸Šé…ç½®æ‹†åˆ†ç­–ç•¥ï¼š
1hbase&gt; create &#39;test&#39;, {METADATA =&gt; {&#39;SPLIT_POLICY&#39; =&gt; &#39;org.apache.hadoop.hbase.regionserver.ConstantSizeRegionSplitPolicy&#39;}},{NAME =&gt; &#39;cf1&#39;} è¯¥ç­–ç•¥å¯ä»¥é€šè¿‡ä½¿ç”¨çš„HBaseConfigurationæˆ–æŒ‰è¡¨è¿›è¡Œå…¨å±€è®¾ç½®ï¼š
1HTableDescriptor myHtd = ...; 2myHtd.setValue(HTableDescriptor.SPLIT_POLICY, MyCustomSplitPolicy.class.getName()); è¯¥DisabledRegionSplitPolicyç­–ç•¥é˜»æ­¢æ‰‹åŠ¨åŒºåŸŸæ‹†åˆ†ã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/160/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åã€HBaseï¼šåŸºæœ¬Spark" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åã€HBaseï¼šåŸºæœ¬Spark" href="/docs/bigdata/hbase/160/">ä¸€ç™¾å…­åã€HBaseï¼šåŸºæœ¬Spark</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åŸºæœ¬Spark æœ¬èŠ‚è®¨è®ºæœ€ä½å’Œæœ€ç®€å•çº§åˆ«çš„Spark HBaseé›†æˆã€‚æ‰€æœ‰å…¶ä»–äº¤äº’ç‚¹éƒ½å»ºç«‹åœ¨æ­¤å¤„æè¿°çš„æ¦‚å¿µä¹‹ä¸Šã€‚
æ‰€æœ‰Sparkå’ŒHBaseé›†æˆçš„æ ¹æºéƒ½æ˜¯HBaseContextã€‚HBaseContextæ¥å—HBaseé…ç½®å¹¶å°†å®ƒä»¬æ¨é€åˆ°Sparkæ‰§è¡Œç¨‹åºã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨é™æ€ä½ç½®ä¸ºæ¯ä¸ªSpark Executorå»ºç«‹ä¸€ä¸ªHBaseè¿æ¥ã€‚
ä½œä¸ºå‚è€ƒï¼ŒSpark Executorså¯ä»¥ä¸Region Serversä½äºç›¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä¹Ÿå¯ä»¥ä½äºä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä¸ä¾èµ–äºco-locationã€‚å°†æ¯ä¸ªSpark Executoréƒ½è§†ä¸ºå¤šçº¿ç¨‹å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚è¿™å…è®¸åœ¨æ‰§è¡Œç¨‹åºä¸Šè¿è¡Œçš„ä»»ä½•Sparkä»»åŠ¡è®¿é—®å…±äº«çš„Connectionå¯¹è±¡ã€‚
HBaseContextç”¨æ³•ç¤ºä¾‹
æœ¬ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨HBaseContextåœ¨Scalaçš„RDDä¸Šæ‰§è¡ŒforeachPartitionï¼š
1val sc = new SparkContext(&#34;local&#34;, &#34;test&#34;) 2val config = new HBaseConfiguration() 3... 4val hbaseContext = new HBaseContext(sc, config) 5rdd.hbaseForeachPartition(hbaseContext, (it, conn) =&gt; { 6 val bufferedMutator = conn.getBufferedMutator(TableName.valueOf(&#34;t1&#34;)) 7 it.foreach((putRecord) =&gt; { 8. val put = new Put(putRecord._1) 9. putRecord._2.foreach((putValue) =&gt; put.addColumn(putValue._1, putValue._2, putValue._3)) 10. bufferedMutator.mutate(put) 11 }) 12 bufferedMutator.flush() 13 bufferedMutator.close() 14}) è¿™æ˜¯åœ¨Javaä¸­å®ç°çš„ç›¸åŒç¤ºä¾‹ï¼š
1JavaSparkContext jsc = new JavaSparkContext(sparkConf); 2try { 3 List&lt;byte[]&gt; list = new ArrayList&lt;&gt;(); 4 list.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/160/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾å…­åã€HBaseï¼šåŸºæœ¬Sparkçš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/168/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åå…«ã€HBaseéƒ¨ç½²åå¤„ç†å™¨çš„å‡†åˆ™" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åå…«ã€HBaseéƒ¨ç½²åå¤„ç†å™¨çš„å‡†åˆ™" href="/docs/bigdata/hbase/168/">ä¸€ç™¾å…­åå…«ã€HBaseéƒ¨ç½²åå¤„ç†å™¨çš„å‡†åˆ™</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">éƒ¨ç½²åå¤„ç†å™¨çš„å‡†åˆ™ æ†ç»‘åå¤„ç†å™¨
æ‚¨å¯ä»¥å°†åå¤„ç†å™¨çš„æ‰€æœ‰ç±»æ†ç»‘åˆ°RegionServerç±»è·¯å¾„ä¸Šçš„å•ä¸ªJARä¸­ï¼Œä»¥ä¾¿äºéƒ¨ç½²ã€‚å¦åˆ™ï¼Œå°†æ‰€æœ‰ä¾èµ–é¡¹æ”¾åœ¨RegionServerçš„ç±»è·¯å¾„ä¸­ï¼Œä»¥ä¾¿åœ¨RegionServerå¯åŠ¨æœŸé—´åŠ è½½å®ƒä»¬ã€‚RegionServerçš„ç±»è·¯å¾„åœ¨RegionServerçš„hbase-env.shæ–‡ä»¶ä¸­è®¾ç½®ã€‚
è‡ªåŠ¨éƒ¨ç½²
æ‚¨å¯ä»¥ä½¿ç”¨Puppetï¼ŒChefæˆ–Ansibleç­‰å·¥å…·å°†åå¤„ç†å™¨çš„JARå‘é€åˆ°RegionServersæ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ‰€éœ€ä½ç½®ï¼Œç„¶åé‡æ–°å¯åŠ¨æ¯ä¸ªRegionServerï¼Œä»¥è‡ªåŠ¨æ‰§è¡Œåå¤„ç†å™¨éƒ¨ç½²ã€‚æ­¤ç±»è®¾ç½®çš„è¯¦ç»†ä¿¡æ¯è¶…å‡ºäº†æœ¬æ–‡æ¡£çš„ä»‹ç»èŒƒå›´ã€‚
æ›´æ–°åå¤„ç†å™¨
éƒ¨ç½²æ–°ç‰ˆæœ¬çš„ç»™å®šåå¤„ç†å™¨å¹¶ä¸åƒç¦ç”¨å®ƒã€æ›¿æ¢JARå’Œé‡æ–°å¯ç”¨åå¤„ç†å™¨é‚£ä¹ˆç®€å•ã€‚è¿™æ˜¯å› ä¸ºé™¤éåˆ é™¤å¯¹å®ƒçš„æ‰€æœ‰å½“å‰å¼•ç”¨ï¼Œå¦åˆ™æ— æ³•åœ¨JVMä¸­é‡æ–°åŠ è½½ç±»ã€‚ç”±äºå½“å‰JVMå¼•ç”¨äº†ç°æœ‰çš„åå¤„ç†å™¨ï¼Œå› æ­¤å¿…é¡»é€šè¿‡é‡æ–°å¯åŠ¨RegionServeræ¥é‡æ–°å¯åŠ¨JVMï¼Œä»¥ä¾¿æ›¿æ¢å®ƒã€‚æ­¤è¡Œä¸ºä¸åº”æ›´æ”¹ã€‚
åå¤„ç†å™¨æ—¥å¿—è®°å½•
åå¤„ç†å™¨æ¡†æ¶ä¸æä¾›ç”¨äºè¶…å‡ºæ ‡å‡†Javaæ—¥å¿—è®°å½•çš„APIã€‚
åå¤„ç†å™¨é…ç½®
å¦‚æœæ‚¨ä¸æƒ³ä»HBase ShellåŠ è½½åå¤„ç†å™¨ï¼Œå¯ä»¥å°†å…¶é…ç½®å±æ€§æ·»åŠ åˆ°hbase-site.xmlã€‚åœ¨ä¸Šä¸€èŠ‚å†…å®¹çš„ä½¿ç”¨HBase Shellä¸­ï¼Œè®¾ç½®äº†ä¸¤ä¸ªå‚æ•°ï¼šarg1=1,arg2=2ã€‚è¿™äº›å¯ä»¥æ·»åŠ åˆ°hbase-site.xmlå¦‚ä¸‹ï¼š
1&lt;property&gt; 2 &lt;name&gt;arg1&lt;/name&gt; 3 &lt;value&gt;1&lt;/value&gt; 4&lt;/property&gt; 5&lt;property&gt; 6 &lt;name&gt;arg2&lt;/name&gt; 7 &lt;value&gt;2&lt;/value&gt; 8&lt;/property&gt; ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç è¯»å–é…ç½®ï¼š
1Configuration conf = HBaseConfiguration.create(); 2Connection connection = ConnectionFactory.createConnection(conf); 3TableName tableName = TableName.valueOf(&#34;users&#34;); 4Table table = connection.getTable(tableName); 5Get get = new Get(Bytes.toBytes(&#34;admin&#34;)); 6Result result = table.get(get); 7for (Cell c : result.rawCells()) { 8 System.out.println(Bytes.toString(CellUtil.cloneRow(c)) 9 + &#34;==&gt; &#34; + Bytes.toString(CellUtil.cloneFamily(c)) 10 + &#34;{&#34; + Bytes.toString(CellUtil.cloneQualifier(c)) 11 + &#34;:&#34; + Bytes.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/168/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾å…­åå…«ã€HBaseéƒ¨ç½²åå¤„ç†å™¨çš„å‡†åˆ™çš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">2 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/162/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åäºŒã€ä½¿ç”¨Sparkå°†æ•°æ®æ‰¹é‡åŠ è½½åˆ°HBase" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åäºŒã€ä½¿ç”¨Sparkå°†æ•°æ®æ‰¹é‡åŠ è½½åˆ°HBase" href="/docs/bigdata/hbase/162/">ä¸€ç™¾å…­åäºŒã€ä½¿ç”¨Sparkå°†æ•°æ®æ‰¹é‡åŠ è½½åˆ°HBase</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">ä½¿ç”¨Sparkå°†æ•°æ®æ‰¹é‡åŠ è½½åˆ°HBaseæœ‰ä¸¤ç§é€‰æ‹©ã€‚æœ‰ä¸€äº›åŸºæœ¬çš„æ‰¹é‡åŠ è½½åŠŸèƒ½é€‚ç”¨äºè¡Œå…·æœ‰æ•°ç™¾ä¸‡åˆ—çš„æƒ…å†µå’Œæœªæ•´åˆåˆ—çš„æƒ…å†µï¼Œä»¥åŠSparkæ‰¹é‡åŠ è½½è¿‡ç¨‹çš„æ˜ å°„ä¾§ä¹‹å‰çš„åˆ†åŒºã€‚
Sparkè¿˜æœ‰ä¸€ä¸ªç²¾ç®€è®°å½•æ‰¹é‡åŠ è½½é€‰é¡¹ï¼Œç¬¬äºŒä¸ªé€‰é¡¹æ˜¯ä¸ºæ¯è¡Œå°‘äº10kåˆ—çš„è¡¨è®¾è®¡çš„ã€‚ç¬¬äºŒä¸ªé€‰é¡¹çš„ä¼˜ç‚¹æ˜¯Spark shuffleæ“ä½œçš„ååé‡æ›´é«˜ï¼Œè€Œä¸”è´Ÿè½½æ›´å°‘ã€‚
è¿™ä¸¤ç§å®ç°çš„å·¥ä½œæ–¹å¼æˆ–å¤šæˆ–å°‘ç±»ä¼¼äºMapReduceæ‰¹é‡åŠ è½½è¿‡ç¨‹ï¼Œå› ä¸ºåˆ†åŒºå™¨æ ¹æ®åŒºåŸŸæ‹†åˆ†å¯¹rowkeysè¿›è¡Œåˆ†åŒºï¼Œå¹¶ä¸”è¡Œé”®æŒ‰é¡ºåºå‘é€åˆ°reducerï¼Œä»¥ä¾¿HFileså¯ä»¥ç›´æ¥ä»reduceé˜¶æ®µå†™å‡ºã€‚
åœ¨Sparkæœ¯è¯­ä¸­ï¼Œæ‰¹é‡åŠ è½½å°†å›´ç»•Spark repartitionAndSortWithinPartitionså®ç°ï¼Œç„¶åæ˜¯Spark foreachPartitionã€‚
é¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä½¿ç”¨åŸºæœ¬æ‰¹é‡åŠ è½½åŠŸèƒ½çš„ç¤ºä¾‹
æ‰¹é‡åŠ è½½å®ä¾‹
ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºäº†Sparkçš„æ‰¹é‡åŠ è½½ï¼š
1val sc = new SparkContext(&#34;local&#34;, &#34;test&#34;) 2val config = new HBaseConfiguration() 3val hbaseContext = new HBaseContext(sc, config) 4val stagingFolder = ... 5val rdd = sc.parallelize(Array( 6 (Bytes.toBytes(&#34;1&#34;), 7 (Bytes.toBytes(columnFamily1), Bytes.toBytes(&#34;a&#34;), Bytes.toBytes(&#34;foo1&#34;))), 8 (Bytes.toBytes(&#34;3&#34;), 9 (Bytes.toBytes(columnFamily1), Bytes.toBytes(&#34;b&#34;), Bytes.toBytes(&#34;foo2.b&#34;))), ... 10rdd.hbaseBulkLoad(TableName.valueOf(tableName), 11 t =&gt; { 12 val rowKey = t._1 13 val family:Array[Byte] = t._2(0)._1 14 val qualifier = t._2(0)._2 15 val value = t.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/162/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾å…­åäºŒã€ä½¿ç”¨Sparkå°†æ•°æ®æ‰¹é‡åŠ è½½åˆ°HBaseçš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/169/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åä¹ã€HBaseé™åˆ¶åå¤„ç†å™¨çš„ä½¿ç”¨" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åä¹ã€HBaseé™åˆ¶åå¤„ç†å™¨çš„ä½¿ç”¨" href="/docs/bigdata/hbase/169/">ä¸€ç™¾å…­åä¹ã€HBaseé™åˆ¶åå¤„ç†å™¨çš„ä½¿ç”¨</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">é™åˆ¶åå¤„ç†å™¨çš„ä½¿ç”¨ åœ¨å¤šç§Ÿæˆ·ç¯å¢ƒä¸­ï¼Œé™åˆ¶ä»»æ„ç”¨æˆ·åå¤„ç†å™¨å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚HBaseæä¾›äº†è¿ç»­çš„é€‰é¡¹ï¼Œä»¥ç¡®ä¿åªæœ‰é¢„æœŸçš„åå¤„ç†å™¨è¿è¡Œï¼š
hbase.coprocessor.enabledï¼šå¯ç”¨æˆ–ç¦ç”¨æ‰€æœ‰åå¤„ç†å™¨ã€‚è¿™å°†é™åˆ¶HBaseçš„åŠŸèƒ½ï¼Œå› ä¸ºç¦ç”¨æ‰€æœ‰åå¤„ç†å™¨å°†ç¦ç”¨æŸäº›å®‰å…¨æä¾›ç¨‹åºã€‚ä¸€ä¸ªå—å½±å“çš„ç¤ºä¾‹æ˜¯org.apache.hadoop.hbase.security.access.AccessControllerã€‚
hbase.coprocessor.user.enabledï¼šå¯ç”¨æˆ–ç¦ç”¨åœ¨è¡¨ï¼ˆå³ç”¨æˆ·åå¤„ç†å™¨ï¼‰ä¸ŠåŠ è½½åå¤„ç†å™¨ã€‚
åœ¨hbase-site.xmlä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å¯è°ƒå‚æ•°é™æ€åŠ è½½åå¤„ç†å™¨ï¼š
hbase.coprocessor.regionserver.classesï¼šç”±åŒºåŸŸæœåŠ¡å™¨åŠ è½½çš„ä»¥é€—å·åˆ†éš”çš„åå¤„ç†å™¨åˆ—è¡¨ï¼› hbase.coprocessor.region.classesï¼šé€—å·åˆ†éš”çš„RegionObserverå’ŒEndpointåå¤„ç†å™¨åˆ—è¡¨ï¼› hbase.coprocessor.user.region.classesï¼šç”±æ‰€æœ‰åŒºåŸŸåŠ è½½çš„ä»¥é€—å·åˆ†éš”çš„åå¤„ç†å™¨åˆ—è¡¨ï¼› hbase.coprocessor.master.classesï¼šç”±ä¸»æœåŠ¡å™¨ï¼ˆMasterObserveråå¤„ç†å™¨ï¼‰åŠ è½½çš„ä»¥é€—å·åˆ†éš”çš„åå¤„ç†å™¨åˆ—è¡¨ï¼› hbase.coprocessor.wal.classesï¼šè¦åŠ è½½çš„ä»¥é€—å·åˆ†éš”çš„WALObserveråå¤„ç†å™¨åˆ—è¡¨ï¼› hbase.coprocessor.abortonerrorï¼šå¦‚æœåå¤„ç†å™¨åº”è¯¥å‡ºé”™è€Œä¸æ˜¯IOErrorï¼Œæ˜¯å¦ä¸­æ­¢å·²åŠ è½½åå¤„ç†å™¨çš„å®ˆæŠ¤è¿›ç¨‹ã€‚å¦‚æœå°†æ­¤è®¾ç½®ä¸ºfalseï¼Œå¹¶ä¸”è®¿é—®æ§åˆ¶å™¨åå¤„ç†å™¨åº”è¯¥æœ‰è‡´å‘½é”™è¯¯ï¼Œåˆ™å°†ç»•è¿‡åå¤„ç†å™¨ï¼Œå› æ­¤åœ¨å®‰å…¨å®‰è£…ä¸­åº”å»ºè®®ä¸ºtrueï¼›ä½†æ˜¯ï¼Œå¯ä»¥åœ¨æ¯ä¸ªè¡¨çš„åŸºç¡€ä¸Šä¸ºç”¨æˆ·åå¤„ç†å™¨é‡å†™æ­¤æ“ä½œï¼Œä»¥ç¡®ä¿å®ƒä»¬ä¸ä¼šä¸­æ­¢å…¶è¿è¡ŒåŒºåŸŸæœåŠ¡å™¨ï¼Œè€Œæ˜¯åœ¨å‡ºé”™æ—¶å¸è½½ã€‚
hbase.coprocessor.region.whitelist.pathsï¼šå¯ç”¨äºåŠ è½½org.apache.hadoop.hbase.security.access.CoprocessorWhitelistMasterObserverçš„é€—å·åˆ†éš”åˆ—è¡¨ï¼Œé€šè¿‡è¿™ä¸ªåˆ—è¡¨ï¼Œäººä»¬å¯ä»¥ä½¿ç”¨ä¸‹åˆ—é€‰é¡¹æ¥åŠ è½½åå¤„ç†å™¨çš„ç™½åå•è·¯å¾„ã€‚
ç±»è·¯å¾„ä¸Šçš„åå¤„ç†å™¨éšå¼åˆ—å…¥ç™½åå•ï¼› *é€šé…ç¬¦æ‰€æœ‰åå¤„ç†å™¨è·¯å¾„ï¼› æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼Œhdfs://my-cluster/ï¼‰ï¼› ç”±FilenameUtils.wildcardMatchè®¡ç®—çš„é€šé…ç¬¦è·¯å¾„ï¼› æ³¨æ„ï¼šè·¯å¾„å¯ä»¥æŒ‡å®šæ–¹æ¡ˆæˆ–ä¸æŒ‡å®šæ–¹æ¡ˆï¼ˆä¾‹å¦‚ï¼Œfile:///usr/hbase/lib/coprocessorsæˆ–æ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿï¼š/usr/hbase/lib/coprocessorsï¼‰</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">2 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/166/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åå…­ã€Apache HBaseåŠ è½½åå¤„ç†å™¨" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åå…­ã€Apache HBaseåŠ è½½åå¤„ç†å™¨" href="/docs/bigdata/hbase/166/">ä¸€ç™¾å…­åå…­ã€Apache HBaseåŠ è½½åå¤„ç†å™¨</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åŠ è½½åå¤„ç†å™¨ è¦ä½¿æ‚¨çš„åå¤„ç†å™¨å¯ç”¨äºHBaseï¼Œå¿…é¡»é™æ€ï¼ˆé€šè¿‡HBaseé…ç½®ï¼‰æˆ–åŠ¨æ€ï¼ˆä½¿ç”¨HBase Shellæˆ–Java APIï¼‰åŠ è½½å®ƒã€‚
é™æ€åŠ è½½ è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é™æ€åŠ è½½åå¤„ç†å™¨ã€‚è¯·è®°ä½ï¼Œå¿…é¡»é‡æ–°å¯åŠ¨HBaseæ‰èƒ½å¸è½½å·²é™æ€åŠ è½½çš„åå¤„ç†å™¨ã€‚
1ã€ åœ¨hbase-site.xmlä¸­å®šä¹‰åå¤„ç†å™¨ï¼Œå…¶ä¸­å…ƒç´ å¸¦æœ‰å’Œå­å…ƒç´ åº”è¯¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼šï¼›
1 * å¯¹äºRegionObserverså’ŒEndpointsæ˜¯hbase.coprocessor.region.classesã€‚ 2 * å¯¹äºWALObserversæ˜¯hbase.coprocessor.wal.classesã€‚ 3 * å¯¹äºMasterObserversæ˜¯hbase.coprocessor.master.classesã€‚ 4 &lt;value&gt;å¿…é¡»åŒ…å«åå¤„ç†å™¨å®ç°ç±»çš„å®Œå…¨é™å®šç±»åã€‚ 5 ä¾‹å¦‚ï¼Œè¦åŠ è½½åå¤„ç†å™¨ï¼ˆåœ¨ç±»SumEndPoint.javaä¸­å®ç°ï¼‰ï¼Œæ‚¨å¿…é¡»åœ¨RegionServerçš„&#39;hbase-site.xml&#39;æ–‡ä»¶ä¸­åˆ›å»ºä»¥ä¸‹æ¡ç›®ï¼ˆé€šå¸¸ä½äº&#39;conf&#39;ç›®å½•ä¸‹ï¼‰ï¼š 1 &lt;property&gt; 2 &lt;name&gt;hbase.coprocessor.region.classes&lt;/name&gt; 3 &lt;value&gt;org.myname.hbase.coprocessor.endpoint.SumEndPoint&lt;/value&gt;Â 4 &lt;/property&gt; 1 å¦‚æœä¸ºåŠ è½½æŒ‡å®šäº†å¤šä¸ªç±»ï¼Œåˆ™ç±»åå¿…é¡»ä»¥é€—å·åˆ†éš”ã€‚æ¡†æ¶å°è¯•ä½¿ç”¨é»˜è®¤çš„ç±»åŠ è½½å™¨åŠ è½½æ‰€æœ‰å·²é…ç½®çš„ç±»ã€‚å› æ­¤ï¼Œjaræ–‡ä»¶å¿…é¡»é©»ç•™åœ¨æœåŠ¡å™¨ç«¯HBaseç±»è·¯å¾„ä¸­ã€‚ 2 ä»¥è¿™ç§æ–¹å¼åŠ è½½çš„åå¤„ç†å™¨å°†åœ¨æ‰€æœ‰è¡¨çš„æ‰€æœ‰åŒºåŸŸä¸Šå¤„äºæ´»åŠ¨çŠ¶æ€ã€‚è¿™äº›ä¹Ÿç§°ä¸ºç³»ç»Ÿåå¤„ç†å™¨ã€‚å°†ä¸ºç¬¬ä¸€ä¸ªåˆ—å‡ºçš„åå¤„ç†å™¨åˆ†é…ä¼˜å…ˆçº§Coprocessor.Priority.SYSTEMã€‚åˆ—è¡¨ä¸­çš„æ¯ä¸ªåç»­åå¤„ç†å™¨çš„ä¼˜å…ˆçº§å€¼éƒ½ä¼šå¢åŠ 1ï¼ˆè¿™ä¼šé™ä½å…¶ä¼˜å…ˆçº§ï¼Œå› ä¸ºä¼˜å…ˆçº§å…·æœ‰æ•´æ•°çš„è‡ªç„¶æ’åºé¡ºåºï¼‰ã€‚ 3 å½“è°ƒç”¨æ³¨å†Œçš„è§‚å¯Ÿè€…æ—¶ï¼Œæ¡†æ¶ä»¥å…¶ä¼˜å…ˆçº§çš„æ’åºé¡ºåºæ‰§è¡Œå…¶å›è°ƒæ–¹æ³•ã€‚å…³ç³»æ˜¯ä»»æ„ç ´åçš„ã€‚ 2ã€ å°†æ‚¨çš„ä»£ç æ”¾åœ¨HBaseçš„ç±»è·¯å¾„ä¸Šä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯å°†jarï¼ˆåŒ…å«ä»£ç å’Œæ‰€æœ‰ä¾èµ–é¡¹ï¼‰æ”¾å…¥HBaseçš„å®‰è£…ç›®å½•lib/ä¸­ï¼›
3ã€ é‡å¯HBaseï¼›
é™æ€å¸è½½ 1ã€ ä»hbase-site.xmlä¸­åˆ é™¤åå¤„ç†å™¨çš„å…ƒç´ ï¼ŒåŒ…æ‹¬å­å…ƒç´ ï¼›
2ã€ é‡å¯HBaseï¼›
3ã€ ï¼ˆå¯é€‰ï¼‰ä»ç±»è·¯å¾„æˆ–HBaseçš„lib/ç›®å½•ä¸­åˆ é™¤åå¤„ç†å™¨çš„JARæ–‡ä»¶ï¼›
åŠ¨æ€åŠ è½½ æ‚¨ä¹Ÿå¯ä»¥åŠ¨æ€åŠ è½½åå¤„ç†å™¨ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨HBaseã€‚è¿™ä¼¼ä¹æ¯”é™æ€åŠ è½½æ›´å¥½ï¼Œä½†åŠ¨æ€åŠ è½½çš„åå¤„ç†å™¨æ˜¯åŸºäºæ¯ä¸ªè¡¨åŠ è½½çš„ï¼Œå¹¶ä¸”åªèƒ½ç”¨äºåŠ è½½å®ƒä»¬çš„è¡¨ã€‚å› æ­¤ï¼ŒåŠ¨æ€åŠ è½½çš„è¡¨æœ‰æ—¶ç§°ä¸ºè¡¨åå¤„ç†å™¨ï¼ˆTable Coprocessorï¼‰ã€‚
æ­¤å¤–ï¼ŒåŠ¨æ€åŠ è½½åå¤„ç†å™¨å……å½“è¡¨ä¸Šçš„æ¨¡å¼æ›´æ”¹ï¼Œå¹¶ä¸”å¿…é¡»ä½¿è¡¨è„±æœºä»¥åŠ è½½åå¤„ç†å™¨ã€‚
æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥åŠ¨æ€åŠ è½½åå¤„ç†å™¨ã€‚
ä»¥ä¸‹è¯´æ˜åšäº†å¦‚ä¸‹å‡è®¾ï¼š
ä¸€ä¸ªå«åšcoprocessor.jarçš„JARåŒ…å«äº†åå¤„ç†å™¨å®ç°ä»¥åŠå®ƒçš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚ è¯¥JARåœ¨HDFSä¸­çš„æŸäº›ä½ç½® (å¦‚ï¼Œhdfs:// : /user/ /coprocessor.jar ) ä¸­å¯ç”¨ã€‚ ä½¿ç”¨HBase Shell # 1ã€ ä½¿ç”¨HBaseShellç¦ç”¨è¡¨ï¼šï¼›
1 hbase&gt; disable &#39;users&#39; 2ã€ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åŠ è½½åå¤„ç†å™¨ï¼šï¼›</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/166/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾å…­åå…­ã€Apache HBaseåŠ è½½åå¤„ç†å™¨çš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">4 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/167/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åä¸ƒã€HBaseè§‚å¯Ÿè€…åå¤„ç†å™¨ç¤ºä¾‹" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åä¸ƒã€HBaseè§‚å¯Ÿè€…åå¤„ç†å™¨ç¤ºä¾‹" href="/docs/bigdata/hbase/167/">ä¸€ç™¾å…­åä¸ƒã€HBaseè§‚å¯Ÿè€…åå¤„ç†å™¨ç¤ºä¾‹</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">ç¤ºä¾‹ HBaseæä¾›äº†Observer Coprocessorï¼ˆè§‚å¯Ÿè€…åå¤„ç†å™¨ï¼‰çš„ç¤ºä¾‹ã€‚
ä¸‹é¢ç»™å‡ºæ›´è¯¦ç»†çš„ä¾‹å­ã€‚
è¿™äº›ç¤ºä¾‹å‡è®¾ä¸€ä¸ªåä¸ºusersçš„è¡¨ï¼Œå…¶ä¸­æœ‰ä¸¤ä¸ªåˆ—æ—personalDetå’ŒsalaryDetï¼ŒåŒ…å«ä¸ªäººå’Œå·¥èµ„è¯¦ç»†ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯usersè¡¨æ ¼ï¼š
personalDet salaryDet jverne
Jules Verne 02/08/1828 12000
9000
3000
rowkey name lastname dob gross net allowances admin Admin Admin cdickens
Charles Dickens 02/07/1812 10000
8000
2000
è§‚å¯Ÿè€…ç¤ºä¾‹ ä»¥ä¸‹Observeråå¤„ç†å™¨å¯é˜²æ­¢ç”¨æˆ·adminçš„è¯¦ç»†ä¿¡æ¯åœ¨usersè¡¨Getæˆ–è€…Scanä¸­è¿”å›ã€‚
1ã€ ç¼–å†™ä¸€ä¸ªå®ç°RegionObserverç±»çš„ç±»ï¼›
2ã€ é‡å†™preGetOp()æ–¹æ³•ï¼ˆä¸æ¨èä½¿ç”¨è¯¥preGet()æ–¹æ³•ï¼‰ä»¥æ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦å·²ä½¿ç”¨adminå€¼æŸ¥è¯¢rowkeyå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›ç©ºç»“æœå¦åˆ™ï¼Œæ­£å¸¸å¤„ç†è¯·æ±‚ï¼›
3ã€ å°†æ‚¨çš„ä»£ç å’Œä¾èµ–é¡¹æ”¾åœ¨JARæ–‡ä»¶ä¸­ï¼›
4ã€ å°†JARæ”¾åœ¨HDFSä¸­ï¼ŒHBaseå¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ°å®ƒï¼›
5ã€ åŠ è½½åå¤„ç†å™¨ï¼›
6ã€ å†™ä¸€ä¸ªç®€å•çš„ç¨‹åºæ¥æµ‹è¯•å®ƒï¼›
ä»¥ä¸‹æ˜¯ä¸Šè¿°æ­¥éª¤çš„å®ç°ï¼š
1public class RegionObserverExample implements RegionObserver { 2 private static final byte[] ADMIN = Bytes.toBytes(&#34;admin&#34;); 3 private static final byte[] COLUMN_FAMILY = Bytes.toBytes(&#34;details&#34;); 4 private static final byte[] COLUMN = Bytes.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/167/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾å…­åä¸ƒã€HBaseè§‚å¯Ÿè€…åå¤„ç†å™¨ç¤ºä¾‹çš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">3 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/163/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åä¸‰ã€SparkSQL â€“ DataFrames" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åä¸‰ã€SparkSQL â€“ DataFrames" href="/docs/bigdata/hbase/163/">ä¸€ç™¾å…­åä¸‰ã€SparkSQL â€“ DataFrames</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">SparkSQL / DataFrames HBase-Sparkè¿æ¥å™¨ï¼ˆåœ¨HBase-Sparkæ¨¡å—ä¸­ï¼‰åˆ©ç”¨Spark-1.2.0ä¸­å¼•å…¥çš„DataSource API ï¼ˆSPARK-3247ï¼‰ï¼Œå¼¥è¡¥äº†ç®€å•HBase KVå­˜å‚¨å’Œå¤æ‚å…³ç³»SQLæŸ¥è¯¢ä¹‹é—´çš„å·®è·ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨Sparkåœ¨HBaseä¸Šæ‰§è¡Œå¤æ‚çš„æ•°æ®åˆ†æå·¥ä½œã€‚HBase Dataframeæ˜¯æ ‡å‡†çš„Spark Dataframeï¼Œèƒ½å¤Ÿä¸ä»»ä½•å…¶ä»–æ•°æ®æºï¼ˆå¦‚Hiveï¼ŒOrcï¼ŒParquetï¼ŒJSONç­‰ï¼‰è¿›è¡Œäº¤äº’ã€‚HBase-Spark Connectoråº”ç”¨å…³é”®æŠ€æœ¯ï¼Œå¦‚åˆ†åŒºä¿®å‰ªï¼Œåˆ—ä¿®å‰ªï¼Œè°“è¯å åŠ å’Œæ•°æ®å±€éƒ¨æ€§ã€‚
è¦ä½¿ç”¨HBase-Sparkè¿æ¥å™¨ï¼Œç”¨æˆ·éœ€è¦ä¸ºHBaseå’ŒSparkè¡¨ä¹‹é—´çš„æ¨¡å¼æ˜ å°„å®šä¹‰Catalogï¼Œå‡†å¤‡æ•°æ®å¹¶å¡«å……HBaseè¡¨ï¼Œç„¶ååŠ è½½HBase DataFrameã€‚ä¹‹åï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨SQLæŸ¥è¯¢åœ¨HBaseè¡¨ä¸­è¿›è¡Œé›†æˆæŸ¥è¯¢å’Œè®¿é—®è®°å½•ã€‚ä»¥ä¸‹è¯´æ˜äº†åŸºæœ¬ç¨‹åºã€‚
å®šä¹‰ç›®å½• 1def catalog = s&#34;&#34;&#34;{ 2 |&#34;table&#34;:{&#34;namespace&#34;:&#34;default&#34;, &#34;name&#34;:&#34;table1&#34;}, 3 |&#34;rowkey&#34;:&#34;key&#34;, 4 |&#34;columns&#34;:{ 5 |&#34;col0&#34;:{&#34;cf&#34;:&#34;rowkey&#34;, &#34;col&#34;:&#34;key&#34;, &#34;type&#34;:&#34;string&#34;}, 6 |&#34;col1&#34;:{&#34;cf&#34;:&#34;cf1&#34;, &#34;col&#34;:&#34;col1&#34;, &#34;type&#34;:&#34;boolean&#34;}, 7 |&#34;col2&#34;:{&#34;cf&#34;:&#34;cf2&#34;, &#34;col&#34;:&#34;col2&#34;, &#34;type&#34;:&#34;double&#34;}, 8 |&#34;col3&#34;:{&#34;cf&#34;:&#34;cf3&#34;, &#34;col&#34;:&#34;col3&#34;, &#34;type&#34;:&#34;float&#34;}, 9 |&#34;col4&#34;:{&#34;cf&#34;:&#34;cf4&#34;, &#34;col&#34;:&#34;col4&#34;, &#34;type&#34;:&#34;int&#34;}, 10 |&#34;col5&#34;:{&#34;cf&#34;:&#34;cf5&#34;, &#34;col&#34;:&#34;col5&#34;, &#34;type&#34;:&#34;bigint&#34;}, 11 |&#34;col6&#34;:{&#34;cf&#34;:&#34;cf6&#34;, &#34;col&#34;:&#34;col6&#34;, &#34;type&#34;:&#34;smallint&#34;}, 12 |&#34;col7&#34;:{&#34;cf&#34;:&#34;cf7&#34;, &#34;col&#34;:&#34;col7&#34;, &#34;type&#34;:&#34;string&#34;}, 13 |&#34;col8&#34;:{&#34;cf&#34;:&#34;cf8&#34;, &#34;col&#34;:&#34;col8&#34;, &#34;type&#34;:&#34;tinyint&#34;} 14 |} 15 |}&#34;&#34;&#34;.stripMargin Catalogå®šä¹‰äº†HBaseå’ŒSparkè¡¨ä¹‹é—´çš„æ˜ å°„ã€‚è¯¥ç›®å½•æœ‰ä¸¤ä¸ªå…³é”®éƒ¨åˆ†ã€‚ä¸€ä¸ªæ˜¯rowkeyå®šä¹‰ï¼Œå¦ä¸€ä¸ªæ˜¯Sparkä¸­çš„è¡¨åˆ—ä¸HBaseä¸­çš„åˆ—æ—å’Œåˆ—é™å®šç¬¦ä¹‹é—´çš„æ˜ å°„ã€‚ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªHBaseè¡¨çš„æ¨¡å¼ï¼Œå…¶åç§°ä¸ºtable1ï¼Œè¡Œé”®ä¸ºkeyï¼Œåˆ—æ•°ä¸ºcol1 -col8ã€‚è¯·æ³¨æ„ï¼Œè¿˜å¿…é¡»å°†rowkeyè¯¦ç»†å®šä¹‰ä¸ºcolumn (col0)ï¼Œè¯¥åˆ—å…·æœ‰ç‰¹å®šçš„cfï¼ˆrowkeyï¼‰ã€‚
ä¿å­˜DataFrame 1case class HBaseRecord( 2 col0: String, 3 col1: Boolean, 4 col2: Double, 5 col3: Float, 6 col4: Int, 7 col5: Long, 8 col6: Short, 9 col7: String, 10 col8: Byte) 11object HBaseRecord 12{ 13 def apply(i: Int, t: String): HBaseRecord = { 14 val s = s&#34;&#34;&#34;row${&#34;%03d&#34;.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/163/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾å…­åä¸‰ã€SparkSQL â€“ DataFramesçš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/164/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åå››ã€Apache HBaseåå¤„ç†å™¨æ¦‚è¿°" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åå››ã€Apache HBaseåå¤„ç†å™¨æ¦‚è¿°" href="/docs/bigdata/hbase/164/">ä¸€ç™¾å…­åå››ã€Apache HBaseåå¤„ç†å™¨æ¦‚è¿°</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åå¤„ç†å™¨æ¦‚è¿° åœ¨HBaseä¸­ï¼Œä½¿ç”¨â€œGetâ€æˆ–è€…â€œScanâ€è·å–æ•°æ®ï¼Œè€Œåœ¨RDBMSä¸­ä½¿ç”¨SQLæŸ¥è¯¢ã€‚ä¸ºäº†ä»…è·å–ç›¸å…³æ•°æ®ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨HBase Filterè¿‡æ»¤å®ƒ ï¼Œè€Œåœ¨RDBMSä¸­ä½¿ç”¨WHEREè°“è¯ã€‚
è·å–æ•°æ®åï¼Œæ‚¨å¯ä»¥å¯¹å…¶æ‰§è¡Œè®¡ç®—ã€‚è¿™ç§èŒƒä¾‹é€‚ç”¨äºå…·æœ‰å‡ åƒè¡Œå’Œå‡ åˆ—çš„â€œå°æ•°æ®â€ã€‚ä½†æ˜¯ï¼Œå½“æ‚¨æ‰©å±•åˆ°æ•°åäº¿è¡Œå’Œæ•°ç™¾ä¸‡åˆ—æ—¶ï¼Œåœ¨ç½‘ç»œä¸­ç§»åŠ¨å¤§é‡æ•°æ®å°†åœ¨ç½‘ç»œå±‚äº§ç”Ÿç“¶é¢ˆï¼Œå®¢æˆ·ç«¯éœ€è¦è¶³å¤Ÿå¼ºå¤§å¹¶ä¸”æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥å¤„ç†å¤§é‡æ•°æ®å’Œè®¡ç®—ã€‚æ­¤å¤–ï¼Œå®¢æˆ·ç«¯ä»£ç å¯èƒ½å˜å¾—åºå¤§è€Œå¤æ‚ã€‚
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåå¤„ç†å™¨å¯èƒ½æœ‰æ„ä¹‰ã€‚æ‚¨å¯ä»¥å°†ä¸šåŠ¡è®¡ç®—ä»£ç æ”¾å…¥åœ¨RegionServerä¸Šè¿è¡Œçš„åå¤„ç†å™¨ä¸­ï¼Œä¸æ•°æ®ä½äºåŒä¸€ä½ç½®ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚
è¿™åªæ˜¯ä½¿ç”¨åå¤„ç†å™¨å¯ä»¥å¸¦æ¥å¥½å¤„çš„ä¸€ç§æƒ…å†µã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç±»æ¯”ï¼Œå¯èƒ½æœ‰åŠ©äºè§£é‡Šåå¤„ç†å™¨çš„ä¸€äº›å¥½å¤„ã€‚
åå¤„ç†å™¨ç±»æ¯” è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹
Observeråå¤„ç†å™¨ç±»ä¼¼äºRDBMSä¸­çš„è§¦å‘å™¨ï¼Œå› ä¸ºå®ƒåœ¨ç‰¹å®šäº‹ä»¶ï¼ˆä¾‹å¦‚ï¼ŒGetæˆ–Putï¼‰å‘ç”Ÿä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œä»£ç ã€‚ç«¯ç‚¹åå¤„ç†å™¨ç±»ä¼¼äºRDBMSä¸­çš„å­˜å‚¨è¿‡ç¨‹ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨å¯¹RegionServeræœ¬èº«ä¸Šçš„æ•°æ®è€Œä¸æ˜¯å®¢æˆ·ç«¯ä¸Šçš„æ•°æ®æ‰§è¡Œè‡ªå®šä¹‰è®¡ç®—ã€‚
MapReduce
MapReduceçš„å·¥ä½œåŸç†æ˜¯å°†è®¡ç®—ç§»åŠ¨åˆ°æ•°æ®ä½ç½®ã€‚åå¤„ç†å™¨åœ¨ç›¸åŒçš„ä¸»ä½“ä¸Šè¿è¡Œã€‚
AOP
å¦‚æœæ‚¨ç†Ÿæ‚‰é¢å‘æ–¹é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼Œåˆ™å¯ä»¥å°†åå¤„ç†å™¨è§†ä¸ºé€šè¿‡æ‹¦æˆªè¯·æ±‚ç„¶åè¿è¡ŒæŸäº›è‡ªå®šä¹‰ä»£ç æ¥åº”ç”¨å»ºè®®ï¼Œç„¶åå°†è¯·æ±‚ä¼ é€’åˆ°å…¶æœ€ç»ˆç›®æ ‡ï¼ˆç”šè‡³æ›´æ”¹ç›®æ ‡ï¼‰ã€‚
åå¤„ç†å™¨å®ç°æ¦‚è¿° 1ã€ æ‚¨çš„ç±»åº”è¯¥å®ç°ä¸€ä¸ªåå¤„ç†å™¨æ¥å£â€“åå¤„ç†å™¨ï¼ŒRegionObserverï¼ŒCoprocessorServiceâ€“ä»…ä¸¾å‡ ä¾‹ï¼›
2ã€ ä½¿ç”¨HBaseShellé™æ€æˆ–åŠ¨æ€åœ°åŠ è½½åå¤„ç†å™¨ï¼›
3ã€ ä»å®¢æˆ·ç«¯ä»£ç è°ƒç”¨åå¤„ç†å™¨HBaseé€æ˜åœ°å¤„ç†åå¤„ç†å™¨ï¼›
æ¡†æ¶APIåœ¨åå¤„ç†å™¨åŒ…ä¸­æä¾›ã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/165/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åäº”ã€Apache HBaseåå¤„ç†å™¨çš„ç±»å‹" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åäº”ã€Apache HBaseåå¤„ç†å™¨çš„ç±»å‹" href="/docs/bigdata/hbase/165/">ä¸€ç™¾å…­åäº”ã€Apache HBaseåå¤„ç†å™¨çš„ç±»å‹</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åå¤„ç†å™¨çš„ç±»å‹ è§‚å¯Ÿè€…åå¤„ç†å™¨ åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿä¹‹å‰æˆ–ä¹‹åè§¦å‘è§‚å¯Ÿè€…åå¤„ç†å™¨ã€‚åœ¨äº‹ä»¶ä¹‹å‰å‘ç”Ÿçš„è§‚å¯Ÿè€…ä½¿ç”¨ä»¥preå‰ç¼€å¼€å¤´çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼ŒprePutã€‚è§‚å¯Ÿè€…å‘ç”Ÿåœ¨ä»¥postå‰ç¼€ï¼ˆå¦‚postPutï¼‰å¼€å¤´çš„äº‹ä»¶è¦†ç›–æ–¹æ³•ä¹‹åã€‚
ç”¨äºè§‚å¯Ÿè€…åå¤„ç†å™¨çš„ç”¨ä¾‹ å®‰å…¨
åœ¨æ‰§è¡ŒGetæˆ–Putæ“ä½œä¹‹å‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨preGetæˆ–prePutæ–¹æ³•æ£€æŸ¥æƒé™ã€‚
å‚ç…§å®Œæ•´æ€§
HBaseä¸ç›´æ¥æ”¯æŒrefentialå®Œæ•´æ€§çš„RDBMSæ¦‚å¿µï¼Œä¹Ÿç§°ä¸ºå¤–é”®ã€‚æ‚¨å¯ä»¥ä½¿ç”¨åå¤„ç†å™¨æ¥å¼ºåˆ¶æ‰§è¡Œæ­¤ç±»å®Œæ•´æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªä¸šåŠ¡è§„åˆ™ï¼Œusersè¡¨ä¸­çš„æ¯ä¸ªæ’å…¥å¿…é¡»åè·Ÿuser_daily_attendanceè¡¨ä¸­çš„ç›¸åº”æ¡ç›®ï¼Œæ‚¨å¯ä»¥å®ç°åå¤„ç†å™¨ä»¥åœ¨userä½¿ç”¨è¯¥prePutæ–¹æ³•å‘user_daily_attendanceæ’å…¥è®°å½•ã€‚
äºŒçº§ç´¢å¼•
æ‚¨å¯ä»¥ä½¿ç”¨åå¤„ç†å™¨æ¥ç»´æŠ¤äºŒçº§ç´¢å¼•ã€‚
è§‚å¯Ÿè€…åå¤„ç†å™¨çš„ç±»å‹ RegionObserver
RegionObserveråå¤„ç†å™¨å…è®¸æ‚¨è§‚å¯ŸåŒºåŸŸä¸Šçš„äº‹ä»¶ï¼Œä¾‹å¦‚Get å’ŒPutæ“ä½œã€‚
RegionServerObserver
RegionServerObserverå…è®¸æ‚¨è§‚å¯Ÿä¸RegionServeræ“ä½œç›¸å…³çš„äº‹ä»¶ï¼Œä¾‹å¦‚å¯åŠ¨ï¼Œåœæ­¢æˆ–æ‰§è¡Œåˆå¹¶ï¼Œæäº¤æˆ–å›æ»šã€‚
MasterObserver
MasterObserverå…è®¸æ‚¨è§‚å¯Ÿä¸HBase Masterç›¸å…³çš„äº‹ä»¶ï¼Œä¾‹å¦‚è¡¨åˆ›å»ºï¼Œåˆ é™¤æˆ–æ¶æ„ä¿®æ”¹ã€‚
WalObserver
WalObserverå…è®¸æ‚¨è§‚å¯Ÿä¸å†™å…¥é¢„å†™æ—¥å¿—ï¼ˆWALï¼‰ç›¸å…³çš„äº‹ä»¶ã€‚
ç¤ºä¾‹æä¾›äº†è§‚å¯Ÿè€…åå¤„ç†å™¨çš„å·¥ä½œç¤ºä¾‹ã€‚
ç«¯ç‚¹åå¤„ç†å™¨ ç«¯ç‚¹å¤„ç†å™¨å…è®¸æ‚¨åœ¨æ•°æ®ä½ç½®æ‰§è¡Œè®¡ç®—ã€‚ä¾‹å¦‚ï¼Œéœ€è¦è®¡ç®—æ¨ªè·¨æ•°ä»¥ç™¾è®¡åŒºåŸŸçš„æ•´ä¸ªè¡¨çš„è¿è¡Œå¹³å‡å€¼æˆ–æ±‚å’Œã€‚
ä¸æ‚¨çš„ä»£ç é€æ˜è¿è¡Œçš„è§‚å¯Ÿå™¨åå¤„ç†å™¨ç›¸æ¯”ï¼Œç«¯ç‚¹åå¤„ç†å™¨å¿…é¡»ä½¿ç”¨Tableæˆ–HTableä¸­æä¾›çš„CoprocessorService()æ–¹æ³•æ˜¾å¼è°ƒç”¨ã€‚
ä»HBase 0.96å¼€å§‹ï¼Œç«¯ç‚¹åå¤„ç†å™¨ä½¿ç”¨Google Protocol Buffersï¼ˆprotobufï¼‰å®ç°ã€‚ä»¥0.94ç‰ˆæœ¬ç¼–å†™çš„ç«¯ç‚¹åå¤„ç†å™¨ä¸0.96æˆ–æ›´é«˜çš„ç‰ˆæœ¬ä¸å…¼å®¹ã€‚è§HBASE-5448ï¼‰ã€‚è¦å°†HBaseç¾¤é›†ä»0.94æˆ–æ›´æ—©ç‰ˆæœ¬å‡çº§åˆ°0.96æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ‚¨éœ€è¦é‡æ–°å®ç°åå¤„ç†å™¨ã€‚
åå¤„ç†å™¨ç«¯ç‚¹ä¸åº”ä½¿ç”¨HBaseå†…éƒ¨æ„ä»¶ï¼Œåªèƒ½åˆ©ç”¨å…¬å…±APIï¼›ç†æƒ³æƒ…å†µä¸‹ï¼ŒCPEPåº”ä»…ä¾èµ–äºæ¥å£å’Œæ•°æ®ç»“æ„ã€‚è¿™å¹¶ä¸æ€»æ˜¯å¯è¡Œçš„ï¼Œä½†è¦æ³¨æ„è¿™æ ·åšä¼šä½¿ç«¯ç‚¹å˜è„†å¼±ï¼Œéšç€HBaseå†…éƒ¨çš„å‘å±•è€Œæ˜“äºç ´æŸã€‚æ³¨é‡Šä¸ºç§æœ‰æˆ–æ¼”è¿›çš„HBaseå†…éƒ¨APIåœ¨åˆ é™¤ä¹‹å‰ä¸å¿…éµå®ˆè¯­ä¹‰ç‰ˆæœ¬è§„åˆ™æˆ–å…³äºå¼ƒç”¨çš„ä¸€èˆ¬Javaè§„åˆ™ã€‚è™½ç„¶ç”Ÿæˆçš„protobufæ–‡ä»¶æ²¡æœ‰hbaseå—ä¼—æ³¨é‡Š â€“ å®ƒä»¬æ˜¯ç”±protobuf protocå·¥å…·åˆ›å»ºçš„ï¼Œå®ƒä¸çŸ¥é“HBaseæ˜¯å¦‚ä½•å·¥ä½œçš„ â€“ å®ƒä»¬åº”è¯¥è¢«è®¤ä¸ºæ˜¯@InterfaceAudience.Privateï¼Œå› æ­¤å®¹æ˜“æ”¹å˜ã€‚
åœ¨æ¥ä¸‹æ¥çš„â€œç¤ºä¾‹â€ä¸€èŠ‚ï¼Œæä¾›äº†ç«¯ç‚¹åå¤„ç†å™¨çš„å·¥ä½œç¤ºä¾‹ã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/161/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾å…­åä¸€ã€Spark Streaming" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾å…­åä¸€ã€Spark Streaming" href="/docs/bigdata/hbase/161/">ä¸€ç™¾å…­åä¸€ã€Spark Streaming</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">Spark Streaming Spark Streamingæ˜¯ä¸€ä¸ªåŸºäºSparkæ„å»ºçš„å¾®æ‰¹å¤„ç†æµå¤„ç†æ¡†æ¶ã€‚HBaseå’ŒSpark Streamingæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ­æ¡£ï¼Œå› ä¸ºHBaseå¯ä»¥ä¸Spark Streamingä¸€èµ·æä¾›ä»¥ä¸‹å¥½å¤„ï¼š
å³æ—¶è·å–å‚è€ƒæ•°æ®æˆ–é…ç½®æ–‡ä»¶æ•°æ®çš„åœ°æ–¹ ä»¥æ”¯æŒä»…ä¸€æ¬¡å¤„ç†çš„Spark Streamingæ‰¿è¯ºçš„æ–¹å¼å­˜å‚¨è®¡æ•°æˆ–èšåˆçš„ä½ç½®ã€‚ HBase-Sparkæ¨¡å—ä¸Spark Streamingçš„é›†æˆç‚¹ç±»ä¼¼äºå…¶å¸¸è§„çš„Sparké›†æˆç‚¹ï¼Œå› ä¸ºä»¥ä¸‹å‘½ä»¤å¯ä»¥ç›´æ¥é€šè¿‡Spark Streaming DStreamå®ç°ã€‚
bulkPut
ç”¨äºå‘HBaseå¤§è§„æ¨¡å¹¶è¡Œå‘é€put
bulkDelete
ç”¨äºå‘HBaseå¤§è§„æ¨¡å¹¶è¡Œå‘é€delete
bulkGet
ç”¨äºå¤§è§„æ¨¡å¹¶è¡Œå‘é€getåˆ°HBaseä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„RDD
mapPartition
ä½¿ç”¨Connectionå¯¹è±¡æ‰§è¡ŒSpark Mapå‡½æ•°ï¼Œä»¥å…è®¸å®Œå…¨è®¿é—®HBase
hBaseRDD
ç®€åŒ–åˆ†å¸ƒå¼æ‰«æä»¥åˆ›å»ºRDD
å¸¦æœ‰DStreamçš„bulkPutç¤ºä¾‹
ä¸‹é¢æ˜¯ä½¿ç”¨DStreamsçš„bulkPutç¤ºä¾‹ã€‚RDDæ‰¹é‡æ”¾ç½®çš„æ„Ÿè§‰éå¸¸æ¥è¿‘ã€‚
1val sc = new SparkContext(&#34;local&#34;, &#34;test&#34;) 2val config = new HBaseConfiguration() 3val hbaseContext = new HBaseContext(sc, config) 4val ssc = new StreamingContext(sc, Milliseconds(200)) 5val rdd1 = ... 6val rdd2 = ... 7val queue = mutable.Queue[RDD[(Array[Byte], Array[(Array[Byte], 8 Array[Byte], Array[Byte])])]]() 9queue += rdd1 10queue += rdd2 11val dStream = ssc.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/161/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾å…­åä¸€ã€Spark Streamingçš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/170/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåã€HBaseæ€§èƒ½è°ƒæ•´ï¼šæ“ä½œç³»ç»Ÿ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåã€HBaseæ€§èƒ½è°ƒæ•´ï¼šæ“ä½œç³»ç»Ÿ" href="/docs/bigdata/hbase/170/">ä¸€ç™¾ä¸ƒåã€HBaseæ€§èƒ½è°ƒæ•´ï¼šæ“ä½œç³»ç»Ÿ</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æ“ä½œç³»ç»Ÿ å†…å­˜ HBaseä¸€å®šéœ€è¦RAMï¼
64ä½ ä½¿ç”¨64ä½å¹³å°ï¼ˆå’Œ64ä½JVMï¼‰ã€‚
äº¤æ¢ # æ³¨æ„äº¤æ¢ï¼Œå°†swappinessè®¾ä¸º0ã€‚
CPU ç¡®ä¿å·²å°†Hadoopè®¾ç½®ä¸ºä½¿ç”¨æœ¬æœºçš„ç¡¬ä»¶æ ¡éªŒå’Œã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/178/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåå…«ã€ä»HBaseåˆ é™¤" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåå…«ã€ä»HBaseåˆ é™¤" href="/docs/bigdata/hbase/178/">ä¸€ç™¾ä¸ƒåå…«ã€ä»HBaseåˆ é™¤</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">ä»HBaseåˆ é™¤ ä½¿ç”¨HBaseè¡¨ä½œä¸ºé˜Ÿåˆ— HBaseè¡¨æœ‰æ—¶ç”¨ä½œé˜Ÿåˆ—ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»ç‰¹åˆ«æ³¨æ„å®šæœŸå¯¹ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨çš„è¡¨æ ¼è¿›è¡Œä¸»è¦å‹ç¼©ã€‚å¦‚æ•°æ®æ¨¡å‹ä¸­æ‰€è¿°ï¼Œå°†è¡Œæ ‡è®°ä¸ºå·²åˆ é™¤ä¼šåˆ›å»ºå…¶ä»–StoreFilesï¼Œç„¶åéœ€è¦åœ¨è¯»å–æ—¶å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚
åˆ é™¤RPCè¡Œä¸º è¯·æ³¨æ„ï¼ŒTable.delete(Delete)ä¸ä½¿ç”¨writeBufferã€‚å®ƒå°†åœ¨æ¯æ¬¡è°ƒç”¨æ—¶æ‰§è¡ŒRegionServer RPCã€‚å¯¹äºå¤§é‡åˆ é™¤ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ï¼šTable.delete(List)ã€‚
è¯·å‚é˜…hbase.client.Delete</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/172/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåäºŒã€HBaseæ€§èƒ½è°ƒæ•´ï¼šJava GC" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåäºŒã€HBaseæ€§èƒ½è°ƒæ•´ï¼šJava GC" href="/docs/bigdata/hbase/172/">ä¸€ç™¾ä¸ƒåäºŒã€HBaseæ€§èƒ½è°ƒæ•´ï¼šJava GC</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">Java GCå’ŒApache HBase åƒåœ¾å›æ”¶(GC)æœºåˆ¶é•¿æ—¶é—´æš‚åœ åœ¨Todd Lipconçš„æ¼”ç¤ºä¸­ï¼Œä½¿ç”¨MemStore-Local Allocation Buffersé¿å…ä½¿ç”¨å®Œæ•´çš„GCï¼ˆhttp://www.slideshare.net/cloudera/hbase-hug-presentationï¼‰ï¼Œæè¿°äº†HBaseä¸­å¸¸è§çš„ä¸¤ç§åœæ­¢åƒåœ¾æ”¶é›†çš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯åœ¨åŠ è½½è¿‡ç¨‹ä¸­ï¼›CMSæ•…éšœæ¨¡å¼å’Œå’Œè€ä¸€ä»£å †ç¢ç‰‡å¸¦æ¥çš„ã€‚
è¦è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œè¯·é€šè¿‡æ·»åŠ -XX:CMSInitiatingOccupancyFractioné»˜è®¤å€¼å¹¶å°†å…¶è®¾ç½®ä¸ºé»˜è®¤å€¼æ¥å¯åŠ¨æ—©äºé»˜è®¤å€¼çš„CMS ã€‚ä»60ï¼…æˆ–70ï¼…å¼€å§‹ï¼ˆé™ä½é˜ˆå€¼ï¼Œå®Œæˆçš„GCingè¶Šå¤šï¼Œä½¿ç”¨çš„CPUè¶Šå¤šï¼‰ã€‚
ä¸ºäº†è§£å†³ç¬¬äºŒä¸ªç¢ç‰‡é—®é¢˜ï¼ŒToddè¡¥å……å®éªŒè®¾æ–½ï¼ˆMSLABï¼Œå…¨ç§°æ˜¯ MemStore-Local Allocation Bufferï¼‰ï¼Œå¿…é¡»åœ¨Apache HBase 0.90.xæ˜ç¡®å¯ç”¨ï¼ˆå®ƒé»˜è®¤æ˜¯åœ¨Apache HBase 0.92.xçš„ï¼‰ã€‚åœ¨ä½ çš„Configurationä¸­è®¾ç½®hbase.hregion.memstore.mslab.enabledä¸ºtrueã€‚æœ€æ–°çš„JVMæ›´å¥½åœ°è€ƒè™‘ç¢ç‰‡ï¼Œå› æ­¤è¯·ç¡®ä¿æ‚¨è¿è¡Œçš„æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚åœ¨æ¶ˆæ¯ä¸­è¯»å‡ºï¼Œè¯†åˆ«ç”±ç¢ç‰‡å¼•èµ·çš„å¹¶å‘æ¨¡å¼æ•…éšœã€‚è¯·æ³¨æ„ï¼Œå¯ç”¨åï¼Œæ¯ä¸ªMemStoreå®ä¾‹å°†è‡³å°‘å ç”¨ä¸€ä¸ªMSLABå†…å­˜å®ä¾‹ã€‚å¦‚æœæ‚¨æœ‰æ•°åƒä¸ªåŒºåŸŸæˆ–è®¸å¤šåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸéƒ½æœ‰è®¸å¤šåˆ—æ—ï¼Œé‚£ä¹ˆMSLABçš„è¿™ç§åˆ†é…å¯èƒ½ä¼šè´Ÿè´£å †åˆ†é…çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œå¹¶ä¸”åœ¨æç«¯æƒ…å†µä¸‹ä¼šå¯¼è‡´OOMEã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ç¦ç”¨MSLABï¼Œæˆ–è€…é™ä½å®ƒä½¿ç”¨çš„å†…å­˜é‡ï¼Œæˆ–è€…å‡å°‘æ¯ä¸ªæœåŠ¡å™¨çš„åŒºåŸŸã€‚
å¦‚æœæ‚¨çš„å·¥ä½œè´Ÿè½½å¾ˆå¤§ï¼Œè¯·æŸ¥çœ‹HBASE-8163 MemStoreChunkPoolï¼šä½¿ç”¨MSLABæ—¶å¯¹JAVA GCçš„æ”¹è¿›ï¼ˆhttps://issues.apache.org/jira/browse/HBASE-8163ï¼‰ã€‚å®ƒæè¿°äº†åœ¨å†™å…¥è´Ÿè½½æœŸé—´é™ä½Youngä»£GCæ•°é‡çš„é…ç½®ã€‚
å¦‚æœä½ æ²¡æœ‰å®‰è£…HBASE-8163ï¼Œå’Œä½ æƒ³æé«˜ä½ çš„Youngä»£GCæ—¶é—´ï¼Œé‚£ä¹ˆéœ€è¦è€ƒè™‘çš„ä¸€ä¸ªæŠ€å·§æ˜¯åœ¨hbase-env.shä¸­è®¾ç½®GCé…ç½®-XX:PretenureSizeThresholdï¼Œè®©å®ƒçš„å¤§å°æ¯”hbase.hregion.memstore.mslab.chunksizeçš„å¤§å°è¦å°ä¸€äº›ï¼Œæ‰€ä»¥MSLABåˆ†é…ç›´æ¥å‘ç”Ÿåœ¨tenuredç©ºé—´è€Œä¸æ˜¯Youngä»£ã€‚ä½ è¿™æ ·åšæ˜¯å› ä¸ºè¿™äº›MSLABåˆ†é…æ— è®ºå¦‚ä½•éƒ½å¯èƒ½ä½¿å®ƒæˆä¸ºOldä»£ï¼Œè€Œä¸æ˜¯åœ¨edenç©ºé—´ä¸­æ‰¿å—æ¥è‡ªs0å’Œs1ä¹‹é—´çš„å¤åˆ¶çš„ä»£ä»·ï¼Œç„¶ååœ¨MSLABå–å¾—äº†è¶³å¤Ÿçš„tenureåï¼Œä»Youngä»£å¤åˆ¶åˆ°Oldä»£ï¼Œè¿™èŠ‚çœäº†ä¸€ç‚¹YGCæµå¤±å¹¶ç›´æ¥åˆ†é…åˆ°Oldä»£ã€‚
è¿˜è¦è€ƒè™‘å¯ç”¨å †å¤–å—ç¼“å­˜ã€‚è¿™å·²è¢«è¯æ˜å¯ä»¥ç¼“è§£GCæš‚åœæ—¶é—´ã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/179/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåä¹ã€HDFSçš„å·¥ä½œæ–¹å¼" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåä¹ã€HDFSçš„å·¥ä½œæ–¹å¼" href="/docs/bigdata/hbase/179/">ä¸€ç™¾ä¸ƒåä¹ã€HDFSçš„å·¥ä½œæ–¹å¼</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HDFS å› ä¸ºHBaseåœ¨HDFSä¸Šè¿è¡Œï¼Œæ‰€ä»¥äº†è§£å®ƒå¦‚ä½•å·¥ä½œä»¥åŠå®ƒå¦‚ä½•å½±å“HBaseéå¸¸é‡è¦ã€‚
ä½å»¶è¿Ÿè¯»å–çš„å½“å‰é—®é¢˜ HDFSçš„åŸå§‹ç”¨ä¾‹æ˜¯æ‰¹å¤„ç†ã€‚å› æ­¤ï¼Œä½å»¶è¿Ÿè¯»å–åœ¨å†å²ä¸Šä¸æ˜¯ä¼˜å…ˆäº‹é¡¹ã€‚éšç€Apache HBaseçš„æ—¥ç›Šæ™®åŠï¼Œè¿™ç§æƒ…å†µæ­£åœ¨å‘ç”Ÿå˜åŒ–ï¼Œå¹¶ä¸”å·²ç»åœ¨å¼€å‘ä¸­è¿›è¡Œäº†ä¸€äº›æ”¹è¿›ã€‚æœ‰å…³HBaseçš„HDFSæ”¹è¿›ï¼Œè¯·å‚é˜…Umbrella Jira Ticketã€‚
åˆ©ç”¨æœ¬åœ°æ•°æ® ç”±äºHadoop 1.0.0ï¼ˆä¹Ÿæ˜¯0.22.1,0.23.1ï¼ŒCDH3u3å’ŒHDP 1.0ï¼‰é€šè¿‡HDFS-2246ï¼Œå½“æ•°æ®æ˜¯æœ¬åœ°çš„ï¼ŒDFSClientå¯ä»¥è¿›è¡Œâ€œçŸ­è·¯â€å¹¶ç›´æ¥ä»ç£ç›˜è¯»å–è€Œä¸æ˜¯é€šè¿‡DataNodeã€‚å¯¹äºHBaseæ¥è¯´ï¼Œè¿™æ„å‘³ç€RegionServerså¯ä»¥ç›´æ¥è¯»å–å…¶è®¡ç®—æœºçš„ç£ç›˜ï¼Œè€Œä¸å¿…æ‰“å¼€socketä¸DataNodeé€šä¿¡ï¼Œå‰è€…é€šå¸¸è¦å¿«å¾—å¤šã€‚è¯·å‚é˜…JDçš„Performance Talkã€‚å¦è¯·å‚é˜…HBaseï¼Œmailï¼ƒdev â€“ read short circuitä»¥è·å¾—æœ‰å…³short circuitè¯»å–çš„æ›´å¤šè®¨è®ºã€‚
è¦å¯ç”¨â€œshort circuitâ€è¯»å–ï¼Œå®ƒå°†å–å†³äºæ‚¨çš„Hadoopç‰ˆæœ¬ã€‚åœ¨HDFS-347ä¸­ï¼ŒHadoop 2ä¸­çš„åŸå§‹shortcircuitè¡¥ä¸å¾—åˆ°äº†å¾ˆå¤§æ”¹è¿›ã€‚è¯·å‚é˜…http://blog.cloudera.com/blog/2013/08/how-improved-short-circuit-local-reads-bring-better-performance-and-security-to-hadoop/ï¼Œä»¥æœ‰å…³æ–°æ—§å®ç°çš„åŒºåˆ«ã€‚è¯·å‚é˜…Hadoop shortcircuitè¯»å–é…ç½®é¡µé¢ï¼Œäº†è§£å¦‚ä½•å¯ç”¨åè€…ï¼Œæ›´å¥½çš„shortcircuitç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ€å°é…ç½®ã€‚å¯ç”¨æ·»åŠ åˆ°hbase-site.xmlçš„short-circuitï¼š
1&lt;property&gt; 2 &lt;name&gt;dfs.client.read.shortcircuit&lt;/name&gt; 3 &lt;value&gt;true&lt;/value&gt; 4 &lt;description&gt; 5 This configuration parameter turns on short-circuit local reads. 6 &lt;/description&gt; 7&lt;/property&gt; 8&lt;property&gt; 9 &lt;name&gt;dfs.domain.socket.path&lt;/name&gt; 10 &lt;value&gt;/home/stack/sockets/short_circuit_read_socket_PORT&lt;/value&gt; 11 &lt;description&gt; 12 Optional. This is a path to a UNIX domain socket that will be used for 13 communication between the DataNode and local HDFS clients.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/179/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾ä¸ƒåä¹ã€HDFSçš„å·¥ä½œæ–¹å¼çš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/176/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåå…­ã€HBaseç›¸å…³å†…å®¹" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåå…­ã€HBaseç›¸å…³å†…å®¹" href="/docs/bigdata/hbase/176/">ä¸€ç™¾ä¸ƒåå…­ã€HBaseç›¸å…³å†…å®¹</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æ‰¹é‡åŠ è½½ å¦‚æœå¯ä»¥ï¼Œè¯·ä½¿ç”¨æ‰¹é‡åŠ è½½å·¥å…·ã€‚è¯·å‚é˜…HBaseæ‰¹é‡åŠ è½½ã€‚å¦åˆ™ï¼Œè¯·æ³¨æ„ä»¥ä¸‹å†…å®¹ã€‚
è¡¨åˆ›å»ºï¼šé¢„åˆ›å»ºåŒºåŸŸ é»˜è®¤æƒ…å†µä¸‹ï¼ŒHBaseä¸­çš„è¡¨æœ€åˆæ˜¯ä½¿ç”¨ä¸€ä¸ªåŒºåŸŸåˆ›å»ºçš„ã€‚å¯¹äºæ‰¹é‡å¯¼å…¥ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰å®¢æˆ·ç«¯éƒ½å°†å†™å…¥åŒä¸€åŒºåŸŸï¼Œç›´åˆ°å®ƒè¶³å¤Ÿå¤§ï¼Œå¯ä»¥æ‹†åˆ†å¹¶åœ¨é›†ç¾¤ä¸­åˆ†å¸ƒã€‚åŠ é€Ÿæ‰¹é‡å¯¼å…¥è¿‡ç¨‹çš„ä¸€ä¸ªæœ‰ç”¨æ¨¡å¼æ˜¯é¢„å…ˆåˆ›å»ºç©ºç™½åŒºåŸŸã€‚åœ¨è¿™æ–¹é¢è¦ä¿å®ˆä¸€ç‚¹ï¼Œå› ä¸ºå¤ªå¤šçš„åŒºåŸŸå®é™…ä¸Šä¼šé™ä½æ€§èƒ½ã€‚
ä½¿ç”¨HBase APIé¢„åˆ›å»ºæ‹†åˆ†æœ‰ä¸¤ç§ä¸åŒçš„æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä¾é é»˜è®¤Adminç­–ç•¥ï¼ˆåœ¨Bytes.splitä¸­å®ç°ï¼‰â€¦â€¦
1byte[] startKey = ...; // your lowest key 2byte[] endKey = ...; // your highest key 3int numberOfRegions = ...; // of regions to create 4admin.createTable(table, startKey, endKey, numberOfRegions); è€Œä½¿ç”¨HBase APIçš„å¦ä¸€ç§æ–¹æ³•æ˜¯è‡ªå·±å®šä¹‰æ‹†åˆ†â€¦
1byte[][] splits = ...; // create your own splits 2admin.createTable(table, splits); ä½¿ç”¨HBase Shellå¯ä»¥é€šè¿‡æŒ‡å®šæ‹†åˆ†é€‰é¡¹æ¥åˆ›å»ºè¡¨ï¼Œä»è€Œå®ç°ç±»ä¼¼çš„æ•ˆæœã€‚
1# create table with specific split points 2hbase&gt;create &#39;t1&#39;,&#39;f1&#39;,SPLITS =&gt; [&#39;\x10\x00&#39;, &#39;\x20\x00&#39;, &#39;\x30\x00&#39;, &#39;\x40\x00&#39;] 3# create table with four regions based on random bytes keys 4hbase&gt;create &#39;t2&#39;,&#39;f1&#39;, { NUMREGIONS =&gt; 4 , SPLITALGO =&gt; &#39;UniformSplit&#39; } 5# create table with five regions based on hex keys 6create &#39;t3&#39;,&#39;f1&#39;, { NUMREGIONS =&gt; 5, SPLITALGO =&gt; &#39;HexStringSplit&#39; } æœ‰å…³ç†è§£é”®ç©ºé—´å’Œé¢„åˆ›å»ºåŒºåŸŸçš„ç›¸å…³é—®é¢˜ï¼Œè¯·å‚é˜…RowKeyså’ŒåŒºåŸŸåˆ†å‰²ä¹‹é—´çš„å…³ç³»ã€‚æœ‰å…³æ‰‹åŠ¨é¢„åˆ†å‰²åŒºåŸŸçš„è®¨è®ºï¼Œè¯·å‚é˜…æ‰‹åŠ¨æ‹†åˆ†åŒºåŸŸå†³ç­–ã€‚æœ‰å…³ä½¿ç”¨HBase shellé¢„æ‹†åˆ†è¡¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ä½¿ç”¨HBase shellé¢„åˆ†å‰²è¡¨ã€‚</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/176/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾ä¸ƒåå…­ã€HBaseç›¸å…³å†…å®¹çš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/177/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåä¸ƒã€ä»HBaseè¯»å–" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåä¸ƒã€ä»HBaseè¯»å–" href="/docs/bigdata/hbase/177/">ä¸€ç™¾ä¸ƒåä¸ƒã€ä»HBaseè¯»å–</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">ä»HBaseè¯»å– å¦‚æœæ‚¨é‡åˆ°æ€§èƒ½é—®é¢˜ï¼Œé‚®ä»¶åˆ—è¡¨å¯ä»¥æä¾›å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå…³äºè§£å†³è¯»å–æ—¶é—´é—®é¢˜çš„ä¸€ä¸ªå¾ˆå¥½çš„é€šç”¨çº¿ç¨‹ï¼šScan scan = new Scan(); scan.addColumn(â€¦); scan.setAttribute(Scan.HINT_LOOKAHEAD, Bytes.toBytes(2)); table.getScanner(scan); å…³é—­ResultScanners [è¿™ä¸ä»…ä»…æ˜¯æé«˜æ€§èƒ½ï¼Œè€Œæ˜¯é¿å…æ€§èƒ½é—®é¢˜ã€‚å¦‚æœå¿˜è®°å…³é—­ResultScannersï¼Œå¯èƒ½ä¼šå¯¼è‡´RegionServerså‡ºç°é—®é¢˜ã€‚å§‹ç»ˆå°†ResultScannerå¤„ç†åŒ…å«åœ¨try/catchå—ä¸­ã€‚
```java
Scan scan = new Scan(); // set attrs... ResultScanner rs = table.getScanner(scan); try { for (Result r = rs.next(); r != null; r = rs.next()) { // process result... } finally { rs.close(); // always close the ResultScanner! table.close();
```end
å—ç¼“å­˜
å¯ä»¥é€šè¿‡è¯¥setCacheBlocksæ–¹æ³•å°†æ‰«æå®ä¾‹è®¾ç½®ä¸ºä½¿ç”¨RegionServerä¸­çš„å—ç¼“å­˜ã€‚å¯¹äºè¾“å…¥æ‰«æåˆ°MapReduceä½œä¸šï¼Œè¿™åº”è¯¥æ˜¯falseã€‚å¯¹äºé¢‘ç¹è®¿é—®çš„è¡Œï¼Œå»ºè®®ä½¿ç”¨å—ç¼“å­˜ã€‚]Scan scan _ new Scan_ scan.addColumn_â€¦_ scan.setAttribute_Scan.HINT_LOOKAHEAD_ Bytes.toBytes_2_ table.getScanner_scan_
é€šè¿‡åœ¨å †å¤–ç§»åŠ¨å—ç¼“å­˜æ¥ç¼“å­˜æ›´å¤šæ•°æ®ã€‚è¯·å‚é˜…[å †å¤–å—ç¼“å­˜][Link1]ã€‚
è¡Œé”®çš„æœ€ä½³åŠ è½½ æ‰§è¡Œåªéœ€è¦è¡Œé”®çš„è¡¨æ‰«æï¼ˆæ²¡æœ‰æ—ï¼Œé™å®šç¬¦ï¼Œå€¼æˆ–æ—¶é—´æˆ³ï¼‰æ—¶ï¼Œè¯·ä½¿ç”¨setFilterå‘æ‰«æä»ªæ·»åŠ å¸¦æœ‰MUST_PASS_ALLè¿ç®—ç¬¦çš„FilterListã€‚ç­›é€‰å™¨åˆ—è¡¨åº”åŒ…æ‹¬FirstKeyOnlyFilterå’ŒKeyOnlyFilterã€‚ä½¿ç”¨æ­¤ç­›é€‰å™¨ç»„åˆå°†å¯¼è‡´æœ€åçš„æƒ…å†µï¼Œå³RegionServerä»ç£ç›˜è¯»å–å•ä¸ªå€¼ï¼Œå¹¶ä¸ºå•ä¸ªè¡Œå°†æœ€å°çš„ç½‘ç»œæµé‡å‘é€åˆ°å®¢æˆ·ç«¯ã€‚
å¹¶å‘ï¼šç›‘æ§æ•°æ®ä¼ æ’­ æ‰§è¡Œå¤§é‡å¹¶å‘è¯»å–æ—¶ï¼Œç›‘è§†ç›®æ ‡è¡¨çš„æ•°æ®ä¼ æ’­ã€‚å¦‚æœç›®æ ‡è¡¨å…·æœ‰çš„åŒºåŸŸå¤ªå°‘ï¼Œåˆ™å¯èƒ½ä»å¤ªå°‘çš„èŠ‚ç‚¹æä¾›è¯»å–ã€‚
è¯·å‚é˜…[è¡¨åˆ›å»ºï¼šé¢„åˆ›å»ºåŒºåŸŸ][Link2]ä»¥åŠ[HBaseé…ç½®][HBase]
Bloomè¿‡æ»¤å™¨ å¯ç”¨Bloomè¿‡æ»¤å™¨å¯ä»¥èŠ‚çœæ‚¨çš„ç£ç›˜ç©ºé—´ï¼Œå¹¶æœ‰åŠ©äºæ”¹å–„è¯»å–å»¶è¿Ÿã€‚</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/177/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾ä¸ƒåä¸ƒã€ä»HBaseè¯»å–çš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/173/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåä¸‰ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šé…ç½®" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåä¸‰ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šé…ç½®" href="/docs/bigdata/hbase/173/">ä¸€ç™¾ä¸ƒåä¸‰ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šé…ç½®</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HBaseé…ç½® è¯·å‚é˜…HBaseé‡è¦é…ç½®ä¸€èŠ‚çš„å†…å®¹ã€‚
ç®¡ç†å‹ç¼© å¯¹äºè¾ƒå¤§çš„ç³»ç»Ÿï¼Œç®¡ç†link:[compactions and splits]å¯èƒ½æ˜¯æ‚¨éœ€è¦è€ƒè™‘çš„äº‹æƒ…ã€‚
hbase.regionserver.handler.count è§[hbase.regionserver.handler.count]ã€‚
hfile.block.cache.size è¯·å‚è§[hfile.block.cache.size]ã€‚RegionServerè¿›ç¨‹çš„å†…å­˜è®¾ç½®ã€‚
Blockcacheçš„é¢„å–é€‰é¡¹ å¦‚æœè®¾ç½®äº†åˆ—æ—æˆ–RegionServerå±æ€§ï¼ŒHBASE-9857ä¼šåœ¨æ‰“å¼€BlockCacheæ—¶æ·»åŠ ä¸€ä¸ªæ–°é€‰é¡¹æ¥é¢„å–HFileå†…å®¹ã€‚æ­¤é€‰é¡¹é€‚ç”¨äºHBase 0.98.3åŠæ›´é«˜ç‰ˆæœ¬ã€‚ç›®çš„æ˜¯åœ¨æ‰“å¼€ç¼“å­˜åï¼Œä½¿ç”¨å†…å­˜ä¸­çš„è¡¨æ•°æ®å°½å¯èƒ½å¿«åœ°é¢„çƒ­BlockCacheï¼Œè€Œä¸æ˜¯å°†é¢„å–æ•°è®¡ä¸ºç¼“å­˜æœªå‘½ä¸­ã€‚è¿™å¯¹äºå¿«é€Ÿè¯»å–éå¸¸æœ‰ç”¨ï¼Œä½†å¦‚æœè¦é¢„åŠ è½½çš„æ•°æ®ä¸é€‚åˆBlockCacheï¼Œåˆ™ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚å®ƒå¯ç”¨äºè°ƒæ•´é¢„å–çš„IOå½±å“ä¸æ‰€æœ‰æ•°æ®å—åœ¨ç¼“å­˜ä¸­çš„æ—¶é—´ä¹‹é—´çš„å…³ç³»ã€‚
è¦åœ¨ç»™å®šåˆ—æ—ä¸Šå¯ç”¨é¢„å–ï¼Œå¯ä»¥ä½¿ç”¨HBase Shellæˆ–ä½¿ç”¨APIã€‚
ä½¿ç”¨HBase Shellå¯ç”¨é¢„å–ï¼š
1hbase&gt; create &#39;MyTable&#39;, { NAME =&gt; &#39;myCF&#39;, PREFETCH_BLOCKS_ON_OPEN =&gt; &#39;true&#39; } ä½¿ç”¨APIå¯ç”¨é¢„å–
1// ... 2HTableDescriptor tableDesc = new HTableDescriptor(&#34;myTable&#34;); 3HColumnDescriptor cfDesc = new HColumnDescriptor(&#34;myCF&#34;); 4cfDesc.setPrefetchBlocksOnOpen(true); 5tableDesc.addFamily(cfDesc); 6// ... è¦æŸ¥çœ‹è¿è¡Œä¸­çš„é¢„å–ï¼Œè¯·åœ¨hbase-2.0 +ä¸­çš„org.apache.hadoop.hbase.io.hfile.HFileReaderImplï¼Œæˆ–åœ¨HBaseçš„æ—©æœŸç‰ˆæœ¬ï¼Œhbase-1.xä¸­çš„org.apache.hadoop.hbase.io.hfile.HFileReaderV2ä¸­å¯ç”¨TRACEçº§åˆ«ç™»å½•ã€‚
hbase.regionserver.global.memstore.size è¯·å‚è§[hbase.regionserver.global.memstore.size]ã€‚é€šå¸¸æ ¹æ®éœ€è¦ä¸ºRegionServerè¿›ç¨‹è°ƒæ•´æ­¤å†…å­˜è®¾ç½®ã€‚
hbase.regionserver.global.memstore.size.lower.limit è¯·å‚è§[hbase.regionserver.global.memstore.size.lower.limit]ã€‚é€šå¸¸æ ¹æ®éœ€è¦ä¸ºRegionServerè¿›ç¨‹è°ƒæ•´æ­¤å†…å­˜è®¾ç½®ã€‚
hbase.hstore.blockingStoreFiles è¯·å‚è§[hbase.hstore.blockingStoreFiles]ã€‚å¦‚æœRegionServeræ—¥å¿—ä¸­å­˜åœ¨é˜»å¡ï¼Œåˆ™å¢åŠ æ­¤å€¼å¯èƒ½æœ‰æ‰€å¸®åŠ©ã€‚
hbase.hregion.memstore.block.multiplier è¯·å‚è§[hbase.hregion.memstore.block.multiplier]ã€‚å¦‚æœæœ‰è¶³å¤Ÿçš„RAMï¼Œå¢åŠ è¿™ä¸ªå¯ä»¥å¸®åŠ©ã€‚
hbase.regionserver.checksum.verify è®©HBaseå°†æ ¡éªŒå’Œå†™å…¥æ•°æ®å—ï¼Œå¹¶ä¿å­˜åœ¨è¯»å–æ—¶å¿…é¡»è¿›è¡Œæ ¡éªŒå’ŒæŸ¥æ‰¾ã€‚
è¯·å‚è§[hbase.regionserver.checksum.verify]ï¼Œ[hbase.hstore.bytes.per.checksum]å’Œ[hbase.hstore.checksum.algorithm]ã€‚
è°ƒæ•´callQueueé€‰é¡¹ HBASE- 11355å¼•å…¥äº†å‡ ç§å¯ä»¥æé«˜æ€§èƒ½çš„callQueueè°ƒä¼˜æœºåˆ¶ã€‚
è¦å¢åŠ callqueueçš„æ•°é‡ï¼Œè¯·è®¾ç½®hbase.ipc.server.num.callqueueä¸ºå¤§äº1çš„å€¼ã€‚è¦å°†callqueueæ‹†åˆ†ä¸ºå•ç‹¬çš„è¯»å†™é˜Ÿåˆ—ï¼Œè¯·å°†hbase.ipc.server.callqueue.read.ratioçš„å€¼è®¾ç½®ä¸º0å’Œ1ä¹‹é—´ã€‚æ­¤å› ç´ å°†é˜Ÿåˆ—çš„æƒé‡èµ‹ç»™å†™å…¥ï¼ˆå¦‚æœä½äº0.5ï¼‰æˆ–è¯»å–ï¼ˆå¦‚æœé«˜äº0.5ï¼‰ã€‚å¦ä¸€ç§è¯´æ³•æ˜¯ï¼Œè¯¥å› å­å†³å®šäº†æ‹†åˆ†é˜Ÿåˆ—ä¸­æœ‰å¤šå°‘ç™¾åˆ†æ¯”ç”¨äºè¯»å–ã€‚ä»¥ä¸‹ç¤ºä¾‹è¯´æ˜äº†ä¸€äº›å¯èƒ½æ€§ã€‚è¯·æ³¨æ„ï¼Œæ— è®ºæ‚¨ä½¿ç”¨ä½•ç§è®¾ç½®ï¼Œå§‹ç»ˆè‡³å°‘æœ‰ä¸€ä¸ªå†™å…¥é˜Ÿåˆ—ã€‚
é»˜è®¤å€¼ä¸º0ä¸æ‹†åˆ†é˜Ÿåˆ—ã€‚ å€¼0.3ä½¿ç”¨30ï¼…çš„é˜Ÿåˆ—è¿›è¡Œè¯»å–ï¼Œ60ï¼…ç”¨äºå†™å…¥ã€‚å¦‚æœhbase.ipc.server.num.callqueueçš„ç»™å®šå€¼ä¸º10ï¼Œåˆ™3ä¸ªé˜Ÿåˆ—å°†ç”¨äºè¯»å–ï¼Œ7ä¸ªç”¨äºå†™å…¥ã€‚ å€¼0.5ä½¿ç”¨ç›¸åŒæ•°é‡çš„è¯»å–é˜Ÿåˆ—å’Œå†™å…¥é˜Ÿåˆ—ã€‚å¦‚æœhbase.ipc.server.num.callqueueçš„ç»™å®šå€¼ä¸º10ï¼Œåˆ™å°†5ä¸ªé˜Ÿåˆ—ç”¨äºè¯»å–ï¼Œ5ä¸ªç”¨äºå†™å…¥ã€‚ å€¼0.6ä½¿ç”¨60ï¼…çš„é˜Ÿåˆ—è¿›è¡Œè¯»å–ï¼Œ30ï¼…ç”¨äºå†™å…¥ã€‚å¦‚æœhbase.ipc.server.num.callqueueçš„ç»™å®šå€¼ä¸º10ï¼Œåˆ™7ä¸ªé˜Ÿåˆ—å°†ç”¨äºè¯»å–ï¼Œ3ä¸ªç”¨äºå†™å…¥ã€‚ å€¼1.0ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥å¤„ç†å†™è¯·æ±‚ï¼Œæ‰€æœ‰å…¶ä»–é˜Ÿåˆ—å¤„ç†è¯»è¯·æ±‚ã€‚é«˜äºçš„å€¼1.0å…·æœ‰ä¸å€¼ç›¸åŒçš„æ•ˆæœ1.0ã€‚å¦‚æœhbase.ipc.server.num.callqueueçš„ç»™å®šå€¼ä¸º10ï¼Œåˆ™9ä¸ªé˜Ÿåˆ—å°†ç”¨äºè¯»å–ï¼Œ1ä¸ªç”¨äºå†™å…¥ã€‚ æ‚¨è¿˜å¯ä»¥æ‹†åˆ†è¯»å–é˜Ÿåˆ—ï¼Œä»¥ä¾¿é€šè¿‡è®¾ç½®hbase.ipc.server.callqueue.scan.ratioé€‰é¡¹å°†å•ç‹¬çš„é˜Ÿåˆ—ç”¨äºçŸ­è¯»å–ï¼ˆæ¥è‡ªGetæ“ä½œï¼‰å’Œé•¿è¯»å–ï¼ˆæ¥è‡ªScanæ“ä½œï¼‰ã€‚æ­¤é€‰é¡¹æ˜¯ä»‹äº0å’Œ1ä¹‹é—´çš„ä¸€ä¸ªå› å­ï¼Œå®ƒå†³å®šäº†ç”¨äºè·å–å’Œæ‰«æçš„è¯»å–é˜Ÿåˆ—çš„æ¯”ç‡ã€‚å¦‚æœå€¼ä½äº0.5ï¼Œåˆ™ä½¿ç”¨æ›´å¤šé˜Ÿåˆ—ç”¨äºè·å–ï¼Œå¦‚æœå€¼é«˜äº0.5ï¼Œåˆ™ä½¿ç”¨æ›´å¤šé˜Ÿåˆ—è¿›è¡Œæ‰«æã€‚æ— è®ºæ‚¨ä½¿ç”¨ä½•ç§è®¾ç½®ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªè¯»å–é˜Ÿåˆ—ç”¨äºGetæ“ä½œã€‚
å€¼ä¸º0ä¸ä¼šæ‹†åˆ†è¯»å–é˜Ÿåˆ—ã€‚ ä¸€ä¸ªå€¼0.3ä½¿ç”¨60ï¼…çš„è¯»å–é˜Ÿåˆ—æ¥ç”¨äºè·å–ï¼Œ30ï¼…ç”¨äºæ‰«æã€‚å¦‚æœhbase.ipc.server.num.callqueueç»™å®šçš„å€¼ä¸º20ï¼Œå¹¶ä¸”hbase.ipc.server.callqueue.read.ratioçš„å€¼ä¸º0.5ï¼Œé‚£ä¹ˆ10ä¸ªé˜Ÿåˆ—å°†ç”¨äºè¯»å–ï¼Œåœ¨è¿™10ä¸ªé˜Ÿåˆ—ä¸­ï¼Œ7ä¸ªé˜Ÿåˆ—ç”¨äºè·å–ï¼Œ3ä¸ªé˜Ÿåˆ—ç”¨äºæ‰«æã€‚ ä¸€ä¸ªå€¼0.</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/173/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾ä¸ƒåä¸‰ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šé…ç½®çš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/174/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåå››ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šæ¶æ„è®¾è®¡" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåå››ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šæ¶æ„è®¾è®¡" href="/docs/bigdata/hbase/174/">ä¸€ç™¾ä¸ƒåå››ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šæ¶æ„è®¾è®¡</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åˆ—æ—æ•° ##
è¯·å‚è§HBaseåˆ—æ—æ•°é‡ã€‚
é”®å’Œå±æ€§é•¿åº¦ å› åˆæ¬¡è®¿é—®ï¼Œä¸ºé˜²æ­¢çˆ¬è™«å’Œäººæœºè¯†åˆ«ï¼Œè¯·å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œå›å¤:â€˜éªŒè¯ç â€˜è·å–éªŒè¯ç æ¥è§£é”å…¨æ–‡ è§£é”å†…å®¹ è¯·å‚é˜…ï¼šå°½é‡å‡å°‘è¡Œå’Œåˆ—çš„å¤§å°ã€‚
è¡¨RegionSize åœ¨æŸäº›è¡¨éœ€è¦ä¸åŒåŒºåŸŸå¤§å°è€Œä¸æ˜¯é…ç½®çš„é»˜è®¤åŒºåŸŸå¤§å°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡åœ¨æ¯ä¸ªè¡¨çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡HTableDescriptorçš„setFileSizeæ¥è®¾ç½®åŒºåŸŸå¤§å°ã€‚
Bloomè¿‡æ»¤å™¨ Bloomè¿‡æ»¤å™¨æ˜¯ä»¥å…¶åˆ›å»ºè€…Burton Howard Bloomçš„åå­—å‘½åçš„ï¼Œå®ƒæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºé¢„æµ‹ç»™å®šå…ƒç´ æ˜¯å¦å±äºä¸€ç»„æ•°æ®ã€‚Bloomè¿‡æ»¤å™¨çš„è‚¯å®šç»“æœå¹¶ä¸æ€»æ˜¯å‡†ç¡®çš„ï¼Œä½†å¦å®šç»“æœæ˜¯å‡†ç¡®çš„ã€‚Bloomè¿‡æ»¤å™¨è¢«è®¾è®¡æˆå¯¹äºæ•°æ®é›†æ¥è¯´â€œè¶³å¤Ÿå‡†ç¡®â€ï¼Œè¿™äº›æ•°æ®é›†éå¸¸å¤§ä»¥è‡³äºä¼ ç»Ÿçš„å“ˆå¸Œæœºåˆ¶æ˜¯ä¸åˆ‡å®é™…çš„ã€‚æœ‰å…³Bloomè¿‡æ»¤å™¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…http://en.wikipedia.org/wiki/Bloom_filterã€‚
å°±HBaseè€Œè¨€ï¼ŒBloomè¿‡æ»¤å™¨æä¾›äº†ä¸€ä¸ªè½»é‡çº§çš„å†…å­˜ç»“æ„ï¼Œå¯ä»¥å°†ç»™å®šGetæ“ä½œï¼ˆBloomè¿‡æ»¤å™¨ä¸èƒ½ä¸Scansä¸€èµ·ä½¿ç”¨ï¼‰çš„ç£ç›˜è¯»å–æ¬¡æ•°å‡å°‘åˆ°ä»…åŒ…å«æ‰€éœ€è¡Œçš„StoreFilesã€‚æ½œåœ¨çš„æ€§èƒ½å¢ç›Šéšç€å¹¶è¡Œè¯»å–çš„æ•°é‡è€Œå¢åŠ ã€‚
Bloomè¿‡æ»¤å™¨æœ¬èº«å­˜å‚¨åœ¨æ¯ä¸ªHFileçš„å…ƒæ•°æ®ä¸­ï¼Œå¹¶ä¸”æ°¸è¿œä¸éœ€è¦æ›´æ–°ã€‚å½“å› ä¸ºåŒºåŸŸéƒ¨ç½²åˆ°RegionServerè€Œæ‰“å¼€HFileæ—¶ï¼ŒBloomè¿‡æ»¤å™¨å°†åŠ è½½åˆ°å†…å­˜ä¸­ã€‚
HBaseåŒ…æ‹¬ä¸€äº›è°ƒæ•´æœºåˆ¶ï¼Œç”¨äºæŠ˜å Bloomè¿‡æ»¤å™¨ä»¥å‡å°å¤§å°å¹¶å°†è¯¯æŠ¥ç‡ä¿æŒåœ¨ä¸€ä¸ªç†æƒ³çš„èŒƒå›´å†…ã€‚
Bloomè¿‡æ»¤å™¨åœ¨HBASE-1200ä¸­å¼•å…¥ã€‚ä»HBase 0.96å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹å¯ç”¨åŸºäºè¡Œçš„Bloomè¿‡æ»¤å™¨ã€‚ï¼ˆHBASE-8450ï¼‰
ä½•æ—¶ä½¿ç”¨Bloomè¿‡æ»¤å™¨ ä»HBase 0.96å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹å¯ç”¨åŸºäºè¡Œçš„Bloomè¿‡æ»¤å™¨ã€‚æ‚¨å¯ä»¥é€‰æ‹©ç¦ç”¨å®ƒä»¬æˆ–æ›´æ”¹æŸäº›è¡¨ä»¥ä½¿ç”¨è¡Œ+åˆ—Bloomè¿‡æ»¤å™¨ï¼Œå…·ä½“å–å†³äºæ•°æ®çš„ç‰¹å¾ä»¥åŠå¦‚ä½•å°†å…¶åŠ è½½åˆ°HBaseä¸­ã€‚
è¦ç¡®å®šBloomè¿‡æ»¤å™¨æ˜¯å¦ä¼šäº§ç”Ÿç§¯æå½±å“ï¼Œè¯·æ£€æŸ¥RegionServeråº¦é‡æ ‡å‡†ä¸­çš„blockCacheHitRatioå€¼ã€‚å¦‚æœå¯ç”¨äº†Bloomè¿‡æ»¤å™¨ï¼Œåˆ™å€¼blockCacheHitRatioåº”è¯¥å¢åŠ ï¼Œå› ä¸ºBloomè¿‡æ»¤å™¨æ­£åœ¨è¿‡æ»¤æ‰ç»å¯¹ä¸éœ€è¦çš„å—ã€‚
æ‚¨å¯ä»¥é€‰æ‹©ä¸ºè¡Œï¼Œæˆ–è¡Œ+åˆ—ç»„åˆæ¥å¯ç”¨Bloomè¿‡æ»¤å™¨ã€‚å¦‚æœæ‚¨é€šå¸¸æ‰«ææ•´è¡Œï¼Œåˆ™è¡Œ+åˆ—ç»„åˆä¸ä¼šæä¾›ä»»ä½•å¥½å¤„ã€‚åŸºäºè¡Œçš„Bloomè¿‡æ»¤å™¨å¯ä»¥å¯¹è¡Œ+åˆ—è¿›è¡ŒGetæ“ä½œï¼Œä½†ä¸èƒ½ä½¿ç”¨å…¶ä»–æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æœ‰å¤§é‡çš„åˆ—çº§åˆ«çš„Putsï¼Œä»¥ä¾¿æ¯ä¸ªStoreFileä¸­å¯èƒ½å­˜åœ¨ä¸€è¡Œï¼Œåˆ™åŸºäºè¡Œçš„è¿‡æ»¤å™¨å°†å§‹ç»ˆè¿”å›æ­£ç»“æœå¹¶ä¸”ä¸ä¼šå¸¦æ¥ä»»ä½•å¥½å¤„ã€‚é™¤éæ¯è¡Œæœ‰ä¸€åˆ—ï¼Œå¦åˆ™è¡Œ+åˆ—Bloomè¿‡æ»¤å™¨éœ€è¦æ›´å¤šç©ºé—´ï¼Œä»¥ä¾¿å­˜å‚¨æ›´å¤šå¯†é’¥ã€‚å½“æ¯ä¸ªæ•°æ®æ¡ç›®çš„å¤§å°è‡³å°‘ä¸ºå‡ åƒå­—èŠ‚æ—¶ï¼ŒBloomè¿‡æ»¤å™¨æ•ˆæœæœ€ä½³ã€‚
å½“æ‚¨çš„æ•°æ®å­˜å‚¨åœ¨å‡ ä¸ªè¾ƒå¤§çš„StoreFilesä¸­æ—¶ï¼Œå¼€é”€å°†å‡å°‘ï¼Œä»¥é¿å…åœ¨ä½çº§æ‰«ææœŸé—´é¢å¤–çš„ç£ç›˜IOæ‰¾åˆ°ç‰¹å®šçš„è¡Œã€‚
Bloomè¿‡æ»¤å™¨éœ€è¦åœ¨åˆ é™¤æ—¶é‡å»ºï¼Œå› æ­¤å¯èƒ½ä¸é€‚åˆå…·æœ‰å¤§é‡åˆ é™¤çš„ç¯å¢ƒã€‚
å¯ç”¨Bloomè¿‡æ»¤å™¨ åœ¨åˆ—æ—ä¸Šå¯ç”¨Bloomè¿‡æ»¤å™¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨HColumnDescriptorçš„setBloomFilterTypeæ–¹æ³•æˆ–ä½¿ç”¨HBase APIæ¥å®Œæˆæ­¤æ“ä½œã€‚æœ‰æ•ˆå€¼æ˜¯NONEï¼ŒROWï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œæˆ–ROWCOLã€‚
ä»¥ä¸‹ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œå¹¶åœ¨colfam1åˆ—æ—ä¸Šå¯ç”¨ROWCOL Bloomè¿‡æ»¤å™¨ã€‚
1hbase&gt; create &#39;mytable&#39;,{NAME =&gt; &#39;colfam1&#39;, BLOOMFILTER =&gt; &#39;ROWCOL&#39;} é…ç½®Bloomè¿‡æ»¤å™¨çš„æœåŠ¡å™¨èŒƒå›´è¡Œä¸º æ‚¨å¯ä»¥åœ¨hbase-site.xmlä¸­é…ç½®ä»¥ä¸‹è®¾ç½®ã€‚
å‚æ•° é»˜è®¤å€¼ æè¿° io.storefile.bloom.enabled
yes
å¦‚æœå‡ºç°é—®é¢˜ï¼Œè®¾ç½®ä¸ºnoä»¥æ€æ­»æœåŠ¡å™¨èŒƒå›´å†…çš„Bloomè¿‡æ»¤å™¨
io.storefile.bloom.error.rate
.01
Bloomè¿‡æ»¤å™¨çš„å¹³å‡è¯¯æŠ¥ç‡ã€‚æŠ˜å ç”¨äºç»´æŒè¯¯æŠ¥ç‡ã€‚è¡¨ç¤ºä¸ºç™¾åˆ†æ¯”çš„åè¿›åˆ¶è¡¨ç¤ºå½¢å¼ã€‚
io.storefile.bloom.max.fold
7
ä¿è¯æœ€å¤§æŠ˜å ç‡ã€‚ä¸éœ€è¦æ›´æ”¹æ­¤è®¾ç½®ï¼Œä¸å»ºè®®è¿™æ ·åšã€‚
io.storefile.bloom.max.keys
1.28
å¯¹äºé»˜è®¤ï¼ˆå•ä¸ªå—ï¼‰Bloomè¿‡æ»¤å™¨ï¼Œè¿™æŒ‡å®šäº†æœ€å¤§é”®æ•°ã€‚
io.storefile.delete.family.bloom.enabled
true
ä¸»å¼€å…³å¯ç”¨Delete Family Bloomè¿‡æ»¤å™¨å¹¶å°†å…¶å­˜å‚¨åœ¨StoreFileä¸­ã€‚
io.storefile.bloom.block.size
131072
ç›®æ ‡Bloomå—å¤§å°ã€‚å¤§çº¦è¿™ä¸ªå¤§å°çš„Bloomè¿‡æ»¤å™¨å—ä¸æ•°æ®å—äº¤ç»‡ã€‚
hfile.block.bloom.cacheonwrite
false
ä¸ºå¤åˆBloomè¿‡æ»¤å™¨çš„å†…è”å—å¯ç”¨å†™å…¥é«˜é€Ÿç¼“å­˜ã€‚
ColumnFamily BlockSize å¯ä»¥ä¸ºè¡¨ä¸­çš„æ¯ä¸ªColumnFamilyé…ç½®å—å¤§å°ï¼Œé»˜è®¤ä¸º64kã€‚è¾ƒå¤§çš„å•å…ƒå€¼éœ€è¦è¾ƒå¤§çš„å—å¤§å°ã€‚å—å¤§å°å’Œç”Ÿæˆçš„StoreFileç´¢å¼•ä¹‹é—´å­˜åœ¨åæ¯”å…³ç³»ï¼ˆå³ï¼Œå¦‚æœblocksizeåŠ å€ï¼Œåˆ™ç»“æœç´¢å¼•åº”è¯¥å¤§è‡´å‡åŠï¼‰ã€‚
å†…å­˜ColumnFamilies ColumnFamilieså¯ä»¥é€‰æ‹©å®šä¹‰ä¸ºå†…å­˜ä¸­ã€‚æ•°æ®ä»ç„¶ä¿ç•™åœ¨ç£ç›˜ä¸Šï¼Œå°±åƒä»»ä½•å…¶ä»–ColumnFamilyä¸€æ ·ã€‚å†…å­˜å—åœ¨å—ç¼“å­˜ä¸­å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼Œä½†ä¸ä¿è¯æ•´ä¸ªè¡¨å°†åœ¨å†…å­˜ä¸­ã€‚</div><div class="mt-2"><a class="text-secondary" href="/docs/bigdata/hbase/174/">é˜…è¯»æ›´å¤šå…³äºä¸€ç™¾ä¸ƒåå››ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šæ¶æ„è®¾è®¡çš„å†…å®¹ã€‚</a></div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/175/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåäº”ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šä¸€èˆ¬æ¨¡å¼" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåäº”ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šä¸€èˆ¬æ¨¡å¼" href="/docs/bigdata/hbase/175/">ä¸€ç™¾ä¸ƒåäº”ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šä¸€èˆ¬æ¨¡å¼</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">HBaseä¸€èˆ¬æ¨¡å¼ å¸¸é‡ å½“äººä»¬å¼€å§‹ä½¿ç”¨HBaseæ—¶ï¼Œä»–ä»¬å€¾å‘äºç¼–å†™å¦‚ä¸‹æ‰€ç¤ºçš„ä»£ç ï¼š
1Get get = new Get(rowkey); 2Result r = table.get(get); 3byte[] b = r.getValue(Bytes.toBytes(&#34;cf&#34;), Bytes.toBytes(&#34;attr&#34;)); // returns current version of value ä½†æ˜¯ç‰¹åˆ«æ˜¯å½“å†…éƒ¨å¾ªç¯ï¼ˆå’ŒMapReduceä½œä¸šï¼‰æ—¶ï¼Œå°†columnFamilyå’Œcolumn-namesé‡å¤è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„çš„æˆæœ¬éå¸¸é«˜ã€‚æœ€å¥½å¯¹å­—èŠ‚æ•°ç»„ä½¿ç”¨å¸¸é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
1public static final byte[] CF = &#34;cf&#34;.getBytes(); 2public static final byte[] ATTR = &#34;attr&#34;.getBytes(); 3... 4Get get = new Get(rowkey); 5Result r = table.get(get); 6byte[] b = r.getValue(CF, ATTR); // returns current version of value</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/171/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸ƒåä¸€ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šç½‘ç»œ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸ƒåä¸€ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šç½‘ç»œ" href="/docs/bigdata/hbase/171/">ä¸€ç™¾ä¸ƒåä¸€ã€HBaseæ€§èƒ½è°ƒæ•´ï¼šç½‘ç»œ</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">ç½‘ç»œ é¿å…ç½‘ç»œé—®é¢˜é™ä½Hadoopå’ŒHBaseæ€§èƒ½çš„æœ€é‡è¦å› ç´ å¯èƒ½æ˜¯æ‰€ä½¿ç”¨çš„äº¤æ¢ç¡¬ä»¶ï¼Œåœ¨é¡¹ç›®èŒƒå›´çš„æ—©æœŸåšå‡ºçš„å†³ç­–å¯èƒ½ä¼šå¯¼è‡´ç¾¤é›†å¤§å°å¢åŠ ä¸€å€æˆ–ä¸‰å€ï¼ˆæˆ–æ›´å¤šï¼‰æ—¶å‡ºç°é‡å¤§é—®é¢˜ã€‚
éœ€è¦è€ƒè™‘çš„é‡è¦äº‹é¡¹ï¼š
åˆ‡æ¢è®¾å¤‡çš„å®¹é‡ è¿æ¥çš„ç³»ç»Ÿæ•°é‡ ä¸Šè¡Œé“¾è·¯å®¹é‡ å•ä¸ªäº¤æ¢æœº æ­¤é…ç½®ä¸­æœ€é‡è¦çš„ä¸€ä¸ªå› ç´ æ˜¯ç¡¬ä»¶çš„äº¤æ¢å®¹é‡èƒ½å¤Ÿå¤„ç†è¿æ¥åˆ°äº¤æ¢æœºçš„æ‰€æœ‰ç³»ç»Ÿå¯ä»¥ç”Ÿæˆçš„é€šä¿¡é‡ã€‚ä¸€äº›è¾ƒä½ä»·æ ¼çš„å•†ç”¨ç¡¬ä»¶å¯ä»¥å…·æœ‰æ¯”å®Œæ•´äº¤æ¢æœºå¯ä»¥ä½¿ç”¨çš„æ›´æ…¢çš„äº¤æ¢å®¹é‡ã€‚
å¤šä¸ªäº¤æ¢æœº å¤šä¸ªäº¤æ¢æœºæ˜¯æ¶æ„ä¸­çš„æ½œåœ¨ç¼ºé™·ã€‚ä½ä»·ç¡¬ä»¶çš„æœ€å¸¸è§é…ç½®æ˜¯ä»ä¸€ä¸ªäº¤æ¢æœºåˆ°å¦ä¸€ä¸ªäº¤æ¢æœºçš„ç®€å•1Gbpsä¸Šè¡Œé“¾è·¯ã€‚è¿™ç§ç»å¸¸è¢«å¿½è§†çš„å¤¹ç‚¹å¾ˆå®¹æ˜“æˆä¸ºé›†ç¾¤é€šä¿¡çš„ç“¶é¢ˆã€‚ç‰¹åˆ«æ˜¯å¯¹äºè¯»å–å’Œå†™å…¥å¤§é‡æ•°æ®çš„MapReduceä½œä¸šï¼Œæ­¤ä¸Šè¡Œé“¾è·¯ä¸Šçš„é€šä¿¡å¯èƒ½ä¼šé¥±å’Œã€‚
ç¼“è§£è¿™ä¸ªé—®é¢˜éå¸¸ç®€å•ï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼š
ä½¿ç”¨é€‚å½“çš„ç¡¬ä»¶æ¥å¤„ç†æ‚¨å°è¯•æ„å»ºçš„ç¾¤é›†çš„è§„æ¨¡ã€‚ ä½¿ç”¨è¾ƒå¤§çš„å•ä¸ªäº¤æ¢æœºé…ç½®ï¼Œå³å•ä¸ª48ç«¯å£ï¼Œè€Œä¸æ˜¯2ä¸ª24ç«¯å£ ä¸ºä¸Šè¡Œé“¾è·¯é…ç½®ç«¯å£ä¸­ç»§ï¼Œä»¥åˆ©ç”¨å¤šä¸ªæ¥å£æ¥å¢åŠ äº¤å‰äº¤æ¢æœºå¸¦å®½ã€‚ å¤šä¸ªæœºæ¶ å¤šä¸ªæœºæ¶é…ç½®å…·æœ‰ä¸å¤šä¸ªäº¤æ¢æœºç›¸åŒçš„æ½œåœ¨é—®é¢˜ï¼Œå¹¶ä¸”å¯èƒ½ä¼šä»ä¸¤ä¸ªä¸»è¦æ–¹é¢é™ä½æ€§èƒ½ï¼š
äº¤æ¢å®¹é‡æ€§èƒ½ä¸ä½³ ä¸Šè¡Œé“¾è·¯åˆ°å¦ä¸€ä¸ªæœºæ¶çš„èƒ½åŠ›ä¸è¶³ å¦‚æœæœºæ¶ä¸­çš„äº¤æ¢æœºå…·æœ‰é€‚å½“çš„äº¤æ¢å®¹é‡ä»¥å…¨é€Ÿå¤„ç†æ‰€æœ‰ä¸»æœºï¼Œåˆ™ä¸‹ä¸€ä¸ªæœ€å¯èƒ½å‡ºç°çš„é—®é¢˜å°†æ˜¯é€šè¿‡åœ¨æœºæ¶ä¸­å¼•å¯¼æ›´å¤šç¾¤é›†å¼•èµ·çš„ã€‚è·¨è¶Šå¤šä¸ªæœºæ¶æ—¶é¿å…é—®é¢˜çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ç«¯å£ä¸­ç»§æ¥åˆ›å»ºåˆ°å…¶ä»–æœºæ¶çš„ç»‘å®šä¸Šè¡Œé“¾è·¯ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯å¯èƒ½ä½¿ç”¨çš„ç«¯å£å¼€é”€ã€‚ä¾‹å¦‚ï¼Œä»æœºæ¶Aåˆ°æœºæ¶Båˆ›å»ºä¸€ä¸ª8Gbpsç«¯å£é€šé“ï¼Œä½¿ç”¨24ä¸ªç«¯å£ä¸­çš„8ä¸ªåœ¨æœºæ¶ä¹‹é—´è¿›è¡Œé€šä¿¡ä¼šé™ä½æŠ•èµ„å›æŠ¥ç‡ï¼Œä½†ä½¿ç”¨å¤ªå°‘å¯èƒ½æ„å‘³ç€æ‚¨æ— æ³•ä»ç¾¤é›†ä¸­è·å¾—æœ€å¤§çš„æ”¶ç›Šã€‚
åœ¨æœºæ¶ä¹‹é—´ä½¿ç”¨10Gbeé“¾æ¥å°†å¤§å¤§æé«˜æ€§èƒ½ï¼Œå¹¶ä¸”å‡è®¾æ‚¨çš„äº¤æ¢æœºæ”¯æŒ10Gbeä¸Šè¡Œé“¾è·¯æˆ–å…è®¸æ‰©å±•å¡ï¼Œåˆ™å…è®¸æ‚¨ä¸ºè®¡ç®—æœºä¿å­˜ç«¯å£ï¼Œè€Œä¸æ˜¯ä¸Šè¡Œé“¾è·¯ã€‚
ç½‘ç»œæ¥å£ ç¡®è®¤æ‰€æœ‰ç½‘ç»œæ¥å£æ˜¯å¦éƒ½æ­£å¸¸è¿è¡Œã€‚
ç½‘ç»œä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™åº¦ CAPå®šç†æŒ‡å‡ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿå¯ä»¥ç»´æŒä»¥ä¸‹ä¸‰ç§ç‰¹æ€§ä¸­çš„ä¸¤ç§ï¼š â€“ *C*onsistency â€“ æ‰€æœ‰èŠ‚ç‚¹éƒ½çœ‹åˆ°ç›¸åŒçš„æ•°æ®ã€‚ â€“ *A*vailability â€“ æ¯ä¸ªè¯·æ±‚éƒ½ä¼šæ”¶åˆ°æœ‰å…³å®ƒæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥çš„å“åº”ã€‚ â€“ *P*artition tolerance â€“ å³ä½¿å…¶ä»–ç»„ä»¶æ— æ³•ä½¿ç”¨ï¼Œç³»ç»Ÿä¹Ÿä¼šç»§ç»­è¿è¡Œã€‚
HBaseæœ‰åˆ©äºä¸€è‡´æ€§å’Œåˆ†åŒºå®¹é”™åº¦ï¼Œå¿…é¡»åšå‡ºå†³å®šã€‚Coda Haleè§£é‡Šäº†ä¸ºä»€ä¹ˆåˆ†åŒºå®¹é”™åº¦å¦‚æ­¤é‡è¦ï¼Œè¯·è®¿é—®http://codahale.com/you-cant-sacrifice-partition-tolerance/ã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/130/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸‰åã€Hbaseåˆ›å»ºå¤‡ä»½æ˜ åƒ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸‰åã€Hbaseåˆ›å»ºå¤‡ä»½æ˜ åƒ" href="/docs/bigdata/hbase/130/">ä¸€ç™¾ä¸‰åã€Hbaseåˆ›å»ºå¤‡ä»½æ˜ åƒ</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åˆ›å»ºå¤‡ä»½æ˜ åƒ å¯¹äºä¹Ÿä½¿ç”¨Apache Phoenixçš„HBaseç¾¤é›†: åŒ…æ‹¬å¤‡ä»½ä¸­çš„SQLç³»ç»Ÿç›®å½•è¡¨ã€‚åœ¨éœ€è¦è¿˜åŸHBaseå¤‡ä»½çš„æƒ…å†µä¸‹ï¼Œå¯¹ç³»ç»Ÿç›®å½•è¡¨çš„è®¿é—®å¯ä»¥å¸®åŠ©æ‚¨æ¢å¤Phoenixä¸è¿˜åŸçš„æ•°æ®çš„äº’æ“ä½œæ€§ã€‚
è¿è¡Œå¤‡ä»½å’Œè¿˜åŸå®ç”¨ç¨‹åºçš„ç¬¬ä¸€æ­¥æ˜¯æ‰§è¡Œå®Œæ•´å¤‡ä»½ï¼Œå¹¶å°†æ•°æ®å­˜å‚¨åœ¨ä¸æºä¸åŒçš„æ˜ åƒä¸­ã€‚è‡³å°‘ï¼Œæ‚¨å¿…é¡»æ‰§è¡Œæ­¤æ“ä½œæ‰èƒ½è·å¾—åŸºå‡†ï¼Œç„¶åæ‰èƒ½ä¾èµ–å¢é‡å¤‡ä»½ã€‚
ä»¥HBaseè¶…çº§ç”¨æˆ·èº«ä»½è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
1hbase backup create &lt;type&gt; &lt;backup_path&gt; å‘½ä»¤å®Œæˆè¿è¡Œåï¼Œæ§åˆ¶å°å°†æ˜¾ç¤ºSUCCESSæˆ–FAILUREçŠ¶æ€æ¶ˆæ¯ã€‚SUCCESSæ¶ˆæ¯åŒ…æ‹¬å¤‡ä»½IDï¼Œå¤‡ä»½IDæ˜¯HBaseä¸»æœºä»å®¢æˆ·ç«¯æ”¶åˆ°å¤‡ä»½è¯·æ±‚çš„Unixæ—¶é—´ï¼ˆä¹Ÿç§°ä¸ºEpochæ—¶é—´ï¼‰ã€‚
è®°å½•åœ¨æˆåŠŸå¤‡ä»½ç»“æŸæ—¶å‡ºç°çš„å¤‡ä»½IDã€‚å¦‚æœæºç¾¤é›†å‡ºç°æ•…éšœï¼Œå¹¶ä¸”æ‚¨éœ€è¦ä½¿ç”¨è¿˜åŸæ“ä½œæ¢å¤æ•°æ®é›†ï¼Œåˆ™å…·æœ‰å¯ç”¨çš„å¤‡ä»½IDå¯ä»¥èŠ‚çœæ—¶é—´ã€‚
ä½ç½®å‘½ä»¤è¡Œå‚æ•° # type
è¦æ‰§è¡Œçš„å¤‡ä»½ç±»å‹ï¼šå®Œæ•´å¤‡ä»½æˆ–å¢é‡å¤‡ä»½ã€‚æé†’ä¸€ä¸‹ï¼Œå¢é‡å¤‡ä»½éœ€è¦å·²å®Œå…¨å¤‡ä»½ã€‚
BACKUP_PATH
è¯¥BACKUP_PATHå‚æ•°æŒ‡å®šæ¥å­˜å‚¨å¤‡ä»½æ˜ åƒæ–‡ä»¶ç³»ç»Ÿçš„å®Œæ•´URIçš„åœ°æ–¹ã€‚æœ‰æ•ˆçš„å‰ç¼€æ˜¯hdfsï¼šï¼Œwebhdfsï¼šï¼Œgpfsï¼šå’Œs3fs :
å‘½åå‘½ä»¤è¡Œå‚æ•° # -t&lt;table_name [ï¼Œtable_name]&gt;
è¦å¤‡ä»½çš„ä»¥é€—å·åˆ†éš”çš„è¡¨åˆ—è¡¨ã€‚å¦‚æœæœªæŒ‡å®šè¡¨ï¼Œåˆ™å¤‡ä»½æ‰€æœ‰è¡¨ã€‚ä¸å­˜åœ¨æ­£åˆ™è¡¨è¾¾å¼æˆ–é€šé…ç¬¦æ”¯æŒ; å¿…é¡»æ˜ç¡®åˆ—å‡ºæ‰€æœ‰è¡¨åã€‚æœ‰å…³å¯¹è¡¨é›†åˆæ‰§è¡Œæ“ä½œçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å¤‡ä»½é›†ï¼ˆè¿™å°†åœ¨ä¹‹åçš„ç« èŠ‚ä¸­è¿›è¡Œä»‹ç»ï¼‰ã€‚ä¸-sé€‰é¡¹äº’æ–¥ï¼›å…¶ä¸­ä¸€ä¸ªå‘½åé€‰é¡¹æ˜¯å¿…éœ€çš„ã€‚
-s&lt;backup_set_name&gt;
æ ¹æ®å¤‡ä»½é›†ç¡®å®šè¦å¤‡ä»½çš„è¡¨ã€‚æœ‰å…³å¤‡ä»½é›†çš„ç”¨é€”å’Œç”¨æ³•ï¼Œè¯·å‚é˜…ä½¿ç”¨å¤‡ä»½é›†ã€‚ä¸-té€‰é¡¹äº’æ–¥ã€‚
-w&lt;number_workers&gt;
ï¼ˆå¯é€‰ï¼‰æŒ‡å®šå°†æ•°æ®å¤åˆ¶åˆ°å¤‡ä»½ç›®æ ‡çš„å¹¶è¡Œå·¥ä½œå™¨æ•°ã€‚å¤‡ä»½å½“å‰ç”±MapReduceä½œä¸šæ‰§è¡Œï¼Œå› æ­¤è¯¥å€¼å¯¹åº”äºä½œä¸šå°†ç”Ÿæˆçš„Mapperæ•°ã€‚
-b&lt;bandwidth_per_worker&gt;
ï¼ˆå¯é€‰ï¼‰æŒ‡å®šæ¯ä¸ªå·¥ä½œçº¿ç¨‹çš„å¸¦å®½ï¼Œä»¥MB/ç§’ä¸ºå•ä½ã€‚
-d
ï¼ˆå¯é€‰ï¼‰å¯ç”¨â€œDEBUGâ€æ¨¡å¼ï¼Œè¯¥æ¨¡å¼æ‰“å°æœ‰å…³å¤‡ä»½åˆ›å»ºçš„å…¶ä»–æ—¥å¿—è®°å½•ã€‚
-q
ï¼ˆå¯é€‰ï¼‰å…è®¸æŒ‡å®šåº”åœ¨å…¶ä¸­æ‰§è¡Œåˆ›å»ºå¤‡ä»½çš„MapReduceä½œä¸šçš„YARNé˜Ÿåˆ—çš„åç§°ã€‚æ­¤é€‰é¡¹æœ‰åŠ©äºé˜²æ­¢å¤‡ä»½ä»»åŠ¡ä»å…¶ä»–é«˜é‡è¦æ€§MapReduceä½œä¸šä¸­çªƒå–èµ„æºã€‚
ç”¨æ³•ç¤ºä¾‹ 1$ hbase backup create full hdfs://host5:8020/data/backup -t SALES2,SALES3 -w 3 æ­¤å‘½ä»¤åœ¨HDFSå®ä¾‹ä¸­åˆ›å»ºä¸¤ä¸ªè¡¨SALES2å’ŒSALES3çš„å®Œæ•´å¤‡ä»½æ˜ åƒï¼Œè¿™ä¸¤ä¸ªè¡¨åœ¨è·¯å¾„/data/backupä¸­çš„NameNodeä¸ºhost5:8020ã€‚wé€‰é¡¹æŒ‡å®šä¸è¶…è¿‡ä¸‰ä¸ªå¹¶è¡Œå·¥ä½œå®Œæˆæ“ä½œã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/138/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸‰åå…«ã€HBaseå¤‡ä»½ä¿®å¤å‘½ä»¤" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸‰åå…«ã€HBaseå¤‡ä»½ä¿®å¤å‘½ä»¤" href="/docs/bigdata/hbase/138/">ä¸€ç™¾ä¸‰åå…«ã€HBaseå¤‡ä»½ä¿®å¤å‘½ä»¤</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">å¤‡ä»½ä¿®å¤å‘½ä»¤ æ­¤å‘½ä»¤å°è¯•æ›´æ­£ç”±äºè½¯ä»¶é”™è¯¯æˆ–æœªå¤„ç†çš„å¤±è´¥æ–¹æ¡ˆè€Œå­˜åœ¨çš„æŒä¹…å¤‡ä»½å…ƒæ•°æ®ä¸­çš„ä»»ä½•ä¸ä¸€è‡´ä¹‹å¤„ã€‚è™½ç„¶å¤‡ä»½å®ç°å°è¯•è‡ªè¡Œæ›´æ­£æ‰€æœ‰é”™è¯¯ï¼Œä½†åœ¨ç³»ç»Ÿæ— æ³•è‡ªåŠ¨æ¢å¤çš„æƒ…å†µä¸‹ï¼Œæ­¤å·¥å…·å¯èƒ½æ˜¯å¿…éœ€çš„ã€‚
1$ hbase backup repair ä½ç½®å‘½ä»¤è¡Œå‚æ•° # æ²¡æœ‰ã€‚
å‘½åå‘½ä»¤è¡Œå‚æ•° æ²¡æœ‰ã€‚
ç”¨æ³•ç¤ºä¾‹ 1$ hbase backup repair</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/132/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸‰åäºŒã€HBaseåˆå¹¶å¢é‡å¤‡ä»½æ˜ åƒ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸‰åäºŒã€HBaseåˆå¹¶å¢é‡å¤‡ä»½æ˜ åƒ" href="/docs/bigdata/hbase/132/">ä¸€ç™¾ä¸‰åäºŒã€HBaseåˆå¹¶å¢é‡å¤‡ä»½æ˜ åƒ</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åˆå¹¶å¢é‡å¤‡ä»½æ˜ åƒ æ­¤å‘½ä»¤å¯ç”¨äºå°†ä¸¤ä¸ªæˆ–å¤šä¸ªå¢é‡å¤‡ä»½æ˜ åƒåˆå¹¶ä¸ºå•ä¸ªå¢é‡å¤‡ä»½æ˜ åƒã€‚è¿™å¯ç”¨äºå°†å¤šä¸ªå°å‹å¢é‡å¤‡ä»½æ˜ åƒåˆå¹¶ä¸ºä¸€ä¸ªè¾ƒå¤§çš„å¢é‡å¤‡ä»½æ˜ åƒã€‚æ­¤å‘½ä»¤å¯ç”¨äºå°†æ¯å°æ—¶å¢é‡å¤‡ä»½åˆå¹¶åˆ°æ¯æ—¥å¢é‡å¤‡ä»½æ˜ åƒä¸­ï¼Œæˆ–å°†æ¯æ—¥å¢é‡å¤‡ä»½åˆå¹¶åˆ°æ¯å‘¨å¢é‡å¤‡ä»½ä¸­ã€‚
1$ hbase backup merge &lt;backup_ids&gt; ä½ç½®å‘½ä»¤è¡Œå‚æ•° # backup_ids
ä»¥é€—å·åˆ†éš”çš„å¢é‡å¤‡ä»½æ˜ åƒIDåˆ—è¡¨ï¼Œå®ƒä»¬å°†ç»„åˆåˆ°å•ä¸ªæ˜ åƒä¸­ã€‚
å‘½åå‘½ä»¤è¡Œå‚æ•° # æ²¡æœ‰ã€‚
ç”¨æ³•ç¤ºä¾‹ 1$ hbase backup merge backupId_1467823988425,backupId_1467827588425</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/139/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸‰åä¹ã€HBaseé…ç½®å¯†é’¥" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸‰åä¹ã€HBaseé…ç½®å¯†é’¥" href="/docs/bigdata/hbase/139/">ä¸€ç™¾ä¸‰åä¹ã€HBaseé…ç½®å¯†é’¥</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">é…ç½®å¯†é’¥ å¤‡ä»½å’Œè¿˜åŸåŠŸèƒ½åŒ…æ‹¬å¿…éœ€çš„å’Œå¯é€‰çš„é…ç½®å¯†é’¥ã€‚
å¿…éœ€çš„å±æ€§ hbase.backup.enableï¼šæ§åˆ¶æ˜¯å¦å¯ç”¨è¯¥åŠŸèƒ½ï¼Œé»˜è®¤å€¼ä¸ºfalseï¼Œå°†æ­¤å€¼è®¾ç½®ä¸ºtrueã€‚
hbase.master.logcleaner.pluginsï¼šæ¸…é™¤HBase Masterä¸­çš„æ—¥å¿—æ—¶è°ƒç”¨çš„é€—å·åˆ†éš”çš„ç±»åˆ—è¡¨ã€‚å°†æ­¤å€¼è®¾ç½®ä¸ºorg.apache.hadoop.hbase.backup.master.BackupLogCleaneræˆ–å°†å…¶é™„åŠ åˆ°å½“å‰å€¼ã€‚
hbase.procedure.master.classesï¼šä½¿ç”¨Masterä¸­çš„Procedureæ¡†æ¶è°ƒç”¨çš„é€—å·åˆ†éš”çš„ç±»åˆ—è¡¨ã€‚å°†æ­¤å€¼è®¾ç½®ä¸ºorg.apache.hadoop.hbase.backup.master.LogRollMasterProcedureManageræˆ–å°†å…¶é™„åŠ åˆ°å½“å‰å€¼ã€‚
hbase.procedure.regionserver.classesï¼šä½¿ç”¨RegionServerä¸­çš„Procedureæ¡†æ¶è°ƒç”¨çš„é€—å·åˆ†éš”çš„ç±»åˆ—è¡¨ã€‚å°†æ­¤å€¼è®¾ç½®ä¸ºorg.apache.hadoop.hbase.backup.regionserver.LogRollRegionServerProcedureManageræˆ–å°†å…¶é™„åŠ åˆ°å½“å‰å€¼ã€‚
hbase.coprocessor.region.classesï¼šåœ¨è¡¨ä¸Šéƒ¨ç½²çš„ä»¥é€—å·åˆ†éš”çš„RegionObserversåˆ—è¡¨ã€‚å°†æ­¤å€¼è®¾ç½®ä¸ºorg.apache.hadoop.hbase.backup.BackupObserveræˆ–å°†å…¶é™„åŠ åˆ°å½“å‰å€¼ã€‚
hbase.master.hfilecleaner.pluginsï¼šåœ¨Masterä¸Šéƒ¨ç½²çš„ä»¥é€—å·åˆ†éš”çš„HFileCleanersåˆ—è¡¨ã€‚å°†æ­¤å€¼è®¾ç½®ä¸ºorg.apache.hadoop.hbase.backup.BackupHFileCleaneræˆ–å°†å…¶é™„åŠ åˆ°å½“å‰å€¼ã€‚
å¯é€‰å±æ€§ hbase.backup.system.ttlï¼šhbase:backupè¡¨ä¸­æ•°æ®çš„ç”Ÿå­˜æ—¶é—´ï¼ˆé»˜è®¤å€¼ï¼šforeverï¼‰ã€‚æ­¤å±æ€§ä»…åœ¨åˆ›å»ºhbase:backupè¡¨ä¹‹å‰ç›¸å…³ã€‚å½“æ­¤è¡¨å·²å­˜åœ¨æ—¶ï¼Œä½¿ç”¨HBase shellä¸­çš„â€œalterâ€å‘½ä»¤ä¿®æ”¹TTLã€‚
hbase.backup.attempts.maxï¼šè·å–hbaseè¡¨å¿«ç…§æ—¶æ‰§è¡Œçš„å°è¯•æ¬¡æ•°ï¼ˆé»˜è®¤å€¼ï¼š10ï¼‰ã€‚
hbase.backup.attempts.pause.msï¼šå¤±è´¥çš„å¿«ç…§å°è¯•ä¹‹é—´ç­‰å¾…çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼ˆé»˜è®¤å€¼ï¼š10000ï¼‰ã€‚
hbase.backup.logroll.timeout.millisï¼šç­‰å¾…RegionServersåœ¨Masterçš„è¿‡ç¨‹æ¡†æ¶ä¸­æ‰§è¡ŒWALæ»šåŠ¨çš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ï¼ˆé»˜è®¤å€¼ï¼š30000ï¼‰ã€‚</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/136/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸‰åå…­ã€HBaseæè¿°å¤‡ä»½æ˜ åƒ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸‰åå…­ã€HBaseæè¿°å¤‡ä»½æ˜ åƒ" href="/docs/bigdata/hbase/136/">ä¸€ç™¾ä¸‰åå…­ã€HBaseæè¿°å¤‡ä»½æ˜ åƒ</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">æè¿°å¤‡ä»½æ˜ åƒ æ­¤å‘½ä»¤å¯ç”¨äºè·å–æœ‰å…³ç‰¹å®šå¤‡ä»½æ˜ åƒçš„ä¿¡æ¯ã€‚
1$ hbase backup describe &lt;backup_id&gt; ä½ç½®å‘½ä»¤è¡Œå‚æ•° # backup_id
è¦æè¿°çš„å¤‡ä»½æ˜ åƒçš„IDã€‚
å‘½åå‘½ä»¤è¡Œå‚æ•° # æ²¡æœ‰ã€‚
ç”¨æ³•ç¤ºä¾‹ 1$ hbase backup describe backupId_1467823988425</div></div></div></div><div class="col"><div class="hb-blog-post-card card border-0 overflow-hidden h-100 hb-module mb-0"><div class="hb-blog-post-meta d-flex align-items-center"><a class="hb-blog-post-author-link text-decoration-none" href="/authors/andywu/" title="å®‰å›¾æ–°"><picture><img class="hb-blog-author-img rounded-circle" src="https://cdn.hotmindshare.com/public%2Fandyng_1000x1000.png" alt="å®‰å›¾æ–°" loading="lazy"/>
</picture></a><span class="hb-blog-post-date">2023å¹´10æœˆ21æ—¥</span>
<span class="hb-blog-post-reading-time">1 åˆ†é’Ÿé˜…è¯»</span>
<span class="hb-blog-post-section"><a class="badge bg-secondary text-decoration-none fw-normal" href="/docs/">æŠ€æœ¯æ•™ç¨‹</a></span></div><a class="card-img-top overflow-hidden border border-secondary-subtle text-body text-decoration-none mt-2" href="/docs/bigdata/hbase/137/"><picture><source srcset="/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_db4ab978a5e64c694fdda20c4098bfd2.webp" type="image/webp"/><img class="hb-blog-post-card-img" src="https://www.hotmindshare.com/images/thumbnail_hu2c04c355e02fd9f63b765bcdb503cf1c_2284289_0x360_resize_box_3.c4a823371e7699a6d0a45f2ed38908a1.png" alt="ä¸€ç™¾ä¸‰åä¸ƒã€HBaseåˆ é™¤å¤‡ä»½æ˜ åƒ" loading="lazy" height="360" width="630"/></picture></a><div class="card-body px-0 py-2 d-flex flex-column"><div class="hb-blog-post-title card-title h5 py-1"><a class="hb-blog-post-title-link d-block" title="ä¸€ç™¾ä¸‰åä¸ƒã€HBaseåˆ é™¤å¤‡ä»½æ˜ åƒ" href="/docs/bigdata/hbase/137/">ä¸€ç™¾ä¸‰åä¸ƒã€HBaseåˆ é™¤å¤‡ä»½æ˜ åƒ</a></div><div class="hb-blog-post-meta d-block text-nowrap text-truncate mb-2"><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-category badge bg-secondary text-decoration-none fw-normal me-1" href="/categories/hbase/">HBase</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/%E5%A4%A7%E6%95%B0%E6%8D%AE/">å¤§æ•°æ®</a>
</span><span class="hb-blog-post-taxonomy-meta"><a class="hb-blog-post-taxonomy hb-blog-post-taxonomy-series badge bg-secondary text-decoration-none fw-normal me-1" href="/series/hbase/">HBase</a></span></div><div class="hb-blog-post-summary card-text text-secondary mb-auto">åˆ é™¤å¤‡ä»½æ˜ åƒ æ­¤å‘½ä»¤å¯ç”¨äºåˆ é™¤ä¸å†éœ€è¦çš„å¤‡ä»½æ˜ åƒã€‚
1$ hbase backup delete &lt;backup_id&gt; ä½ç½®å‘½ä»¤è¡Œå‚æ•° # backup_id
åº”è¯¥åˆ é™¤å¤‡ä»½æ˜ åƒçš„IDã€‚
å‘½åå‘½ä»¤è¡Œå‚æ•° # æ²¡æœ‰ã€‚
ç”¨æ³•ç¤ºä¾‹ 1$ hbase backup delete backupId_1467823988425</div></div></div></div></div></div></div><div class="border-1"><nav class="hb-blog-pagination mb-3" aria-label="Page navigation"><ul class="pagination flex-wrap justify-content-center"><li class="page-item"><a class="page-link" href="/archives/page/32/" aria-label="å‰ä¸€é¡µ"><span aria-hidden="true">Â«</span></a></li><li class="page-item"><a class="page-link" href="/archives/">1</a></li><li class="page-item disabled"><a class="page-link" href="#">...</a></li><li class="page-item"><a class="page-link" href="/archives/page/31/">31</a></li><li class="page-item"><a class="page-link" href="/archives/page/32/">32</a></li><li class="page-item active"><a class="page-link" href="/archives/page/33/">33</a></li><li class="page-item"><a class="page-link" href="/archives/page/34/">34</a></li><li class="page-item"><a class="page-link" href="/archives/page/35/">35</a></li><li class="page-item disabled"><a class="page-link" href="#">...</a></li><li class="page-item"><a class="page-link" href="/archives/page/40/">40</a></li><li class="page-item"><a class="page-link" href="/archives/page/34/" aria-label="ä¸‹ä¸€é¡µ"><span aria-hidden="true">Â»</span></a></li></ul></nav></div></div></div><footer class="hb-footer pt-4 pt-md-5 pb-2 pb-md-3 bg-body-tertiary"><div class="container-fluid container-lg px-4 px-md-3"><div class="row"><div class="hb-footer-site-info col mb-2 text-center"><div class="h5">ç¨‹åºå‘˜å®‰ä»”</div><ul class="list-unstyled small mb-2"><li class="mt-2">ä¸€ä¸ªåªçˆ±æŠ˜è…¾æŠ€æœ¯çš„æ™®é€šäºº</li><li class="mt-2">ç²¤ICPå¤‡2023148789å·</li></ul><div class="hb-footer-socials d-flex mb-2 justify-content-center flex-wrap"><a class="hb-social p-2" href="mailto:andywuwu0728@gmail.com" target="_blank" rel="nofollow me" title="Email"><svg aria-hidden="true" class="bi bi-envelope-fillbi bi-envelope-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"></path></svg></a><a class="hb-social p-2" href="https://github.com/Andywugh" target="_blank" rel="nofollow me" title="GitHub"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:%!s(bool=true)" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="hb-social p-2" href="/index.xml" target="_blank" rel="nofollow me" title="RSS"><svg aria-hidden="true" class="bi bi-rss-fillbi bi-rss-fill hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" style="color:%!s(bool=true)" viewBox="0 0 16 16" width="1.75em" xmlns="http://www.w3.org/2000/svg"><path d="M2 0A2 2 0 000 2v12a2 2 0 002 2h12a2 2 0 002-2V2a2 2 0 00-2-2zm1.5 2.5c5.523.0 10 4.477 10 10a1 1 0 11-2 0 8 8 0 00-8-8 1 1 0 010-2m0 4a6 6 0 016 6 1 1 0 11-2 0 4 4 0 00-4-4 1 1 0 010-2m.5 7a1.5 1.5.0 110-3 1.5 1.5.0 010 3"></path></svg></a><a class="hb-social p-2" href="https://www.zhihu.com/people/Andywuwu" target="_blank" rel="nofollow me" title="çŸ¥ä¹"><svg aria-hidden="true" class="hi-svg-inline hb-social-icon" fill="currentcolor" height="1.75em" role="img" style="color:#056de8" viewBox="0 0 24 24" width="1.75em" xmlns="http://www.w3.org/2000/svg"><title>Zhihu</title><path d="M5.721.0C2.251.0.0 2.25.0 5.719V18.28C0 21.751 2.252 24 5.721 24h12.56C21.751 24 24 21.75 24 18.281V5.72C24 2.249 21.75.0 18.281.0zm1.964 4.078c-.271.73-.5 1.434-.68 2.11h4.587c.545-.006.445 1.168.445 1.171H9.384a58.104 58.104.0 01-.112 3.797h2.712c.388.023.393 1.251.393 1.266H9.183a9.223 9.223.0 01-.408 2.102l.757-.604c.452.456 1.512 1.712 1.906 2.177.473.681.063 2.081.063 2.081l-2.794-3.382c-.653 2.518-1.845 3.607-1.845 3.607-.523.468-1.58.82-2.64.516 2.218-1.73 3.44-3.917 3.667-6.497H4.491c0-.015.197-1.243.806-1.266h2.71c.024-.32.086-3.254.086-3.797H6.598c-.136.406-.158.447-.268.753-.594 1.095-1.603 1.122-1.907 1.155.906-1.821 1.416-3.6 1.591-4.064.425-1.124 1.671-1.125 1.671-1.125zM13.078 6h6.377v11.33h-2.573l-2.184 1.373-.401-1.373h-1.219zm1.313 1.219v8.86h.623l.263.937 1.455-.938h1.456v-8.86z"></path></svg></a></div></div></div></div></footer><script src="/js/hb.19ff2dd5085ae395c8501e5aef2fbcc49e7612473405d8eb7352b40a406e9daf.js" integrity="sha256-Gf8t1Qha45XIUB5a7y+8xJ52Ekc0Bdjrc1K0CkBuna8=" defer=""></script><script src="/js/search.60c6325701a1a087903f75b2304b1bb0ff0572506d58f09d2f9ce6c41cc85908.js" defer=""></script><script>"serviceWorker"in navigator&&window.addEventListener("DOMContentLoaded",function(){navigator.serviceWorker.register("/sw.js")})</script></body></html>